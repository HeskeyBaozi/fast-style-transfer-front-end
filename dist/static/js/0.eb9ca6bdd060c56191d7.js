webpackJsonp([0],{"+E39":function(t,e,n){t.exports=!n("S82l")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"+ZMJ":function(t,e,n){var r=n("lOnJ");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},"+cXR":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("BozM"),a=n("FSI1"),i=function(t){function e(e,n,r,i){var s=t.call(this,e,i)||this;return s.learningRate=e,s.beta1=n,s.beta2=r,s.firstMoment=new a.TensorArrayMap,s.weightedInfNorm=new a.TensorArrayMap,s.eps=o.Scalar.new(1e-8),s.b1=o.Scalar.new(s.beta1),s.b2=o.Scalar.new(s.beta2),s.accB1=o.Scalar.new(s.beta1),s}return r(e,t),e.prototype.beforeBatch=function(e,n,r,a,i){var s=this;t.prototype.beforeBatch.call(this,e,n,r,a,i),0===this.firstMoment.size()&&this.variableNodes.forEach(function(t){s.firstMoment.set(t.output,o.NDArray.zeros(t.output.shape))}),0===this.weightedInfNorm.size()&&this.variableNodes.forEach(function(t){s.weightedInfNorm.set(t.output,o.NDArray.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,n,r,o){var i=this;t.scope(function(e){i.variableNodes.forEach(function(n){var o=r.get(n.output),a=i.variableGradients.get(n.output),s=i.firstMoment.get(n.output),u=i.weightedInfNorm.get(n.output),c=t.scaledArrayAdd(i.b1,s,t.subtract(i.one,i.b1),a),p=t.multiply(i.b2,u),h=t.abs(a),l=t.add(t.relu(t.subtract(p,h)),h),f=t.scaledArrayAdd(i.one,o,t.divide(i.c,t.subtract(i.one,i.accB1)),t.divide(c,t.add(i.eps,l)));r.set(n.output,e(f)),n.data=f,i.firstMoment.set(n.output,e(c)),i.weightedInfNorm.set(n.output,e(l)),o.dispose(),a.dispose(),s.dispose(),u.dispose()});var n=i.accB1;i.accB1=e(t.multiply(i.accB1,i.b1)),n.dispose()}),this.variableGradients.dispose(),this.variableGradients=new a.TensorArrayMap},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.firstMoment.dispose(),this.weightedInfNorm.dispose(),this.eps.dispose(),this.accB1.dispose(),this.b1.dispose(),this.b2.dispose()},e}(n("qhzv").Optimizer);e.AdamaxOptimizer=i},"+tPU":function(t,e,n){n("xGkn");for(var r=n("7KvD"),o=n("hJx8"),a=n("/bQp"),i=n("dSzd")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],p=r[c],h=p&&p.prototype;h&&!h[i]&&o(h,i,c),a[c]=a.Array}},"+tPX":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n,r){var o=t.call(this)||this;return o.x1Tensor=e,o.x2Tensor=n,o.yTensor=r,o}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor);t.scope(function(a){e.set(n.yTensor,a(t.argMaxEquals(r,o)))})},e.prototype.backProp=function(t,e,n){throw new Error("ArgMaxEquals backprop unimplemented")},e}(n("/ROS").Operation);e.ArgMaxEquals=o},"//Fk":function(t,e,n){t.exports={default:n("U5ju"),__esModule:!0}},"/ROS":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.disposeTransientArrays=function(t,e){},t.prototype.dispose=function(){},t}();e.Operation=r},"/bQp":function(t,e){t.exports={}},0:function(t,e){},"02A5":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("fpai"),o=n("jMY8"),a=n("eYNA"),i=n("xf6u"),s=n("65Fz"),u=n("kiVh"),c=n("9RhS"),p=n("P58p"),h=n("BozM"),l=n("LWEw"),f=function(){function t(t,e){this.registeredArrays=new Set,this.customBackend=!1,"string"==typeof t?this.backend=r.ENV.getBackend(t):(this.customBackend=!0,this.backend=t),this.backendEngine=new i.BackendEngine(this.backend,e)}return t.prototype.time=function(t){return this.backend.time(t)},t.prototype.getNumArrays=function(){return this.registeredArrays.size},t.prototype.register=function(t){if(this.registeredArrays.has(t.id))throw new Error("NDArray with id "+t.id+" was already registered");this.registeredArrays.add(t.id),this.backendEngine.track(t)},t.prototype.writePixels=function(t,e,n){this.backend.writePixels(t,e,n)},t.prototype.write=function(t,e,n,r){this.backend.write(t,e,n,r)},t.prototype.readSync=function(t){return this.backend.readSync(t)},t.prototype.read=function(t){return this.backend.read(t)},t.prototype.enableDebugMode=function(){this.backendEngine.enableDebugMode(),console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")},t.prototype.scope=function(t){return this.backendEngine.scope("scope",t,!1)},t.prototype.gradientsScope=function(t){return this.backendEngine.scope("gradientsScope",t,!0)},t.prototype.startScope=function(){this.backendEngine.startScope(!1)},t.prototype.endScope=function(t){this.backendEngine.endScope(t,!1)},t.prototype.keep=function(t){return this.backendEngine.keep(t)},t.prototype.track=function(t){return this.backendEngine.track(t)},t.prototype.dispose=function(){this.customBackend&&this.backend.dispose()},t.prototype.matMul=function(t,e,n,r){var a=this;void 0===n&&(n=s.MatrixOrientation.REGULAR),void 0===r&&(r=s.MatrixOrientation.REGULAR);var i=n===s.MatrixOrientation.REGULAR?t.shape[1]:t.shape[0],u=r===s.MatrixOrientation.REGULAR?e.shape[0]:e.shape[1];return o.assert(2===t.rank&&2===e.rank,"Error in matMul: inputs must be rank 2, got ranks "+t.rank+" and "+e.rank+"."),o.assert(i===u,"Error in matMul: inner shapes ("+i+") and ("+u+") of NDArrays with shapes "+t.shape+" and "+e.shape+" and orientations "+s.MatrixOrientation[n]+" and "+s.MatrixOrientation[r]+" must match."),this.backendEngine.executeKernel("MatMul",{inputs:{a:t,b:e},args:{aOrientation:n,bOrientation:r}},function(o,i){if(n===s.MatrixOrientation.TRANSPOSED||r===s.MatrixOrientation.TRANSPOSED)throw new Error("Backprop for transposed MatMul not yet implemented.");return{a:function(){return a.matMul(o,e,s.MatrixOrientation.REGULAR,s.MatrixOrientation.TRANSPOSED)},b:function(){return a.matMul(t,o,s.MatrixOrientation.TRANSPOSED,s.MatrixOrientation.REGULAR)}}})},t.prototype.executeOp=function(t,e){return e()},t.prototype.vectorTimesMatrix=function(t,e){return o.assert(1===t.rank,"Error in vectorTimesMatrix: first input must be rank 1, but got rank "+t.rank+"."),o.assert(2===e.rank,"Error in vectorTimesMatrix: second input must be rank 2, but got rank "+e.rank+"."),o.assert(t.size===e.shape[0],"Error in vectorTimesMatrix: size of vector ("+t.size+") must match first dimension of matrix ("+e.shape[0]+")"),this.matMul(t.as2D(1,-1),e).as1D()},t.prototype.matrixTimesVector=function(t,e){return o.assert(1===e.rank,"Error in matrixTimesVector: second input must rank 1, but got rank "+e.rank+"."),o.assert(2===t.rank,"Error in matrixTimesVector: first input must be a rank 2, but got rank "+t.rank+"."),o.assert(e.size===t.shape[1],"Error in matrixTimesVector: size of first rank 1 input "+e.size+" must match inner dimension of second rank 2 input, but got shape "+t.shape+"."),this.matMul(t,e.as2D(-1,1)).as1D()},t.prototype.dotProduct=function(t,e){return o.assert(1===t.rank&&1===e.rank,"Error in dotProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+e.rank+"."),o.assert(t.size===e.size,"Error in dotProduct: size of inputs ("+t.size+") and ("+e.size+") must match."),this.matMul(t.as2D(1,-1),e.as2D(-1,1)).asScalar()},t.prototype.outerProduct=function(t,e){return o.assert(1===t.rank&&1===e.rank,"Error in outerProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+e.rank+"."),this.matMul(t.as2D(-1,1),e.as2D(1,-1))},t.prototype.clone=function(t){return this.backendEngine.executeKernel("Clone",{inputs:{x:t}})},t.prototype.reshape=function(t,e){return console.warn("math.reshape() is deprecated. Please call reshape() directly on the ndarray object"),t.reshape(e)},t.prototype.slice1D=function(t,e,n){return l.assertParamsValid(t,[e],[n]),this.backendEngine.executeKernel("Slice1D",{inputs:{x:t},args:{begin:e,size:n}})},t.prototype.slice2D=function(t,e,n){return l.assertParamsValid(t,e,n),this.backendEngine.executeKernel("Slice2D",{inputs:{x:t},args:{begin:e,size:n}})},t.prototype.slice3D=function(t,e,n){return l.assertParamsValid(t,e,n),this.backendEngine.executeKernel("Slice3D",{inputs:{x:t},args:{begin:e,size:n}})},t.prototype.slice4D=function(t,e,n){return l.assertParamsValid(t,e,n),this.backendEngine.executeKernel("Slice4D",{inputs:{x:t},args:{begin:e,size:n}})},t.prototype.concat1D=function(t,e){return c.assertParams(t.shape,e.shape,0),this.backendEngine.executeKernel("Concat1D",{inputs:{a:t,b:e}})},t.prototype.concat2D=function(t,e,n){return c.assertParams(t.shape,e.shape,n),this.backendEngine.executeKernel("Concat2D",{inputs:{a:t,b:e},args:{axis:n}})},t.prototype.concat3D=function(t,e,n){return c.assertParams(t.shape,e.shape,n),this.backendEngine.executeKernel("Concat3D",{inputs:{a:t,b:e},args:{axis:n}})},t.prototype.concat4D=function(t,e,n){return c.assertParams(t.shape,e.shape,n),this.backendEngine.executeKernel("Concat4D",{inputs:{a:t,b:e},args:{axis:n}})},t.prototype.logSumExp=function(t,e,n){var r=this;void 0===e&&(e=null),void 0===n&&(n=!1);var o=a.parseAxisParam(e,t.shape);return this.executeOp("logSumExp",function(){var e=r.max(t,o,!0),i=r.subtract(t,e),s=r.exp(i),u=r.sum(s,o),c=r.log(u),p=r.add(e.reshape(c.shape),c);if(n){var h=a.expandShapeToKeepDim(p.shape,o);return p.reshape(h)}return p})},t.prototype.sum=function(t,e,n){var r=this;void 0===e&&(e=null),void 0===n&&(n=!1);var o=a.parseAxisParam(e,t.shape),i=o,s=a.getPermutedAxes(i,t.rank);return this.executeOp("sum",function(){null!=s&&(t=r.transpose(t,s),i=a.getInnerMostAxes(i.length,t.rank));var u=r.backendEngine.executeKernel("Sum",{inputs:{x:t},args:{axes:i}},function(n,o){return{x:function(){if(null!=e)throw new Error("Gradients for sum with axis reduction not yet supported.");return r.multiply(n,h.NDArray.onesLike(t))}}});if(n){var c=a.expandShapeToKeepDim(u.shape,o);return u.reshape(c)}return u})},t.prototype.mean=function(t,e,n){var r=this;void 0===e&&(e=null),void 0===n&&(n=!1);var i=a.parseAxisParam(e,t.shape),s=a.computeOutAndReduceShapes(t.shape,i)[1],u=o.sizeFromShape(s);return this.executeOp("mean",function(){return r.scope(function(o){var a=r.divide(t,h.Scalar.new(u));return r.sum(a,e,n)})})},t.prototype.argMin=function(t,e){var n=this;void 0===e&&(e=null);var r=a.parseAxisParam(e,t.shape),o=a.getPermutedAxes(r,t.rank);return this.executeOp("argMin",function(){return null!=o&&(t=n.transpose(t,o),r=a.getInnerMostAxes(r.length,t.rank)),n.backendEngine.executeKernel("ArgMin",{inputs:{x:t},args:{axes:r}})})},t.prototype.argMax=function(t,e){var n=this;void 0===e&&(e=null);var r=a.parseAxisParam(e,t.shape),o=a.getPermutedAxes(r,t.rank);return this.executeOp("argMax",function(){return null!=o&&(t=n.transpose(t,o),r=a.getInnerMostAxes(r.length,t.rank)),n.backendEngine.executeKernel("ArgMax",{inputs:{x:t},args:{axes:r}})})},t.prototype.argMaxEquals=function(t,e){var n=this;return o.assertShapesMatch(t.shape,e.shape,"Error in argMaxEquals: "),this.executeOp("argMaxEquals",function(){return n.scope(function(){return n.equal(n.argMax(t),n.argMax(e))})})},t.prototype.equal=function(t,e){return this.backendEngine.executeKernel("Equal",{inputs:{a:t,b:e}})},t.prototype.equalStrict=function(t,e){return o.assertShapesMatch(t.shape,e.shape,"Error in equalStrict: "),this.equal(t,e)},t.prototype.topK=function(t,e){var n=this;o.assert(e<=t.size,"Error in topK: k value ("+e+") must be less than size of input ndarray, got shape "+t.shape+".");var r,a;this.executeOp("topK",function(){return r=n.backendEngine.executeKernel("TopKValues",{inputs:{x:t},args:{k:e}}),a=n.backendEngine.executeKernel("TopKIndices",{inputs:{x:t},args:{k:e}}),r});return{values:r,indices:a}},t.prototype.min=function(t,e,n){var r=this;void 0===e&&(e=null),void 0===n&&(n=!1);var o=a.parseAxisParam(e,t.shape),i=o,s=a.getPermutedAxes(i,t.rank);return this.executeOp("min",function(){null!=s&&(t=r.transpose(t,s),i=a.getInnerMostAxes(i.length,t.rank));var e=r.backendEngine.executeKernel("Min",{inputs:{x:t},args:{axes:i}});if(n){var u=a.expandShapeToKeepDim(e.shape,o);return e.reshape(u)}return e})},t.prototype.max=function(t,e,n){var r=this;void 0===e&&(e=null),void 0===n&&(n=!1);var o=a.parseAxisParam(e,t.shape),i=o,s=a.getPermutedAxes(i,t.rank);return this.executeOp("max",function(){null!=s&&(t=r.transpose(t,s),i=a.getInnerMostAxes(i.length,t.rank));var e=r.backendEngine.executeKernel("Max",{inputs:{x:t},args:{axes:i}});if(n){var u=a.expandShapeToKeepDim(e.shape,o);return e.reshape(u)}return e})},t.prototype.softmax=function(t,e){var n=this;if(void 0===e&&(e=-1),-1===e&&(e=t.rank-1),e!==t.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and dim was "+e);return this.executeOp("softmax",function(){return n.scope(function(){var r=n.logSumExp(t,[e],!0),o=n.subtract(t,r);return n.exp(o)})})},t.prototype.switchDim=function(t,e){return this.transpose(t,e)},t.prototype.tile=function(t,e){return o.assert(t.rank===e.length,"Error in transpose: rank of input "+t.rank+" must match length of reps "+e+"."),this.backendEngine.executeKernel("Tile",{inputs:{x:t},args:{reps:e}})},t.prototype.transpose=function(t,e){return null==e&&(e=t.shape.map(function(t,e){return e}).reverse()),o.assert(t.rank===e.length,"Error in transpose: rank of input "+t.rank+" must match length of perm "+e+"."),this.backendEngine.executeKernel("Transpose",{inputs:{x:t},args:{perm:e}})},t.prototype.scalarPlusArray=function(t,e){return o.assert(1===t.size,"Error in scalarPlusArray: first argument must be rank 0, but got rank "+t.rank+"."),this.add(t,e)},t.prototype.scalarMinusArray=function(t,e){return o.assert(1===t.size,"Error in scalarMinusArray: first argument must be rank 0, but got rank "+t.rank+"."),this.subtract(t,e)},t.prototype.arrayMinusScalar=function(t,e){return o.assert(1===e.size,"Error in arrayMinusScalar: second argument must be rank 0, but got rank "+e.rank+"."),this.subtract(t,e)},t.prototype.neg=function(t){return this.backendEngine.executeKernel("Neg",{inputs:{x:t}})},t.prototype.add=function(t,e){return u.assertAndGetBroadcastShape(t.shape,e.shape),this.backendEngine.executeKernel("Add",{inputs:{a:t,b:e}})},t.prototype.addStrict=function(t,e){return o.assertShapesMatch(t.shape,e.shape,"Error in addStrict: "),this.add(t,e)},t.prototype.subtract=function(t,e){var n=this;return u.assertAndGetBroadcastShape(t.shape,e.shape),this.backendEngine.executeKernel("Sub",{inputs:{a:t,b:e}},function(r,a){if(!o.arraysEqual(t.shape,e.shape))throw new Error("Backprop through broadcasted subtract not yet supported.");return{a:function(){return h.NDArray.onesLike(t)},b:function(){return n.scope(function(){return n.neg(h.NDArray.onesLike(e))})}}})},t.prototype.pow=function(t,e){var n=this;o.assert("int32"===e.dtype,"only supports int32 data type for the exponent parameter."),u.assertAndGetBroadcastShape(t.shape,e.shape);return this.backendEngine.executeKernel("Pow",{inputs:{a:t,b:e}},function(r,a){if(!o.arraysEqual(t.shape,e.shape))throw new Error("Gradient of pow not yet supported for broadcasted shapes.");return{a:function(){return n.scope(function(){return n.multiply(r,n.multiply(e,n.pow(t,n.subtract(e,h.Scalar.new(1,"int32")))))})},b:function(){throw new Error("Backprop through exponent of math.pow not implemented yet.")}}})},t.prototype.powStrict=function(t,e){return o.assertShapesMatch(t.shape,e.shape,"Error in powStrict: "),this.pow(t,e)},t.prototype.sub=function(t,e){return this.subtract(t,e)},t.prototype.subStrict=function(t,e){return o.assertShapesMatch(t.shape,e.shape,"Error in subStrict: "),this.subtract(t,e)},t.prototype.multiply=function(t,e){var n=this;return u.assertAndGetBroadcastShape(t.shape,e.shape),this.backendEngine.executeKernel("Mul",{inputs:{a:t,b:e}},function(r,a){if(!o.arraysEqual(t.shape,e.shape))throw new Error("Backprop through broadcasted multiply not supported yet.");return{a:function(){return n.clone(e)},b:function(){return n.clone(t)}}})},t.prototype.elementWiseMul=function(t,e){return this.multiplyStrict(t,e)},t.prototype.multiplyStrict=function(t,e){return o.assertShapesMatch(t.shape,e.shape,"Error in multiplyStrict: "),this.multiply(t,e)},t.prototype.divide=function(t,e){return u.assertAndGetBroadcastShape(t.shape,e.shape),this.backendEngine.executeKernel("Div",{inputs:{a:t,b:e}})},t.prototype.divideStrict=function(t,e){return o.assertShapesMatch(t.shape,e.shape,"Error in divideStrict: "),this.divide(t,e)},t.prototype.scalarDividedByArray=function(t,e){return o.assert(1===t.size,"Error in scalarDividedByArray: first argument must be rank 0, but got NDArray of rank "+t.rank+"."),this.divide(t,e)},t.prototype.arrayDividedByScalar=function(t,e){return o.assert(1===e.size,"Error in arrayDividedByScalar: second argument must be rank 0, but got NDArray of rank "+e.rank+"."),this.divide(t,e)},t.prototype.ceil=function(t){return this.backendEngine.executeKernel("Ceil",{inputs:{x:t}})},t.prototype.floor=function(t){return this.backendEngine.executeKernel("Floor",{inputs:{x:t}})},t.prototype.exp=function(t){return this.backendEngine.executeKernel("Exp",{inputs:{x:t}})},t.prototype.log=function(t){return this.backendEngine.executeKernel("Log",{inputs:{x:t}})},t.prototype.sqrt=function(t){return this.backendEngine.executeKernel("Sqrt",{inputs:{x:t}})},t.prototype.square=function(t){var e=this;return this.backendEngine.executeKernel("Square",{inputs:{x:t}},function(n,r){return{x:function(){return e.multiply(n,e.multiply(t,h.Scalar.new(2)))}}})},t.prototype.abs=function(t){return this.backendEngine.executeKernel("Abs",{inputs:{x:t}})},t.prototype.clip=function(t,e,n){return o.assert(e<=n,"Error in clip: min ("+e+") must beless than or equal to max ("+n+")."),this.backendEngine.executeKernel("Clip",{inputs:{x:t},args:{min:e,max:n}})},t.prototype.relu=function(t){var e=this;return this.backendEngine.executeKernel("Relu",{inputs:{x:t}},function(n,r){return{x:function(){return e.step(t)}}})},t.prototype.elu=function(t){return this.backendEngine.executeKernel("Elu",{inputs:{x:t}})},t.prototype.eluDer=function(t){return this.backendEngine.executeKernel("EluDer",{inputs:{x:t}})},t.prototype.selu=function(t){return this.backendEngine.executeKernel("Selu",{inputs:{x:t}})},t.prototype.leakyRelu=function(t,e){return void 0===e&&(e=.2),this.backendEngine.executeKernel("LeakyRelu",{inputs:{x:t},args:{alpha:e}})},t.prototype.prelu=function(t,e){return this.backendEngine.executeKernel("PReLU",{inputs:{x:t,alpha:e}})},t.prototype.preluDer=function(t,e){return this.backendEngine.executeKernel("PReLUDer",{inputs:{x:t,alpha:e}})},t.prototype.sigmoid=function(t){return this.backendEngine.executeKernel("Sigmoid",{inputs:{x:t}})},t.prototype.sin=function(t){return this.backendEngine.executeKernel("Sin",{inputs:{x:t}})},t.prototype.cos=function(t){return this.backendEngine.executeKernel("Cos",{inputs:{x:t}})},t.prototype.tan=function(t){return this.backendEngine.executeKernel("Tan",{inputs:{x:t}})},t.prototype.asin=function(t){return this.backendEngine.executeKernel("Asin",{inputs:{x:t}})},t.prototype.acos=function(t){return this.backendEngine.executeKernel("Acos",{inputs:{x:t}})},t.prototype.atan=function(t){return this.backendEngine.executeKernel("Atan",{inputs:{x:t}})},t.prototype.sinh=function(t){return this.backendEngine.executeKernel("Sinh",{inputs:{x:t}})},t.prototype.cosh=function(t){return this.backendEngine.executeKernel("Cosh",{inputs:{x:t}})},t.prototype.tanh=function(t){return this.backendEngine.executeKernel("Tanh",{inputs:{x:t}})},t.prototype.step=function(t,e){return void 0===e&&(e=0),this.backendEngine.executeKernel("Step",{inputs:{x:t},args:{alpha:e}})},t.prototype.scaledArrayAdd=function(t,e,n,r){var a=this;return o.assert(1===t.size,"Error in scaledArrayAdd: first argument must rank 0, but got  rank "+t.rank+"."),o.assert(1===n.size,"Error in scaledArrayAdd: third argument must be rank 0, but got NDArray of rank "+n.rank+"."),o.assertShapesMatch(e.shape,r.shape,"Error in scaledArrayAdd: "),this.executeOp("scaledArrayAdd",function(){return a.scope(function(){return a.add(a.multiply(t,e),a.multiply(n,r))})})},t.prototype.scalarTimesArray=function(t,e){return o.assert(1===t.size,"Error in arrayDividedByScalar: first argument must be rank 0, but got rank "+t.rank+"."),this.multiply(t,e)},t.prototype.elementWiseMulBroadcast=function(t,e){return o.assert(2===t.rank,"Error in elementWiseMulBroadcast: first argument must be rank 2, but got rank "+t.rank+"."),o.assert(2===e.rank,"Error in elementWiseMulBroadcast: second argument must be rank 2, but got rank "+e.rank+"."),this.multiply(t,e)},t.prototype.conv1d=function(t,e,n,r,a){var i=this,s=t,u=!1;2===t.rank&&(u=!0,s=t.as3D(1,t.shape[0],t.shape[1])),o.assert(3===s.rank,"Error in conv1d: input must be rank 3, but got rank "+s.rank+"."),o.assert(3===e.rank,"Error in conv1d: filter must be rank 3, but got rank "+e.rank+"."),null!=n&&o.assert(1===n.rank,"Error in conv1d: bias must be rank 1, but got rank "+n.rank+"."),o.assert(s.shape[2]===e.shape[1],"Error in conv1d: depth of input ("+s.shape[2]+") must match  input depth for filter "+e.shape[1]+".");var c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),p=s.as4D(s.shape[0],1,s.shape[1],s.shape[2]),h=[1,r];return this.executeOp("Conv1D",function(){var t=i.conv2d(p,c,n,h,a);return u?t.as2D(t.shape[2],t.shape[3]):t.as3D(t.shape[0],t.shape[2],t.shape[3])})},t.prototype.conv2d=function(t,e,n,r,a){var i=this,s=t,u=!1;3===t.rank&&(u=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),o.assert(4===s.rank,"Error in conv2d: input must be rank 4, but got rank "+s.rank+"."),o.assert(4===e.rank,"Error in conv2d: filter must be rank 4, but got rank "+e.rank+"."),null!=n&&o.assert(1===n.rank,"Error in conv2d: bias must be rank 1, but got rank "+n.rank+"."),o.assert(s.shape[3]===e.shape[2],"Error in conv2d: depth of input ("+s.shape[3]+") must match  input depth for filter "+e.shape[2]+".");var c=p.computeConv2DInfo(s.shape,e.shape,r,a);return this.executeOp("Conv2D",function(){var t=i.backendEngine.executeKernel("Conv2D",{inputs:{x:s,filter:e,bias:n},args:{convInfo:c}});return u?t.as3D(t.shape[1],t.shape[2],t.shape[3]):t})},t.prototype.conv2dDerInput=function(t,e,n,r,a){var i=this;o.assert(t.length===e.rank,"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match");var s=t,u=e,c=!1;3===e.rank&&(c=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,t[0],t[1],t[2]]);var h=s[3],l=u.shape[3];o.assert(4===s.length,"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."),o.assert(4===u.rank,"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank),o.assert(4===n.rank,"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank),o.assert(h===n.shape[2],"Error in conv2dDerInput: depth of input ("+h+") must match input depth for filter "+n.shape[2]+"."),o.assert(l===n.shape[3],"Error in conv2dDerInput: depth of output ("+l+") mustmatch output depth for filter "+n.shape[3]+".");var f=p.computeConv2DInfo(s,n.shape,r,a);return this.executeOp("conv2dDerInput",function(){var t=i.backendEngine.executeKernel("Conv2DDerInput",{inputs:{dy:u,filter:n},args:{convInfo:f}});return c?t.as3D(t.shape[1],t.shape[2],t.shape[3]):t})},t.prototype.conv2dDerBias=function(t){var e=t;return 3===t.rank&&(e=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),this.backendEngine.executeKernel("Conv2DDerBias",{inputs:{dy:e}})},t.prototype.conv2dDerFilter=function(t,e,n,r,a){var i=t;3===t.rank&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=e;3===s.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),o.assert(4===i.rank,"Error in conv2dDerFilter: input must be rank 4, but got shape "+i.shape+"."),o.assert(4===s.rank,"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."),o.assert(4===n.length,"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."),o.assert(i.shape[3]===n[2],"Error in conv2dDerFilter: depth of input "+i.shape[3]+") must match input depth in filter ("+n[2]+"."),o.assert(s.shape[3]===n[3],"Error in conv2dDerFilter: depth of dy ("+s.shape[3]+") must match output depth for filter ("+n[3]+").");var u=p.computeConv2DInfo(i.shape,n,r,a);return this.backendEngine.executeKernel("Conv2DDerFilter",{inputs:{x:i,dy:s},args:{convInfo:u}})},t.prototype.conv2dTranspose=function(t,e,n,r,o){return this.conv2dDerInput(n,t,e,r,o)},t.prototype.depthwiseConv2D=function(t,e,n,r,a){var i=this;void 0===a&&(a=[1,1]);var s=t,u=!1;3===t.rank&&(u=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),o.assert(4===s.rank,"Error in depthwiseConv2D: input must be rank 4, but got rank "+s.rank+"."),o.assert(4===e.rank,"Error in depthwiseConv2D: filter must be rank 4, but got rank "+e.rank+"."),o.assert(s.shape[3]===e.shape[2],"Error in depthwiseConv2D: number of input channels ("+s.shape[3]+") must match the inChannels dimension in filter "+e.shape[2]+".");var c=function(t){return"number"==typeof t?[t,t]:t}(a=a||[1,1]),h=c[0],l=c[1];o.assert(1===h&&1===l,"Error in depthwiseConv2D: rates greater than 1 are not yet supported. Got rates '"+a+"'");var f=p.computeConv2DInfo(s.shape,e.shape,n,r,!0);return this.executeOp("depthwiseConv2D",function(){var t=i.backendEngine.executeKernel("DepthwiseConv2D",{inputs:{x:s,filter:e},args:{convInfo:f}});return u?t.as3D(t.shape[1],t.shape[2],t.shape[3]):t})},t.prototype.maxPool=function(t,e,n,r){var a=this,i=t,s=!1;3===t.rank&&(s=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),o.assert(4===i.rank,"Error in maxPool: input must be rank 4 but got rank "+i.rank+".");var u=p.computePool2DInfo(i.shape,e,n,r);return this.executeOp("maxPool",function(){var t=a.backendEngine.executeKernel("MaxPool",{inputs:{x:i},args:{convInfo:u}});return s?t.as3D(t.shape[1],t.shape[2],t.shape[3]):t})},t.prototype.maxPoolBackprop=function(t,e,n,r,a){var i=this;o.assert(e.rank===t.rank,"Rank of input ("+e.rank+") does not match rank of dy ("+t.rank+")");var s=e,u=t,c=!1;3===e.rank&&(c=!0,s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),o.assert(4===u.rank,"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."),o.assert(4===s.rank,"Error in maxPoolBackprop: input must be rank 4 but got rank "+s.rank+".");var h=p.computePool2DInfo(s.shape,n,r,a);return this.executeOp("maxPoolBackprop",function(){var t=i.backendEngine.executeKernel("MaxPoolBackprop",{inputs:{dy:u,x:s},args:{convInfo:h}});return c?t.as3D(t.shape[1],t.shape[2],t.shape[3]):t})},t.prototype.minPool=function(t,e,n,r){var a=this,i=t,s=!1;3===t.rank&&(s=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),o.assert(4===i.rank,"Error in minPool: x must be rank 4 but got rank "+i.rank+".");var u=p.computePool2DInfo(i.shape,e,n,r);return this.executeOp("minPool",function(){var t=a.backendEngine.executeKernel("MinPool",{inputs:{x:i},args:{convInfo:u}});return s?t.as3D(t.shape[1],t.shape[2],t.shape[3]):t})},t.prototype.avgPool=function(t,e,n,r){var a=this,i=t,s=!1;3===t.rank&&(s=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),o.assert(4===i.rank,"Error in avgPool: x must be rank 4 but got rank "+i.rank+".");var u=p.computePool2DInfo(i.shape,e,n,r);return this.executeOp("avgPool",function(){var t=a.backendEngine.executeKernel("AvgPool",{inputs:{x:i},args:{convInfo:u}});return s?t.as3D(t.shape[1],t.shape[2],t.shape[3]):t})},t.prototype.resizeBilinear3D=function(t,e,n){return void 0===n&&(n=!1),o.assert(3===t.rank,"Error in resizeBilinear3D: x must be rank 3 but got rank "+t.rank+"."),o.assert(2===e.length,"Error in resizeBilinear3D: new shape must 2D, but got shape "+e+"."),this.backendEngine.executeKernel("ResizeBilinear3D",{inputs:{x:t},args:{newShape2D:e,alignCorners:n}})},t.prototype.batchNormalization2D=function(t,e,n,r,a,i){return void 0===r&&(r=.001),o.assert(2===t.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+t.rank+"."),o.assert(2===e.rank||1===e.rank,"Error in batchNormalization2D: mean must be rank 2 or rank 1 but got rank "+e.rank+"."),o.assert(2===n.rank||1===n.rank,"Error in batchNormalization2D: variance must be rank 2 or rank 1 but got rank "+n.rank+"."),null!=a&&o.assert(2===a.rank||1===a.rank,"Error in batchNormalization2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."),null!=i&&o.assert(2===i.rank||1===i.rank,"Error in batchNormalization2D: offset must be rank 2 or rank 1 but got rank "+i.rank+"."),this.backendEngine.executeKernel("BatchNorm2D",{inputs:{x:t,mean:e,variance:n,scale:a,offset:i},args:{varianceEpsilon:r}})},t.prototype.batchNormalization3D=function(t,e,n,r,a,i){return void 0===r&&(r=.001),o.assert(3===t.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+t.rank+"."),o.assert(3===e.rank||1===e.rank,"Error in batchNormalization3D: mean must be rank 3 or rank 1 but got rank "+e.rank+"."),o.assert(3===n.rank||1===n.rank,"Error in batchNormalization3D: variance must be rank 3 or rank 1 but got rank "+n.rank+"."),null!=a&&o.assert(3===a.rank||1===a.rank,"Error in batchNormalization3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."),null!=i&&o.assert(3===i.rank||1===i.rank,"Error in batchNormalization3D: offset must be rank 3 or rank 1 but got rank "+i.rank+"."),this.backendEngine.executeKernel("BatchNorm3D",{inputs:{x:t,mean:e,variance:n,scale:a,offset:i},args:{varianceEpsilon:r}})},t.prototype.multiRNNCell=function(t,e,n,r){for(var o=this.scope(function(){for(var o=e,a=[],i=0;i<t.length;i++){var s=t[i](o,n[i],r[i]);a.push(s[0]),a.push(s[1]),o=s[1]}return a}),a=[],i=[],s=0;s<o.length;s+=2)a.push(o[s]),i.push(o[s+1]);return[a,i]},t.prototype.basicLSTMCell=function(t,e,n,r,o,a){var i=this,s=this.scope(function(){var s=i.concat2D(r,a,1),u=i.matMul(s,e),c=i.add(u,n),p=c.shape[0],h=c.shape[1]/4,l=[p,h],f=i.slice2D(c,[0,0],l),d=i.slice2D(c,[0,h],l),v=i.slice2D(c,[0,2*h],l),y=i.slice2D(c,[0,3*h],l),m=i.addStrict(i.multiplyStrict(o,i.sigmoid(i.scalarPlusArray(t,v))),i.multiplyStrict(i.sigmoid(f),i.tanh(d)));return[m,i.multiplyStrict(i.tanh(m),i.sigmoid(y))]});return[s[0],s[1]]},t.prototype.multinomial=function(t,e,n){var r=this,o=t.size;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(t.rank>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+t.rank);n=n||Math.random();var a=t.rank;return 1===t.rank&&(t=t.as2D(1,-1)),this.executeOp("multinomial",function(){var o=r.backendEngine.executeKernel("Multinomial",{inputs:{probs:t},args:{numSamples:e,seed:n}});return 1===a?o.as1D():o})},t.prototype.oneHot=function(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);return this.backendEngine.executeKernel("OneHot",{inputs:{indices:t},args:{depth:e,onValue:n,offValue:r}})},t.prototype.moments=function(t,e,n){var r=this;void 0===e&&(e=null),void 0===n&&(n=!1);var o=a.parseAxisParam(e,t.shape);return this.scope(function(){var e=r.mean(t,o,n),i=e.shape;n||(i=a.expandShapeToKeepDim(e.shape,o));var s=r.square(r.subtract(t,e.reshape(i)));return{mean:e,variance:r.mean(s,o,n)}})},t.prototype.norm=function(t,e,n,r){var o=this;return void 0===e&&(e="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1),this.scope(function(){var i=o.normInternal(t,e,n),s=i.shape;if(r){var u=a.parseAxisParam(n,t.shape);s=a.expandShapeToKeepDim(i.shape,u)}return i.reshape(s)})},t.prototype.normInternal=function(t,e,n){if(void 0===n&&(n=null),0===t.rank)return this.abs(t);if(1!==t.rank&&null===n)return this.normInternal(t.reshape([-1]),e,n);if(1===t.rank||"number"==typeof n||n instanceof Array&&1===n.length){if(1===e)return this.sum(this.abs(t),n);if(e===1/0)return this.max(this.abs(t),n);if(e===-1/0)return this.min(this.abs(t),n);if("euclidean"===e||2===e)return this.sqrt(this.sum(this.pow(this.abs(t),h.Scalar.new(2,"int32")),n));throw new Error("Error in norm: invalid ord value: "+e)}if(n instanceof Array&&2===n.length){if(1===e)return this.max(this.sum(this.abs(t),n[0]),n[1]-1);if(e===1/0)return this.max(this.sum(this.abs(t),n[1]),n[0]);if(e===-1/0)return this.min(this.sum(this.abs(t),n[1]),n[0]);if("fro"===e||"euclidean"===e)return this.sqrt(this.sum(this.pow(t,h.Scalar.new(2,"int32")),n));throw new Error("Error in norm: invalid ord value: "+e)}throw new Error("Error in norm: invalid axis: "+n)},t.prototype.gradients=function(t,e){var n=e instanceof h.NDArray?null:Object.keys(e),r=o.flattenNameArrayMap(e,n),a=this.backendEngine.gradients(t,r,!1);return e instanceof h.NDArray?a[0]:o.unflattenToNameArrayMap(n,a)},t.prototype.valueAndGradients=function(t,e){var n,r=e instanceof h.NDArray?null:Object.keys(e),a=o.flattenNameArrayMap(e,r),i=this.backendEngine.gradients(t,a,!0);return n=e instanceof h.NDArray?i.gradients[0]:o.unflattenToNameArrayMap(r,i.gradients),{value:i.value,gradients:n}},t.prototype.disposeData=function(t){this.registeredArrays.has(t)&&(this.registeredArrays.delete(t),this.backend.disposeData(t))},t}();e.NDArrayMath=f},"1S1d":function(t,e,n){"use strict";function r(t,e){return t*e}function o(t,e){if(t%e!=0)throw new Error("unpackedSize ("+t+") must be a multiple of "+e);return t/e}function a(t,e){return[Math.ceil(e/2),Math.ceil(t/2)]}function i(t,e){var n=a(t,e);return n[0]*n[1]*4}Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.DEFAULT=0]="DEFAULT",t[t.RGBA_COLOR=1]="RGBA_COLOR"}(e.TextureType||(e.TextureType={})),e.getUnpackedMatrixTextureShapeWidthHeight=function(t,e){return[e,t]},e.getUnpackedArraySizeFromMatrixSize=r,e.getColorMatrixTextureShapeWidthHeight=function(t,e){return[4*e,t]},e.getMatrixSizeFromUnpackedArraySize=o,e.encodeMatrixToUnpackedArray=function(t,e,n){var o=r(t.length,n);if(e.length<o)throw new Error("unpackedArray length ("+e.length+") must be >= "+o);for(var a=0,i=0;i<t.length;++i)e[a]=t[i],a+=n},e.FLOAT_MAX=2e4,e.FLOAT_MIN=-e.FLOAT_MAX;var s=(e.FLOAT_MAX-e.FLOAT_MIN)/255,u=[1,1/255,1/65025,1/16581375],c=[1,255,65025];e.BYTE_NAN_VALUE=0,e.encodeFloatArray=function(t){for(var n=new Uint8Array(4*t.length),r=function(r){var o=t[r/4];if(isNaN(o))return n[r]=e.BYTE_NAN_VALUE,n[r+1]=e.BYTE_NAN_VALUE,n[r+2]=e.BYTE_NAN_VALUE,n[r+3]=e.BYTE_NAN_VALUE,"continue";var a=(o-e.FLOAT_MIN)/s,i=c.map(function(t){return t*a}).map(function(t){return Math.floor(t%1*255)});n[r]=Math.floor(a),n[r+1]=i[0],n[r+2]=i[1],n[r+3]=i[2]},o=0;o<n.length;o+=4)r(o);return n},e.decodeToFloatArray=function(t){for(var n=new Float32Array(t.length/4),r=function(r){if(t[r]===e.BYTE_NAN_VALUE&&t[r+1]===e.BYTE_NAN_VALUE&&t[r+2]===e.BYTE_NAN_VALUE&&t[r+3]===e.BYTE_NAN_VALUE)return n[r/4]=NaN,"continue";var o=0;u.forEach(function(e,n){o+=e*t[r+n]});var a=o*s+e.FLOAT_MIN;n[r/4]=a},o=0;o<t.length;o+=4)r(o);return n},e.decodeMatrixFromUnpackedArray=function(t,e,n){var r=o(t.length,n);if(e.length<r)throw new Error("matrix length ("+e.length+") must be >= "+r);for(var a=0,i=0;i<t.length;i+=n)e[a++]=t[i]},e.decodeMatrixFromUnpackedColorRGBAArray=function(t,e,n){var r=t.length*n/4;if(e.length<r)throw new Error("matrix length ("+e.length+") must be >= "+r);for(var o=0,a=0;a<t.length;a+=4)for(var i=0;i<n;i++)e[o++]=t[a+i]},e.getPackedMatrixTextureShapeWidthHeight=a,e.getPackedRGBAArraySizeFromMatrixShape=i,e.encodeMatrixToPackedRGBA=function(t,e,n,r){var o=i(e,n);if(r.length<o)throw new Error("packedRGBA length ("+r.length+") must be >= "+o);for(var s=a(e,n),u=s[0],c=s[1],p=n%2==1,h=e%2==1,l=Math.floor(n/2),f=Math.floor(e/2),d=p?4:0,v=n,y=0,m=0;m<f;++m){for(var g=2*m*n,x=0;x<l;++x){var b=g+2*x;r[y]=t[b],r[y+1]=t[b+1],r[y+2]=t[b+v],r[y+3]=t[b+v+1],y+=4}y+=d}if(p){b=n-1,y=4*(u-1);var w=2*n;for(d=4*u,m=0;m<f;++m)r[y]=t[b],r[y+2]=t[b+n],b+=w,y+=d}if(h)for(b=(e-1)*n,y=(c-1)*u*4,x=0;x<l;++x)r[y++]=t[b++],r[y++]=t[b++],y+=2;return p&&h&&(r[r.length-4]=t[t.length-1]),r},e.decodeMatrixFromPackedRGBA=function(t,e,n,r){var o=e*n;if(o<r.length)throw new Error("matrix length ("+r.length+") must be >= "+o);for(var i=n%2==1,s=e%2==1,u=Math.floor(n/2),c=Math.floor(e/2),p=a(e,n),h=p[0],l=p[1],f=i?4:0,d=n+(i?1:0),v=0,y=0,m=n,g=0;g<c;++g){for(var x=0;x<u;++x)r[y++]=t[v++],r[y++]=t[v++],r[m++]=t[v++],r[m++]=t[v++];v+=f,y+=d,m+=d}if(i){v=4*(h-1);var b=n-1;for(f=4*h,d=2*n,g=0;g<c;++g)r[b]=t[v],r[b+n]=t[v+2],v+=f,b+=d}if(s)for(v=(l-1)*h*4,b=(e-1)*n,x=0;x<u;++x)r[b++]=t[v++],r[b++]=t[v++],v+=2;return i&&s&&(r[r.length-1]=t[t.length-4]),r}},"2HCx":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("lABf"),o=n("yNpf"),a=n("Rx9u"),i=n("QtZe"),s=n("+tPX"),u=n("da8W"),c=n("jnen"),p=n("jLs2"),h=n("qfl5"),l=n("cJi8"),f=n("XGXz"),d=n("LUqz"),v=n("l7u8"),y=n("ac8B"),m=n("HHSQ"),g=n("QLAB"),x=n("mJJz"),b=n("Tu3E"),w=n("f75v"),E=n("CsGD");e.emitFromGraphNodes=function(t){var e=[];return t.forEach(function(t){return Array.prototype.push.apply(e,function(t){if(t instanceof r.ReshapeNode)return[new b.Reshape(t.inputs[r.ReshapeNode.X],t.output)];if(t instanceof r.MatMulNode){var e=t.inputs[r.MatMulNode.X1],n=t.inputs[r.MatMulNode.X2];return[new y.MatMul(e,n,t.output)]}if(t instanceof r.Convolution2DNode){var A=t.inputs[r.Convolution2DNode.W],T=t.inputs[r.Convolution2DNode.X],S=t.inputs[r.Convolution2DNode.B];return[new c.Convolution2D(A,T,S,t.output,t.fieldSize,t.outputDepth,t.stride,t.zeroPad)]}if(t instanceof r.MaxPoolNode){var T=t.inputs[r.MaxPoolNode.X];return[new m.MaxPool(T,t.output,t.fieldSize,t.stride,t.zeroPad)]}if(t instanceof r.ExpNode)return[new f.Exp(t.inputs[r.ExpNode.X],t.output)];if(t instanceof r.LogNode)return[new v.Log(t.inputs[r.LogNode.X],t.output)];if(t instanceof r.ReLUNode)return[new h.ReLU(t.inputs[r.ReLUNode.X],t.output)];if(t instanceof r.LeakyReLUNode)return[new h.LeakyReLU(t.inputs[r.LeakyReLUNode.X],t.output,t.alpha)];if(t instanceof r.PReLUNode)return[new h.PReLU(t.inputs[r.PReLUNode.X],t.inputs[r.PReLUNode.ALPHA],t.output)];if(t instanceof r.EluNode)return[new h.Elu(t.inputs[r.EluNode.X],t.output)];if(t instanceof r.TanHNode)return[new h.TanH(t.inputs[r.TanHNode.X],t.output)];if(t instanceof r.SigmoidNode)return[new h.Sigmoid(t.inputs[r.SigmoidNode.X],t.output)];if(t instanceof r.SoftmaxCrossEntropyCostNode){var T=t.inputs[r.SoftmaxCrossEntropyCostNode.X],_=t.inputs[r.SoftmaxCrossEntropyCostNode.TARGET];return[new w.SoftmaxCrossEntropyCost(T,_,t.output)]}if(t instanceof r.SoftmaxNode)return[new w.Softmax(t.inputs[r.SoftmaxNode.X],t.output)];if(t instanceof r.MeanSquaredCostNode){var M=t.inputs[r.MeanSquaredCostNode.LABEL],N=t.inputs[r.MeanSquaredCostNode.PREDICTION];return[new l.MeanSquaredCost(M,N,t.output)]}if(t instanceof r.ArgMaxEqualsNode)return[new s.ArgMaxEquals(t.inputs[r.ArgMaxEqualsNode.X1],t.inputs[r.ArgMaxEqualsNode.X2],t.output)];if(t instanceof r.ArgMaxNode)return[new i.ArgMax(t.x,t.output)];if(t instanceof r.FusedLinearCombinationNode)return[new d.LinearCombination(t.inputs[r.FusedLinearCombinationNode.T1],t.inputs[r.FusedLinearCombinationNode.T2],t.inputs[r.FusedLinearCombinationNode.C1],t.inputs[r.FusedLinearCombinationNode.C2],t.output)];if(t instanceof r.Concat3DNode)return[new u.Concat3D(t.inputs[r.Concat3DNode.X1],t.inputs[r.Concat3DNode.X2],t.axis,t.output)];if(t instanceof r.SquareNode)return[new h.Square(t.inputs[r.SquareNode.X],t.output)];if(t instanceof r.AddNode)return[new a.Add(t.inputs[r.AddNode.T1],t.inputs[r.AddNode.T2],t.output)];if(t instanceof r.SubtractNode)return[new E.Subtract(t.inputs[r.SubtractNode.T1],t.inputs[r.SubtractNode.T2],t.output)];if(t instanceof r.MultiplyNode)return[new g.Multiply(t.inputs[r.MultiplyNode.T1],t.inputs[r.MultiplyNode.T2],t.output)];if(t instanceof r.DivideNode)return[new p.Divide(t.inputs[r.DivideNode.T1],t.inputs[r.DivideNode.T2],t.output)];if(t instanceof r.ReduceSumNode)return[new x.ReduceSum(t.inputs[r.ReduceSumNode.X],t.output)];if(o.isInputNode(t))return[];throw Error("Unsupported node type: "+t.constructor.name)}(t))}),e}},"2KxR":function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},"2d20":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){function n(n){return function(i){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],o=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,i])}}var r,o,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(e,"__esModule",{value:!0});var i=n("fpai"),s=n("jMY8"),u=n("eYNA"),c=n("02A5"),p=n("BozM"),h=n("h6eJ"),l=n("KCc1"),f=n("KCc1"),d=n("jSF7"),v=n("7pDe"),y=n("M1+U"),m=n("M1+U"),g=n("oGZu"),x=n("KOOB"),b=n("QwX8"),w=n("mDrY"),E=n("i0QU"),A=n("Di7A"),T=n("hbAG"),S=n("t6kj"),_=n("LbFW"),M=n("v2Ar"),N=n("9V2y"),k=n("XZBy"),C=n("Y78X"),O=n("5vEO"),R=n("hkhl"),D=n("mCdk"),P=n("SumV"),I=n("1S1d"),F=n("rmfs"),L=n("M0xE"),z=n("jySH"),B=n("Emi9"),U=n("Emi9"),V=n("WQ8k"),G=function(){function t(t,e){if(void 0===e&&(e=!0),this.gpgpu=t,this.delayedStorage=e,this.texData={},this.binaryCache={},i.ENV.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");if(null==t){var n=_.createWebGLContext();this.gpgpu=new T.GPGPUContext(n),this.gpgpuCreatedLocally=!0}else this.gpgpuCreatedLocally=!1;this.textureManager=new F.TextureManager(this.gpgpu)}return t.prototype.writePixels=function(t,e,n){var r=[e.height,e.width],o=t in this.texData?this.texData[t].texture:this.textureManager.acquireTexture(r);this.texData[t]={values:null,texture:o,textureType:I.TextureType.RGBA_COLOR,texShape:r,numChannels:n,dtype:"int32"},this.gpgpu.uploadPixelDataToTexture(o,e)},t.prototype.write=function(t,e,n,r){if(null==e)throw new Error("MathBackendWebGL.write(): values can not be null");var o=this.getOrMakeTexData(t,r,n),a=o.texture,i=o.texShape;null!=a&&(this.textureManager.releaseTexture(a,i),this.texData[t].texture=null),this.texData[t].values=e,this.delayedStorage||this.uploadToGPU(t)},t.prototype.getOrMakeTexData=function(t,e,n){if(!(t in this.texData)){var r=V.getTextureShapeFromLogicalShape(this.gpgpu.gl,e),o=I.TextureType.DEFAULT;this.texData[t]={texture:null,values:null,textureType:o,texShape:r,dtype:n}}return this.texData[t]},t.prototype.readSync=function(t){this.throwIfNoData(t);var e=this.texData[t],n=e.texture,r=e.values,o=e.textureType,a=e.texShape,i=e.numChannels;if(null!=r)return this.cacheOnCPU(t),r;var s;return s=o===I.TextureType.DEFAULT?this.gpgpu.downloadMatrixFromTexture(n,a[0],a[1]):this.gpgpu.downloadMatrixFromRGBAColorTexture(n,a[0],a[1],i),this.cacheOnCPU(t,s),this.texData[t].values},t.prototype.read=function(t){return o(this,void 0,void 0,function(){var e,n,r,o,s,u;return a(this,function(a){switch(a.label){case 0:return this.throwIfNoData(t),e=this.texData[t],n=e.texture,r=e.values,o=e.textureType,s=e.texShape,null!=r?(this.cacheOnCPU(t),[2,r]):i.ENV.get("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED")&&o===I.TextureType.DEFAULT?[4,this.gpgpu.downloadMatrixFromTextureAsync(n,s[0],s[1])]:[3,2];case 1:return u=a.sent(),this.cacheOnCPU(t,u),[2,this.texData[t].values];case 2:return i.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_ENABLED")?[4,this.gpgpu.runQuery(function(){})]:[2,this.readSync(t)];case 3:return a.sent(),[2,this.readSync(t)]}})})},t.prototype.time=function(t){return o(this,void 0,void 0,function(){var e,n;return a(this,function(r){switch(r.label){case 0:return i.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_ENABLED")?[3,2]:(e=performance.now(),n=t(),[4,n.data()]);case 1:return r.sent(),[2,performance.now()-e];case 2:return[2,this.gpgpu.runQuery(t)]}})})},t.prototype.disposeData=function(t){if(t in this.texData){var e=this.texData[t],n=e.texture,r=e.texShape;null!=n&&this.textureManager.releaseTexture(n,r),delete this.texData[t]}},t.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData[t].texture},t.prototype.getTextureData=function(t){return this.uploadToGPU(t),this.texData[t]},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.clone=function(t){this.throwIfNoData(t.id);var e=this.texData[t.id].texShape,n=t.as2D(e[0],e[1]),r=this.makeOutputArray(e,t.dtype);return this.copy2D(n,[0,0],e,r,[0,0],e),r.reshape(t.shape)},t.prototype.slice1D=function(t,e,n){var r=new P.SliceProgram([n]),o=r.getCustomSetupFunc([e]);return this.compileAndRun(r,[t],null,o)},t.prototype.slice2D=function(t,e,n){var r=new P.SliceProgram(n),o=r.getCustomSetupFunc(e);return this.compileAndRun(r,[t],null,o)},t.prototype.slice3D=function(t,e,n){var r=new P.SliceProgram(n),o=r.getCustomSetupFunc(e);return this.compileAndRun(r,[t],null,o)},t.prototype.slice4D=function(t,e,n){var r=new P.SliceProgram(n),o=r.getCustomSetupFunc(e);return this.compileAndRun(r,[t],null,o)},t.prototype.copy2D=function(t,e,n,r,o,a){var i=new A.Copy2DProgram(n[1],a[1]),s=i.getCustomSetupFunc(e,o,a);this.compileAndRun(i,[t],r,s)},t.prototype.concat1D=function(t,e){var n=new x.ConcatProgram(t.shape,e.shape,0);return this.compileAndRun(n,[t,e])},t.prototype.concat2D=function(t,e,n){var r=new x.ConcatProgram(t.shape,e.shape,n);return this.compileAndRun(r,[t,e])},t.prototype.concat3D=function(t,e,n){var r=new x.ConcatProgram(t.shape,e.shape,n);return this.compileAndRun(r,[t,e])},t.prototype.concat4D=function(t,e,n){var r=new x.ConcatProgram(t.shape,e.shape,n);return this.compileAndRun(r,[t,e])},t.prototype.neg=function(t){var e=new U.UnaryOpProgram(t.shape,B.NEG);return this.compileAndRun(e,[t])},t.prototype.matMul=function(t,e,n,r){var o=new N.MatMulProgram(t.shape,e.shape,n,r);return this.compileAndRun(o,[t,e])},t.prototype.multiply=function(t,e){var n=new m.BinaryOpProgram(y.MUL,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,l.upcastType(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.batchNormalization2D=function(t,e,n,r,o,a){var i=[t,e,n],s=null;null!=a&&(s=a.shape,i.push(a));var u=null;null!=o&&(u=o.shape,i.push(o));var c=new v.BatchNormProgram(t.shape,e.shape,n.shape,s,u,r);return this.compileAndRun(c,i)},t.prototype.batchNormalization3D=function(t,e,n,r,o,a){var i=[t,e,n],s=null;null!=a&&(s=a.shape,i.push(a));var u=null;null!=o&&(u=o.shape,i.push(o));var c=new v.BatchNormProgram(t.shape,e.shape,n.shape,s,u,r);return this.compileAndRun(c,i)},t.prototype.tile=function(t,e){var n=new L.TileProgram(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.transpose=function(t,e){var n=new z.TransposeProgram(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.reduce=function(t,e,n){var r=t.shape[0],o=t.shape[1],a={windowSize:h.computeOptimalWindowSize(o),inSize:o,batchSize:r},i=new R.ReduceProgram(a,e),s=i.outputShape,u=s[0],c=s[1],p=this.makeOutputArray(i.outputShape,n).as2D(u,c);return this.compileAndRun(i,[t],p),1===p.shape[1]?p:this.reduce(p,e,n)},t.prototype.argReduce=function(t,e,n){void 0===n&&(n=null);var r=t.shape[0],o=t.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var a={windowSize:h.computeOptimalWindowSize(o),inSize:o,batchSize:r},i=new d.ArgMinMaxProgram(a,e,null==n),s=i.outputShape,u=s[0],c=s[1],p=this.makeOutputArray(i.outputShape,"int32").as2D(u,c),l=[t];return null!=n&&l.push(n),this.compileAndRun(i,l,p),1===p.shape[1]?p:this.argReduce(t,e,p)},t.prototype.sum=function(t,e){u.assertAxesAreInnerMostDims("sum",e,t.rank);var n=u.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=s.sizeFromShape(o),i=t.as2D(-1,a),c=f.SumTypesMap[t.dtype];return this.reduce(i,"sum",c).reshape(r)},t.prototype.argMin=function(t,e){u.assertAxesAreInnerMostDims("argMin",e,t.rank);var n=u.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=s.sizeFromShape(o),i=t.as2D(-1,a);return this.argReduce(i,"min").reshape(r)},t.prototype.argMax=function(t,e){u.assertAxesAreInnerMostDims("argMax",e,t.rank);var n=u.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=s.sizeFromShape(o),i=t.as2D(-1,a);return this.argReduce(i,"max").reshape(r)},t.prototype.equal=function(t,e){var n=new m.BinaryOpProgram(y.EQUAL,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.topKValues=function(t,e){throw new Error("topKValues GPU not yet implemented!")},t.prototype.topKIndices=function(t,e){throw new Error("topKIndices GPU not yet implemented!")},t.prototype.min=function(t,e){u.assertAxesAreInnerMostDims("min",e,t.rank);var n=u.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=s.sizeFromShape(o),i=t.as2D(-1,a);return this.reduce(i,"min",i.dtype).reshape(r)},t.prototype.max=function(t,e){u.assertAxesAreInnerMostDims("max",e,t.rank);var n=u.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=s.sizeFromShape(o),i=t.as2D(-1,a);return this.reduce(i,"max",i.dtype).reshape(r)},t.prototype.divide=function(t,e){var n=new m.BinaryOpProgram(y.DIV,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[t,e],r)},t.prototype.add=function(t,e){var n=new m.BinaryOpProgram(y.ADD,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,l.upcastType(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.subtract=function(t,e){var n=new m.BinaryOpProgram(y.SUB,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,l.upcastType(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.pow=function(t,e){var n=new m.BinaryOpProgram(y.POW,t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.ceil=function(t){var e=new U.UnaryOpProgram(t.shape,B.CEIL);return this.compileAndRun(e,[t])},t.prototype.floor=function(t){var e=new U.UnaryOpProgram(t.shape,B.FLOOR);return this.compileAndRun(e,[t])},t.prototype.exp=function(t){var e=new U.UnaryOpProgram(t.shape,B.EXP);return this.compileAndRun(e,[t])},t.prototype.log=function(t){var e=new U.UnaryOpProgram(t.shape,B.LOG);return this.compileAndRun(e,[t])},t.prototype.sqrt=function(t){var e=new U.UnaryOpProgram(t.shape,B.SQRT);return this.compileAndRun(e,[t])},t.prototype.square=function(t){var e=new U.UnaryOpProgram(t.shape,B.SQUARE);return this.compileAndRun(e,[t])},t.prototype.relu=function(t){var e=new U.UnaryOpProgram(t.shape,B.RELU);return this.compileAndRun(e,[t])},t.prototype.elu=function(t){var e=new U.UnaryOpProgram(t.shape,B.ELU);return this.compileAndRun(e,[t])},t.prototype.eluDer=function(t){var e=new U.UnaryOpProgram(t.shape,B.ELU_DER);return this.compileAndRun(e,[t])},t.prototype.selu=function(t){var e=new U.UnaryOpProgram(t.shape,B.SELU);return this.compileAndRun(e,[t])},t.prototype.leakyRelu=function(t,e){var n=new U.UnaryOpProgram(t.shape,B.LEAKY_RELU(e));return this.compileAndRun(n,[t])},t.prototype.prelu=function(t,e){var n=new m.BinaryOpProgram(y.PRELU,t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.preluDer=function(t,e){var n=new m.BinaryOpProgram(y.PRELU_DER,t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.clip=function(t,e,n){var r=new g.ClipProgram(t.shape,e,n);return this.compileAndRun(r,[t])},t.prototype.abs=function(t){var e=new U.UnaryOpProgram(t.shape,B.ABS);return this.compileAndRun(e,[t])},t.prototype.sigmoid=function(t){var e=new U.UnaryOpProgram(t.shape,B.SIGMOID);return this.compileAndRun(e,[t])},t.prototype.sin=function(t){var e=new U.UnaryOpProgram(t.shape,B.SIN);return this.compileAndRun(e,[t])},t.prototype.cos=function(t){var e=new U.UnaryOpProgram(t.shape,B.COS);return this.compileAndRun(e,[t])},t.prototype.tan=function(t){var e=new U.UnaryOpProgram(t.shape,B.TAN);return this.compileAndRun(e,[t])},t.prototype.asin=function(t){var e=new U.UnaryOpProgram(t.shape,B.ASIN);return this.compileAndRun(e,[t])},t.prototype.acos=function(t){var e=new U.UnaryOpProgram(t.shape,B.ACOS);return this.compileAndRun(e,[t])},t.prototype.atan=function(t){var e=new U.UnaryOpProgram(t.shape,B.ATAN);return this.compileAndRun(e,[t])},t.prototype.sinh=function(t){var e=new U.UnaryOpProgram(t.shape,B.SINH);return this.compileAndRun(e,[t])},t.prototype.cosh=function(t){var e=new U.UnaryOpProgram(t.shape,B.COSH);return this.compileAndRun(e,[t])},t.prototype.tanh=function(t){var e=new U.UnaryOpProgram(t.shape,B.TANH);return this.compileAndRun(e,[t])},t.prototype.step=function(t,e){var n=new U.UnaryOpProgram(t.shape,B.STEP(e));return this.compileAndRun(n,[t])},t.prototype.conv2d=function(t,e,n,r){var o=new w.Conv2DProgram(r,null!=n),a=null!=n?[t,e,n]:[t,e];return this.compileAndRun(o,a)},t.prototype.conv2dDerInput=function(t,e,n){var r=new b.Conv2DDerInputProgram(n);return this.compileAndRun(r,[t,e])},t.prototype.conv2dDerFilter=function(t,e,n){var r=new b.Conv2DDerFilterProgram(n);return this.compileAndRun(r,[t,e])},t.prototype.conv2dDerBias=function(t){var e=new b.Conv2DDerBiasProgram(t.shape);return this.compileAndRun(e,[t])},t.prototype.depthwiseConv2D=function(t,e,n){var r=new E.DepthwiseConv2DProgram(n);return this.compileAndRun(r,[t,e])},t.prototype.maxPool=function(t,e){var n=new O.Pool2DProgram(e,"max",!1);return this.compileAndRun(n,[t])},t.prototype.minPool=function(t,e){var n=new O.Pool2DProgram(e,"min",!1);return this.compileAndRun(n,[t])},t.prototype.avgPool=function(t,e){var n=new O.Pool2DProgram(e,"avg",!1);return this.compileAndRun(n,[t])},t.prototype.maxPoolBackprop=function(t,e,n){var r=new O.Pool2DProgram(n,"max",!0),o=this.compileAndRun(r,[e]),a=new M.MaxPool2DBackpropProgram(n),i=this.compileAndRun(a,[t,o]);return o.dispose(),i},t.prototype.resizeBilinear3D=function(t,e,n){var r=new D.ResizeBilinear3DProgram(t.shape,e,n);return this.compileAndRun(r,[t])},t.prototype.multinomial=function(t,e,n){var r=t.shape[0],o=t.shape[1],a=new k.MultinomialProgram(r,o,e),i=this.makeOutputArray(a.outputShape,"int32"),s=a.getCustomSetupFunc(n);return this.compileAndRun(a,[t],i,s)},t.prototype.oneHot=function(t,e,n,r){var o=new C.OneHotProgram(t.size,e,n,r);return this.compileAndRun(o,[t])},t.prototype.makeOutputArray=function(t,e){return p.NDArray.make(t,{},e)},t.prototype.compileAndRun=function(t,e,n,r){var o=this;null==n&&(n=this.makeOutputArray(t.outputShape,e[0].dtype));var a=e.map(function(t){return o.uploadToGPU(t.id),{array:t,texData:o.texData[t.id]}});this.getOrMakeTexData(n.id,n.shape,n.dtype),this.uploadToGPU(n.id);var i={array:n,texData:this.texData[n.id]},s=S.makeShaderKey(t,a,i),u=this.getAndSaveBinary(s,function(){return S.compileProgram(o.gpgpu,t,a,i)});return S.runProgram(u,a,i,r),n},t.prototype.getAndSaveBinary=function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){for(var t in this.binaryCache)this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram);this.textureManager.dispose(),this.gpgpuCreatedLocally&&this.gpgpu.dispose()},t.prototype.throwIfNoData=function(t){if(!(t in this.texData))throw new Error("No data found for NDArray with id "+t+". Use dl.ENV.math instead of constructing your own NDArrayMath. If you need to construct your own math, make sure this array is allocated after the math construction")},t.prototype.uploadToGPU=function(t){this.throwIfNoData(t);var e=this.texData[t],n=e.texShape,r=e.values,o=e.texture,a=e.dtype;if(null==o){var i=this.textureManager.acquireTexture(n);this.texData[t].texture=i,null!=r&&this.gpgpu.uploadMatrixToTexture(i,n[0],n[1],function(t,e){if(t instanceof Float32Array)return t;for(var n=new Float32Array(t.length),r=0;r<n.length;r++){var o=t[r];n[r]=s.isValNaN(o,e)?NaN:o}return n}(r,a))}},t.prototype.cacheOnCPU=function(t,e){var n=this.delayedStorage,r=this.texData[t],o=r.texture,a=r.texShape,i=r.dtype;n&&null!=o&&(this.textureManager.releaseTexture(o,a),this.texData[t].texture=null),null!=e&&(this.texData[t].values=function(t,e){if("float32"===e)return t;if("int32"===e||"bool"===e){for(var n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r){var o=t[r];o=isNaN(o)?s.getNaN(e):Math.round(o),n[r]=o}return n}throw new Error("Unknown dtype "+e)}(e,i))},t}();e.MathBackendWebGL=G,i.ENV.registerBackend("webgl",function(){return new G});var j=function(t){function e(e,n){void 0===n&&(n=!1);var r=this;return console.warn("new NDArrayMathGPU() is deprecated. Please use the global dl.ENV.math. In rare cases, to construct your own NDArrayMath that runs on GPU, use math = new NDArrayMath('webgl', safeMode); and make sure to set it as global: dl.ENV.setMath(math);"),r=t.call(this,new G(e),n)||this,i.ENV.setMath(r),r}return r(e,t),e.prototype.getGPGPUContext=function(){return this.backendEngine.getBackend().getGPGPUContext()},e.prototype.getTextureManager=function(){return this.backendEngine.getBackend().getTextureManager()},e}(c.NDArrayMath);e.NDArrayMathGPU=j},"2wQ/":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("BozM"),a=n("jMY8"),i=function(){function t(t){this.inputs=t,this.idx=0,this.inputCounter=0,this.epoch=0,this.shuffledIndices=a.createShuffledIndices(t[0].length),this.numInputs=t.length;for(var e=this.inputs[0].length,n=0;n<this.numInputs;n++)a.assert(this.inputs[n].length===e,"Number of examples must match across different inputs.");for(n=0;n<this.numInputs;n++)for(var r=this.inputs[n][0].shape,o=0;o<this.inputs[n].length;o++)a.assertShapesMatch(r,this.inputs[n][o].shape)}return t.prototype.getCurrentExampleIndex=function(){var t=this.idx;return this.inputCounter++,this.inputCounter>=this.numInputs&&(this.idx++,this.inputCounter=0,this.idx>=this.inputs[0].length&&(this.idx=0,this.epoch++)),t},t.prototype.getNextInput=function(t){var e=this.getCurrentExampleIndex();return this.inputs[t][this.shuffledIndices[e]]},t.prototype.getEpoch=function(){return this.epoch},t.prototype.getInputProviders=function(){for(var t=[],e=0;e<this.numInputs;e++)t.push(this.getInputProvider(e));return t},t}();e.InMemoryShuffledInputProviderBuilder=i;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getInputProvider=function(t){var e=this;return{getNextCopy:function(n){return o.NDArray.like(e.getNextInput(t))},disposeCopy:function(t,e){e.dispose()}}},e}(i);e.InCPUMemoryShuffledInputProviderBuilder=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getInputProvider=function(t){var e=this;return{getNextCopy:function(n){return n.clone(e.getNextInput(t))},disposeCopy:function(t,e){e.dispose()}}},e}(i);e.InGPUMemoryShuffledInputProviderBuilder=u},"3Eo+":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},"3IRH":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"3fs2":function(t,e,n){var r=n("RY/4"),o=n("dSzd")("iterator"),a=n("/bQp");t.exports=n("FeBl").getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||a[r(t)]}},"4dK1":function(t,e,n){(function(t){var r;!function(t,o,a){function i(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function s(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,o=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n("LGuY")&&n("nErl")?void 0===(r=function(){return s}.call(e,n,e,o))||(o.exports=r):this.tychei=s}(0,"object"==typeof t&&t,n("LGuY"))}).call(e,n("3IRH")(t))},"4mcu":function(t,e){t.exports=function(){}},"52gC":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},"5PlU":function(t,e,n){var r=n("RY/4"),o=n("dSzd")("iterator"),a=n("/bQp");t.exports=n("FeBl").isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||a.hasOwnProperty(r(e))}},"5vEO":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e,n){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterHeight,o=t.filterWidth,a=t.strideHeight,i=t.strideWidth,s=t.padInfo.top,u=t.padInfo.left;this.outputShape=t.outShape;var c="avg"===e,p="0.0";if(c||(p="min"===e?"1.0 / 0.0":"-1.0 / 0.0"),n){var h="min"===e?"<=":">=";this.userCode="\n        const ivec2 strides = ivec2("+a+", "+i+");\n        const ivec2 pads = ivec2("+s+", "+u+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+r+"; wR++) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+o+"; wC++) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              if (isNaN(value)) {\n                setOutput(value);\n                return;\n              }\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value "+h+" currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+o+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "}else{var l="min"===e?"min":"max",f=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(f="avgValue / "+r*o+".0");var d=4*Math.floor(o/4),v=o%4,y="\n      if (hasNaN(values)) {\n        setOutput(getNaN(values));\n        return;\n      }\n      if ("+c+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = "+l+"(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+a+", "+i+");\n      const ivec2 pads = ivec2("+s+", "+u+");\n      const float initializationValue = "+p+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+p+");\n        float avgValue = 0.0;\n\n        for (int wR = 0; wR < "+r+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC += 4) {\n            int xC = xCCorner + wC;\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              getValue(batch, xR, xC + 3, d)\n            );\n\n            "+y+"\n          }\n\n          int xC = xCCorner + "+d+";\n          if ("+(1===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n            "+y+"\n          } else if ("+(2===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+y+"\n          } else if ("+(3===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              initializationValue\n            );\n\n            "+y+"\n          }\n        }\n        setOutput("+f+");\n      }\n    "}}}();e.Pool2DProgram=r},"65Fz":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.REGULAR=0]="REGULAR",t[t.TRANSPOSED=1]="TRANSPOSED"}(e.MatrixOrientation||(e.MatrixOrientation={}))},"6Dki":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("8oyn");e.xhr_dataset=r;var o=n("fpai");e.environment=o;var a=n("LbFW");e.gpgpu_util=a;var i=n("hEMf");e.render_ndarray_gpu_util=i;var s=n("WQ8k");e.webgl_util=s;var u=n("P58p");e.conv_util=u;var c=n("uKcl");e.test_util=c;var p=n("jMY8");e.util=p;var h=n("rxXm");e.version=h.version;var l=n("9GMi");e.CheckpointLoader=l.CheckpointLoader;var f=n("Xkia");e.InMemoryDataset=f.InMemoryDataset;var d=n("2wQ/");e.InCPUMemoryShuffledInputProviderBuilder=d.InCPUMemoryShuffledInputProviderBuilder,e.InGPUMemoryShuffledInputProviderBuilder=d.InGPUMemoryShuffledInputProviderBuilder;var v=n("8oyn");e.XhrDataset=v.XhrDataset;var y=n("fpai");e.ENV=y.ENV,e.Environment=y.Environment;var m=n("lABf");e.Graph=m.Graph,e.Tensor=m.Tensor;var g=n("ROF2");e.AdadeltaOptimizer=g.AdadeltaOptimizer;var x=n("wH3f");e.AdagradOptimizer=x.AdagradOptimizer;var b=n("FjvL");e.AdamOptimizer=b.AdamOptimizer;var w=n("+cXR");e.AdamaxOptimizer=w.AdamaxOptimizer;var E=n("KFeC");e.MomentumOptimizer=E.MomentumOptimizer;var A=n("qhzv");e.Optimizer=A.Optimizer;var T=n("T9Dr");e.RMSPropOptimizer=T.RMSPropOptimizer;var S=n("wb5b");e.SGDOptimizer=S.SGDOptimizer;var _=n("oERz");e.CostReduction=_.CostReduction,e.Session=_.Session;var M=n("nbdk");e.GraphRunner=M.GraphRunner,e.MetricReduction=M.MetricReduction;var N=n("lCbW");e.ConstantInitializer=N.ConstantInitializer,e.NDArrayInitializer=N.NDArrayInitializer,e.OnesInitializer=N.OnesInitializer,e.RandomNormalInitializer=N.RandomNormalInitializer,e.RandomTruncatedNormalInitializer=N.RandomTruncatedNormalInitializer,e.RandomUniformInitializer=N.RandomUniformInitializer,e.VarianceScalingInitializer=N.VarianceScalingInitializer,e.ZerosInitializer=N.ZerosInitializer;var k=n("Z92E");e.MathBackendCPU=k.MathBackendCPU,e.NDArrayMathCPU=k.NDArrayMathCPU;var C=n("2d20");e.MathBackendWebGL=C.MathBackendWebGL,e.NDArrayMathGPU=C.NDArrayMathGPU;var O=n("65Fz");e.MatrixOrientation=O.MatrixOrientation;var R=n("hbAG");e.GPGPUContext=R.GPGPUContext;var D=n("02A5");e.NDArrayMath=D.NDArrayMath;var P=n("BozM");e.Array1D=P.Array1D,e.Array2D=P.Array2D,e.Array3D=P.Array3D,e.Array4D=P.Array4D,e.NDArray=P.NDArray,e.Scalar=P.Scalar},"7//S":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultCompare=function(t,e){return t===e?0:t<e?-1:1};var r=function(){function t(t,e){this.comparator=t,this.indexObserver=e,this.heap=[]}return t.prototype.enqueue=function(t){this.heap.push(t),this.onIndexChanged(t,this.heap.length-1),this.siftUp(this.heap.length-1)},t.prototype.dequeue=function(){if(this.empty())throw new Error("dequeue called on empty priority queue.");var t=this.heap[0];return this.swap(0,this.heap.length-1),this.heap.pop(),this.siftDown(0),t},t.prototype.update=function(t,e){var n=e===this.heap.length-1;n||this.swap(e,this.heap.length-1),this.heap.pop(),n||(-1!==this.siftUpIndex(e)?this.siftUp(e):-1!==this.siftDownIndex(e)&&this.siftDown(e)),this.enqueue(t)},t.prototype.empty=function(){return 0===this.heap.length},t.prototype.onIndexChanged=function(t,e){this.indexObserver&&this.indexObserver(t,e)},t.prototype.getParentIndex=function(t){return 0===t?-1:Math.floor((t-1)/2)},t.prototype.getLeftChildIndex=function(t){var e=2*t+1;return e<this.heap.length?e:-1},t.prototype.getRightChildIndex=function(t){var e=2*t+2;return e<this.heap.length?e:-1},t.prototype.siftUpIndex=function(t){var e=this.getParentIndex(t);return-1===e?-1:this.compare(e,t)>0?e:-1},t.prototype.siftUp=function(t){for(var e=this.siftUpIndex(t);-1!==e;)this.swap(t,e),t=e,e=this.siftUpIndex(t)},t.prototype.siftDownIndex=function(t){if(t>=this.heap.length)return-1;var e=t,n=this.getLeftChildIndex(t);-1!==n&&this.compare(n,e)<0&&(e=n);var r=this.getRightChildIndex(t);return-1!==r&&this.compare(r,e)<0&&(e=r),e===t?-1:e},t.prototype.siftDown=function(t){for(var e=this.siftDownIndex(t);-1!==e;)this.swap(t,e),t=e,e=this.siftDownIndex(t)},t.prototype.compare=function(t,e){return this.comparator(this.heap[t],this.heap[e])},t.prototype.swap=function(t,e){var n=this.heap[t];this.heap[t]=this.heap[e],this.heap[e]=n,this.onIndexChanged(this.heap[t],t),this.onIndexChanged(this.heap[e],e)},t}();e.PriorityQueue=r},"77Pl":function(t,e,n){var r=n("EqjI");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},"7KvD":function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"7pDe":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("kiVh"),o=function(){return function(t,e,n,o,a,i){this.outputShape=[],this.supportsBroadcasting=!0,this.variableNames=["x","mean","variance"],r.assertAndGetBroadcastShape(t,e),r.assertAndGetBroadcastShape(t,n);var s="0.0";null!=o&&(r.assertAndGetBroadcastShape(t,o),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=a&&(r.assertAndGetBroadcastShape(t,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+s+";\n        float scale = "+u+";\n        float inv = scale / sqrt(variance + float("+i+"));\n        setOutput((x - mean) * inv + offset);\n      }\n    "}}();e.BatchNormProgram=o},"82Mu":function(t,e,n){var r=n("7KvD"),o=n("L42u").set,a=r.MutationObserver||r.WebKitMutationObserver,i=r.process,s=r.Promise,u="process"==n("R9M2")(i);t.exports=function(){var t,e,n,c=function(){var r,o;for(u&&(r=i.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){i.nextTick(c)};else if(!a||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var p=s.resolve();n=function(){p.then(c)}}else n=function(){o.call(r,c)};else{var h=!0,l=document.createTextNode("");new a(c).observe(l,{characterData:!0}),n=function(){l.data=h=!h}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},"880/":function(t,e,n){t.exports=n("hJx8")},"8oyn":function(t,e,n){"use strict";function r(t,e,n){for(var r=n,o=0;o<t.length;o+=4)e[r++]=t[o]}function o(t,e,n){for(var r=n,o=0;o<t.length;o+=4)e[r]=t[o],e[r+1]=t[o+1],e[r+2]=t[o+2],r+=3}function a(t,e){return new Promise(function(n,a){var i=new Image;i.setAttribute("crossOrigin",""),i.onload=function(){var t=function(t,e){var n=document.createElement("canvas"),a=n.getContext("2d"),i=t.height,s=u.sizeFromShape(e),c=new Uint8Array(i*s);if(t.width!==e[0]*e[1])throw new Error("Image width ("+t.width+") must be multiple of rows*columns ("+e[0]+"*"+e[1]+") of the ndarray");n.width=t.width,n.height=p;for(var h=n.width,l=n.height,f=h,d=l,v=e[2],y=0,m=Math.ceil(i/n.height),g=0;g<m;++g){var x=g*n.height;g===m-1&&i%n.height>0&&(n.height=i%n.height,d=l=n.height),a.drawImage(t,0,x,h,l,0,0,f,d);var b=a.getImageData(0,0,n.width,n.height).data;1===v?r(b,c,y):o(b,c,y),y+=n.height*s}return c}(i,e);i.src="",i=null,n(t)},i.src=t.path})}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n("BozM"),u=n("jMY8"),c=n("Xkia"),p=1e3;e.getXhrDatasetConfig=function(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){e(JSON.parse(r.responseText))},r.onerror=function(t){n(t)},r.send()})};var h=function(t){function e(e){var n=t.call(this,e.data.map(function(t){return t.shape}))||this;return n.xhrDatasetConfig=e,n}return i(e,t),e.prototype.getNDArray=function(t){var e="png"===t.dataType?a(t,t.shape):function(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t.path),r.responseType="arraybuffer",r.onload=function(n){var o="float32"===t.dataType?new Float32Array(r.response):new Uint8Array(r.response);e(o)},r.onerror=function(t){return n(t)},r.send()})}(t),n=u.sizeFromShape(t.shape);return e.then(function(e){for(var r=[],o=0;o<e.length/n;o++){var a=e.subarray(o*n,(o+1)*n),i=s.NDArray.make(t.shape,{values:new Float32Array(a)},"float32");r.push(i)}return r})},e.prototype.fetchData=function(){var t=this;return new Promise(function(e,n){var r=t.xhrDatasetConfig.data.map(function(e){return t.getNDArray(e)});Promise.all(r).then(function(n){t.dataset=n,e()})})},e}(c.InMemoryDataset);e.XhrDataset=h},"94VQ":function(t,e,n){"use strict";var r=n("Yobk"),o=n("X8DO"),a=n("e6n0"),i={};n("hJx8")(i,n("dSzd")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(i,{next:o(1,n)}),a(t,e+" Iterator")}},"9GMi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("BozM"),o=function(){function t(t){this.urlPath=t,"/"!==this.urlPath.charAt(this.urlPath.length-1)&&(this.urlPath+="/")}return t.prototype.loadManifest=function(){var t=this;return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t.urlPath+"manifest.json"),r.onload=function(){t.checkpointManifest=JSON.parse(r.responseText),e()},r.onerror=function(e){throw new Error("manifest.json not found at "+t.urlPath+". "+e)},r.send()})},t.prototype.getCheckpointManifest=function(){var t=this;return null==this.checkpointManifest?new Promise(function(e,n){t.loadManifest().then(function(){e(t.checkpointManifest)})}):new Promise(function(e,n){e(t.checkpointManifest)})},t.prototype.getAllVariables=function(){var t=this;return null!=this.variables?new Promise(function(e,n){e(t.variables)}):new Promise(function(e,n){t.getCheckpointManifest().then(function(n){for(var r=Object.keys(t.checkpointManifest),o=[],a=0;a<r.length;a++)o.push(t.getVariable(r[a]));Promise.all(o).then(function(n){t.variables={};for(var o=0;o<n.length;o++)t.variables[r[o]]=n[o];e(t.variables)})})})},t.prototype.getVariable=function(t){var e=this;if(!(t in this.checkpointManifest))throw new Error("Cannot load non-existant variable "+t);var n=function(n,o){var a=new XMLHttpRequest;a.responseType="arraybuffer";var i=e.checkpointManifest[t].filename;a.open("GET",e.urlPath+i),a.onload=function(){if(404===a.status)throw new Error("Not found variable "+t);var o=new Float32Array(a.response),i=r.NDArray.make(e.checkpointManifest[t].shape,{values:o});n(i)},a.onerror=function(e){throw new Error("Could not fetch variable "+t+": "+e)},a.send()};return null==this.checkpointManifest?new Promise(function(t,r){e.loadManifest().then(function(){new Promise(n).then(t)})}):new Promise(n)},t}();e.CheckpointLoader=o},"9RhS":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("jMY8");e.assertParams=function(t,e,n){var o=t.length,a=e.length;r.assert(t.length===e.length,"Error in concat"+o+"D: rank of x1 ("+o+") and x2 ("+a+") must be the same."),r.assert(n>=0&&n<o,"Error in concat"+o+"D: axis must be between 0 and "+(o-1)+".");for(var i=0;i<o;i++)r.assert(i===n||t[i]===e[i],"Error in concat"+o+"D: Shape ("+t+") does not match ("+e+") along the non-concatenated axis "+i+".")},e.computeOutShape=function(t,e,n){r.assert(t.length===e.length,"x1 and x2 should have the same rank.");var o=t.slice();return o[n]+=e[n],o}},"9V2y":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("65Fz"),o=function(){return function(t,e,n,o){void 0===n&&(n=r.MatrixOrientation.REGULAR),void 0===o&&(o=r.MatrixOrientation.REGULAR),this.variableNames=["matrixA","matrixB"];var a=n===r.MatrixOrientation.REGULAR?t[0]:t[1],i=o===r.MatrixOrientation.REGULAR?e[1]:e[0];this.outputShape=[a,i];var s=n===r.MatrixOrientation.REGULAR?t[1]:t[0],u=function(t,e){return n===r.MatrixOrientation.REGULAR?"aRow, "+e+" + "+t:e+" + "+t+", aRow"},c=function(t,e){return o===r.MatrixOrientation.REGULAR?e+" + "+t+", bCol":"bCol, "+e+" + "+t},p=4*Math.floor(s/4),h=s%4;this.userCode=" float dotARowBCol(int aRow, int bCol) {\n      float result = 0.0;\n      for (int i = 0; i < "+p+"; i += 4) {\n        vec4 a = vec4(\n          getMatrixA("+u(0,"i")+"),\n          getMatrixA("+u(1,"i")+"),\n          getMatrixA("+u(2,"i")+"),\n          getMatrixA("+u(3,"i")+")\n        );\n        vec4 b = vec4(\n          getMatrixB("+c(0,"i")+"),\n          getMatrixB("+c(1,"i")+"),\n          getMatrixB("+c(2,"i")+"),\n          getMatrixB("+c(3,"i")+")\n        );\n\n        result += dot(a, b);\n      }\n\n      if ("+(1===h)+") {\n        result += getMatrixA("+u(0,p)+") *\n          getMatrixB("+c(0,p)+");\n      } else if ("+(2===h)+") {\n        vec2 a = vec2(\n          getMatrixA("+u(0,p)+"),\n          getMatrixA("+u(1,p)+")\n        );\n        vec2 b = vec2(\n          getMatrixB("+c(0,p)+"),\n          getMatrixB("+c(1,p)+")\n        );\n        result += dot(a, b);\n      } else if ("+(3===h)+") {\n        vec3 a = vec3(\n          getMatrixA("+u(0,p)+"),\n          getMatrixA("+u(1,p)+"),\n          getMatrixA("+u(2,p)+")\n        );\n        vec3 b = vec3(\n          getMatrixB("+c(0,p)+"),\n          getMatrixB("+c(1,p)+"),\n          getMatrixB("+c(2,p)+")\n        );\n        result += dot(a, b);\n      }\n\n      return result;\n    }\n\n    void main() {\n      ivec2 resRC = getOutputCoords();\n      setOutput(dotARowBCol(resRC.x, resRC.y));\n    }\n    "}}();e.MatMulProgram=o},"9bBU":function(t,e,n){n("mClu");var r=n("FeBl").Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},"9g4f":function(t,e,n){(function(t){var r;!function(t,o,a){function i(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function s(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.w,o=e.X,a=e.i;return e.w=r=r+1640531527|0,n=o[a+34&127],t=o[a=a+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=o[a]=n^t,e.i=a,n+(r^r>>>16)|0},function(t,e){var n,r,o,a,i,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),o=0,a=-32;a<u;++a)e&&(r^=e.charCodeAt((a+32)%e.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,o=0==(n=s[127&a]^=r+i)?o+1:0);for(o>=128&&(s[127&(e&&e.length||0)]=-1),o=127,a=512;a>0;--a)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;t.w=i,t.X=s,t.i=o}(e,t)}(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&(r.X&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n("LGuY")&&n("nErl")?void 0===(r=function(){return s}.call(e,n,e,o))||(o.exports=r):this.xor4096=s}(0,"object"==typeof t&&t,n("LGuY"))}).call(e,n("3IRH")(t))},BO1k:function(t,e,n){t.exports={default:n("fxRn"),__esModule:!0}},Bjco:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("/5sW"),o=n("c+8m"),a=n.n(o),i=n("d7EF"),s=n.n(i),u=n("Xxa5"),c=n.n(u),p=n("Zrlr"),h=n.n(p),l=n("wxAW"),f=n.n(l),d=n("//Fk"),v=n.n(d),y=n("6Dki"),m=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=v.a))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},g=function(){function t(){h()(this,t),this.varsRecording={},this.currentStyle="",this.math=y.ENV.math,this.timesScalar=y.Scalar.new(150),this.plusScalar=y.Scalar.new(127.5),this.epsilonScalar=y.Scalar.new(.001)}return f()(t,[{key:"setStyle",value:function(t){return m(this,void 0,void 0,c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentStyle=t,e.next=3,this.load();case 3:case"end":return e.stop()}},e,this)}))}},{key:"load",value:function(){return m(this,void 0,void 0,c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.varsRecording[this.currentStyle]){t.next=4;break}console.log(this.currentStyle+" has been loaded."),t.next=9;break;case 4:return e=new y.CheckpointLoader("/fast-style-transfer-front-end/static/checkpoints/"+this.currentStyle+"/"),t.next=7,e.getAllVariables();case 7:this.varsRecording[this.currentStyle]=t.sent,console.log("new style "+this.currentStyle+" added.");case 9:case"end":return t.stop()}},t,this)}))}},{key:"predict",value:function(t){var e=this;return this.math.scope(function(n,r){var o=e.convLayer(t,1,!0,0),a=e.convLayer(o,2,!0,3),i=e.convLayer(a,2,!0,6),s=e.residualBlock(i,9),u=e.residualBlock(s,15),c=e.residualBlock(u,21),p=e.residualBlock(c,27),h=e.residualBlock(p,33),l=e.convTransposeLayer(h,64,2,39),f=e.convTransposeLayer(l,32,2,42),d=e.convLayer(f,1,!1,45),v=e.math.tanh(d),m=e.math.scalarTimesArray(e.timesScalar,v),g=e.math.scalarPlusArray(e.plusScalar,m),x=e.math.clip(g,0,255);return e.math.divide(x,y.Scalar.new(255))})}},{key:"dispose",value:function(){for(var t in this.varsRecording)for(var e in this.varsRecording[t])this.varsRecording[t].hasOwnProperty(e)&&this.varsRecording[t][e].dispose()}},{key:"convLayer",value:function(e,n,r,o){var a=this.math.conv2d(e,this.variables[t.varName(o)],null,[n,n],"same"),i=this.instanceNorm(a,o+1);return r?this.math.relu(i):i}},{key:"convTransposeLayer",value:function(e,n,r,o){var a=s()(e.shape,2),i=[a[0]*r,a[1]*r,n],u=this.math.conv2dTranspose(e,this.variables[t.varName(o)],i,[r,r],"same"),c=this.instanceNorm(u,o+1);return this.math.relu(c)}},{key:"residualBlock",value:function(t,e){var n=this.convLayer(t,1,!0,e),r=this.convLayer(n,1,!1,e+3);return this.math.addStrict(r,t)}},{key:"instanceNorm",value:function(e,n){var r=s()(e.shape,3),o=r[0],a=r[1],i=r[2],u=this.math.moments(e,[0,1]),c=u.mean,p=u.variance,h=this.variables[t.varName(n)],l=this.variables[t.varName(n+1)],f=this.epsilonScalar,d=this.math.divide(this.math.sub(e,c),this.math.sqrt(this.math.add(p,f)));return this.math.add(this.math.multiply(l,d),h).as3D(o,a,i)}},{key:"variables",get:function(){return this.varsRecording[this.currentStyle]}}],[{key:"varName",value:function(t){return 0===t?"Variable":"Variable_"+t.toString()}}]),t}(),x=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},b=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})};const w=y.ENV.math;let E=class extends r.default{constructor(){super(...arguments),this.contentUrl="",this.styleUrl="",this.styleName="",this.startBtnLoading=!1}uploadContent({target:t}){const e=t.files;r.default.nextTick(()=>{this.contentUrl=URL.createObjectURL(e[0])})}selectStyle(t){return b(this,void 0,void 0,function*(){console.log(t),r.default.nextTick(()=>{this.styleName=t});const e=yield(yield fetch(`/fast-style-transfer-front-end/static/images/${t}.jpg`)).blob();r.default.nextTick(()=>{this.styleUrl=URL.createObjectURL(e)})})}startTransfer(){return b(this,void 0,void 0,function*(){if(this.startBtnLoading=!0,!this.contentUrl||!this.styleUrl)return this.$message.error("Please set Content or Style!"),void(this.startBtnLoading=!1);r.default.nextTick(()=>b(this,void 0,void 0,function*(){yield this.transformNetwork.setStyle(this.styleName),yield w.scope((t,e)=>b(this,void 0,void 0,function*(){const t=document.getElementById("transfer-content"),n=e(y.Array3D.fromPixels(t)),r=this.transformNetwork.predict(n),o=this.$refs.output;o.width=t.width,o.height=t.height,yield function(t,e){return b(this,void 0,void 0,function*(){const[n,r]=t.shape,o=e.getContext("2d"),a=new ImageData(r,n),i=yield t.data();for(let t=0;t<n*r;++t){const e=4*t,n=3*t;a.data[e]=Math.round(255*i[n]),a.data[e+1]=Math.round(255*i[n+1]),a.data[e+2]=Math.round(255*i[n+2]),a.data[e+3]=255}o.putImageData(a,0,0)})}(r,o)})),this.$message.info("Processing finished."),this.startBtnLoading=!1}))})}};var A=E=x([a()({name:"style-transfer",props:{styleNames:{type:Array,default:()=>["udnie","scream","la_muse","rain_princess","wave","wreck"]},transformNetwork:{type:Object,default:()=>new g}}})],E),T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"style-transfer"}},[e("div",{staticClass:"flex-container"},[e("div",{staticClass:"box"},[e("h1",[this._v("Content")]),this._v(" "),e("input",{staticClass:"content-input",attrs:{type:"file",accept:"image/*"},on:{change:this.uploadContent}}),this._v(" "),e("div",[e("img",{attrs:{id:"transfer-content",src:this.contentUrl,alt:"content"}})])]),this._v(" "),e("div",{staticClass:"box"},[e("h1",[this._v("Style")]),this._v(" "),e("el-select",{attrs:{value:this.styleName,placeholder:"Choose a style"},on:{change:this.selectStyle}},this._l(this.styleNames,function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),this._v(" "),e("div",[e("img",{attrs:{id:"transfer-style",src:this.styleUrl,alt:"style"}})])],1)]),this._v(" "),e("div",[e("el-button",{attrs:{type:"primary",loading:this.startBtnLoading},on:{click:this.startTransfer}},[this._v("Start!")])],1),this._v(" "),e("div",{attrs:{id:"output"}},[e("keep-alive",[e("canvas",{key:"my-output",ref:"output",attrs:{id:"output-canvas",width:"1",height:"1"}})])],1)])},staticRenderFns:[]},S=n("VU/8")(A,T,!1,function(t){n("lTfx")},null,null);e.default=S.exports},BozM:function(t,e,n){"use strict";function r(t,e){if(null==e||"float32"===e)return new Float32Array(t);if("int32"===e){for(var n=new Int32Array(t.length),r=0;r<n.length;++r){var o=t[r];h.isValNaN(o,"int32")?n[r]=h.getNaN("int32"):n[r]=o}return n}if("bool"===e){var a=new Uint8Array(t.length);for(r=0;r<a.length;++r){o=t[r];h.isValNaN(o,"bool")?a[r]=h.getNaN("bool"):0!==Math.round(o)&&(a[r]=1)}return a}throw new Error("Unknown data type "+e)}function o(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function a(t,e){return function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e)?t:(Array.isArray(t)&&(t=h.flatten(t)),r(t,e))}function i(t,e){if(null==e||"float32"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){function n(n){return function(i){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],o=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,i])}}var r,o,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(e,"__esModule",{value:!0});var p=n("fpai"),h=n("jMY8"),l=n("EHtm");!function(t){t.float32="float32",t.int32="int32",t.bool="bool"}(e.DType||(e.DType={}));var f=function(){function t(e,n,r,o,a){this.isDisposed=!1,this.math=a||p.ENV.math,this.size=h.sizeFromShape(e),null!=r&&h.assert(this.size===r.length,"Constructing ndarray of shape ("+this.size+") should match the length of values ("+r.length+")"),this.shape=e,this.dtype=n||"float32";var i=this.shape.length;if(i<2)this.strides=[];else{this.strides=new Array(i-1),this.strides[i-2]=this.shape[i-1];for(var s=i-3;s>=0;--s)this.strides[s]=this.strides[s+1]*this.shape[s+1]}this.id=o,null==this.id&&(this.id=t.nextId++,this.math.register(this)),null!=r&&this.math.write(this.id,r,this.dtype,this.shape)}return t.ones=function(e,n){var r=function(t,e){for(var n=i(t,e),r=0;r<n.length;r++)n[r]=1;return n}(h.sizeFromShape(e),n);return t.make(e,{values:r},n)},t.zeros=function(e,n){var r=i(h.sizeFromShape(e),n);return t.make(e,{values:r},n)},t.onesLike=function(e){return t.ones(e.shape,e.dtype)},t.zerosLike=function(e){return t.zeros(e.shape,e.dtype)},t.like=function(e){var n=r(e.getValues(),e.dtype);return t.make(e.shape,{values:n},e.dtype,e.math)},t.make=function(e,n,r,o){switch(e.length){case 0:return new d(e,r,n.values,n.id,o);case 1:return new v(e,r,n.values,n.id,o);case 2:return new y(e,r,n.values,n.id,o);case 3:return new m(e,r,n.values,n.id,o);case 4:return new g(e,r,n.values,n.id,o);default:return new t(e,r,n.values,n.id,o)}},t.fromPixels=function(e,n,r){if(void 0===n&&(n=3),n>4)throw new Error("Cannot construct NDArray with more than 4 channels from pixels.");var o=[e.height,e.width,n];r=r||p.ENV.math;var a=t.make(o,{},"int32",r);return r.writePixels(a.id,e,n),a},t.prototype.reshape=function(e){if(this.throwIfDisposed(),e=h.inferFromImplicitShape(e,this.size),h.arraysEqual(this.shape,e))return this;var n={id:this.id};return h.assert(this.size===h.sizeFromShape(e),"new shape and old shape must have the same number of elements."),t.make(e,n,this.dtype,this.math)},t.prototype.flatten=function(){return this.throwIfDisposed(),this instanceof v?this:this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),h.assert(1===this.size,"The array must have only 1 element."),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},t.prototype.as3D=function(t,e,n){return this.throwIfDisposed(),this.reshape([t,e,n])},t.prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),this.reshape([t,e,n,r])},t.prototype.asType=function(e){if(this.throwIfDisposed(),this.dtype===e)return this;var n=a(this.dataSync(),e);return t.make(this.shape,{values:n},e,this.math)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.getValues()[n]},t.prototype.add=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.set.apply(this,[this.get.apply(this,e)+t].concat(e))},t.prototype.set=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.throwIfDisposed(),h.assert(e.length===this.rank,"The number of provided coordinates ("+e.length+") must match the rank ("+this.rank+")");for(var r=e.length>0?e[e.length-1]:0,o=0;o<e.length-1;++o)r+=this.strides[o]*e[o];var a=this.getValues();a[r]=t,this.math.write(this.id,a,this.dtype,this.shape)},t.prototype.val=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,this.data()];case 1:return e.sent(),[2,this.get.apply(this,t)]}})})},t.prototype.locToIndex=function(t){this.throwIfDisposed();for(var e=t[t.length-1],n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e},t.prototype.indexToLoc=function(t){this.throwIfDisposed();for(var e=new Array(this.shape.length),n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e},t.prototype.fill=function(t){this.throwIfDisposed();var e=this.getValues();e.fill(t),this.math.write(this.id,e,this.dtype,this.shape)},t.prototype.getValues=function(){return this.dataSync()},t.prototype.getValuesAsync=function(){return this.data()},t.prototype.data=function(){return u(this,void 0,void 0,function(){return c(this,function(t){return this.throwIfDisposed(),[2,this.math.read(this.id)]})})},t.prototype.dataSync=function(){return this.throwIfDisposed(),this.math.readSync(this.id)},t.prototype.dispose=function(){this.isDisposed=!0,this.math.disposeData(this.id)},t.prototype.equals=function(t){return this.throwIfDisposed(),this.dtype===t.dtype&&h.arraysEqual(this.shape,t.shape)&&h.arraysEqual(this.getValues(),t.getValues())},t.rand=function(e,n,r){var o=h.sizeFromShape(e),a=null;if(null==r||"float32"===r)a=new Float32Array(o);else if("int32"===r)a=new Int32Array(o);else{if("bool"!==r)throw new Error("Unknown data type "+r);a=new Uint8Array(o)}for(var i=0;i<o;i++)a[i]=n();return t.make(e,{values:a},r)},t.randNormal=function(e,n,r,o,a){if(void 0===n&&(n=0),void 0===r&&(r=1),null!=o&&"bool"===o)throw new Error("Unsupported data type "+o);var i=new l.MPRandGauss(n,r,o,!1,a);return t.rand(e,function(){return i.nextValue()},o)},t.randTruncatedNormal=function(e,n,r,o,a){if(void 0===n&&(n=0),void 0===r&&(r=1),null!=o&&"bool"===o)throw new Error("Unsupported data type "+o);var i=new l.MPRandGauss(n,r,o,!0,a);return t.rand(e,function(){return i.nextValue()},o)},t.randUniform=function(e,n,r,o){return t.rand(e,function(){return h.randUniform(n,r)},o)},t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("NDArray is disposed.")},t.nextId=0,t}();e.NDArray=f;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.new=function(t,n){return new e([],n,a([t],n))},e.prototype.get=function(){return this.getValues()[0]},e.prototype.val=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return t.sent(),[2,this.get()]}})})},e.prototype.add=function(t){this.getValues()[0]+=t},e.prototype.asType=function(e){return t.prototype.asType.call(this,e)},e.prototype.locToIndex=function(t){return 0},e.prototype.indexToLoc=function(t){return[]},e}(f);e.Scalar=d;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.new=function(t,n){if(!o(t)){var r=h.inferShape(t);h.assert(1===r.length,"Error constructing Array1D. Shape of values "+r+" is not 1 dimensional.")}return new e([t.length],n,a(t,n))},e.prototype.get=function(t){return this.getValues()[t]},e.prototype.val=function(t){return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return e.sent(),[2,this.get(t)]}})})},e.prototype.add=function(t,e){this.getValues()[e]+=t},e.prototype.locToIndex=function(t){return t[0]},e.prototype.indexToLoc=function(t){return[t]},e.prototype.asType=function(e){return t.prototype.asType.call(this,e)},e.ones=function(t,e){return f.ones(t,e)},e.zeros=function(t,e){return f.zeros(t,e)},e.randNormal=function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);var a=new l.MPRandGauss(e,n,r,!1,o);return f.rand(t,function(){return a.nextValue()},r)},e.randTruncatedNormal=function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);var a=new l.MPRandGauss(e,n,r,!0,o);return f.rand(t,function(){return a.nextValue()},r)},e.randUniform=function(t,e,n,r){return f.rand(t,function(){return h.randUniform(e,n)},r)},e}(f);e.Array1D=v;var y=function(t){function e(e,n,r,o,a){var i=this;return h.assert(2===e.length,"Shape should be of length 2"),i=t.call(this,e,n,r,o,a)||this,i.stride0=i.strides[0],i}return s(e,t),e.new=function(t,n,r){if(!o(n)){var i=h.inferShape(n);i.length>1&&h.assertShapesMatch(t,i,"Error when constructing Array2D. Shape of values "+i+" does not match the provided shape "+t+". ")}return new e(t,r,a(n,r))},e.prototype.get=function(t,e){return this.getValues()[this.stride0*t+e]},e.prototype.add=function(t,e,n){this.getValues()[this.stride0*e+n]+=t},e.prototype.val=function(t,e){return u(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return n.sent(),[2,this.get(t,e)]}})})},e.prototype.locToIndex=function(t){return this.stride0*t[0]+t[1]},e.prototype.indexToLoc=function(t){return[Math.floor(t/this.stride0),t%this.stride0]},e.prototype.asType=function(e){return t.prototype.asType.call(this,e)},e.ones=function(t,e){return f.ones(t,e)},e.zeros=function(t,e){return f.zeros(t,e)},e.randNormal=function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);var a=new l.MPRandGauss(e,n,r,!1,o);return f.rand(t,function(){return a.nextValue()},r)},e.randTruncatedNormal=function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);var a=new l.MPRandGauss(e,n,r,!0,o);return f.rand(t,function(){return a.nextValue()},r)},e.randUniform=function(t,e,n,r){return f.rand(t,function(){return h.randUniform(e,n)},r)},e}(f);e.Array2D=y;var m=function(t){function e(e,n,r,o,a){var i=this;return h.assert(3===e.length,"Shape should be of length 3"),i=t.call(this,e,n,r,o,a)||this,i.stride0=i.strides[0],i.stride1=i.strides[1],i}return s(e,t),e.new=function(t,n,r){if(!o(n)){var i=h.inferShape(n);i.length>1&&h.assertShapesMatch(t,i,"Error when constructing Array3D. Shape of values "+i+" does not match the provided shape "+t+". ")}return new e(t,r,a(n,r))},e.prototype.get=function(t,e,n){return this.getValues()[this.stride0*t+this.stride1*e+n]},e.prototype.val=function(t,e,n){return u(this,void 0,void 0,function(){return c(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return r.sent(),[2,this.get(t,e,n)]}})})},e.prototype.add=function(t,e,n,r){this.getValues()[this.stride0*e+this.stride1*n+r]+=t},e.prototype.locToIndex=function(t){return this.stride0*t[0]+this.stride1*t[1]+t[2]},e.prototype.indexToLoc=function(t){var e=Math.floor(t/this.stride0);return t-=e*this.stride0,[e,Math.floor(t/this.stride1),t%this.stride1]},e.prototype.asType=function(e){return t.prototype.asType.call(this,e)},e.ones=function(t,e){return f.ones(t,e)},e.zeros=function(t,e){return f.zeros(t,e)},e.randNormal=function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);var a=new l.MPRandGauss(e,n,r,!1,o);return f.rand(t,function(){return a.nextValue()},r)},e.randTruncatedNormal=function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);var a=new l.MPRandGauss(e,n,r,!0,o);return f.rand(t,function(){return a.nextValue()},r)},e.randUniform=function(t,e,n,r){return f.rand(t,function(){return h.randUniform(e,n)},r)},e}(f);e.Array3D=m;var g=function(t){function e(e,n,r,o,a){var i=this;return h.assert(4===e.length,"Shape should be of length 4"),i=t.call(this,e,n,r,o,a)||this,i.stride0=i.strides[0],i.stride1=i.strides[1],i.stride2=i.strides[2],i}return s(e,t),e.new=function(t,n,r){if(!o(n)){var i=h.inferShape(n);i.length>1&&h.assertShapesMatch(t,i,"Error when constructing Array4D. Shape of values "+i+" does not match the provided shape "+t+". ")}return new e(t,r,a(n,r))},e.prototype.get=function(t,e,n,r){return this.getValues()[this.stride0*t+this.stride1*e+this.stride2*n+r]},e.prototype.val=function(t,e,n,r){return u(this,void 0,void 0,function(){return c(this,function(o){switch(o.label){case 0:return[4,this.data()];case 1:return o.sent(),[2,this.get(t,e,n,r)]}})})},e.prototype.add=function(t,e,n,r,o){this.getValues()[this.stride0*e+this.stride1*n+this.stride2*r+o]+=t},e.prototype.locToIndex=function(t){return this.stride0*t[0]+this.stride1*t[1]+this.stride2*t[2]+t[3]},e.prototype.indexToLoc=function(t){var e=Math.floor(t/this.stride0);t-=e*this.stride0;var n=Math.floor(t/this.stride1);return t-=n*this.stride1,[e,n,Math.floor(t/this.stride2),t%this.stride2]},e.prototype.asType=function(e){return t.prototype.asType.call(this,e)},e.ones=function(t,e){return f.ones(t,e)},e.zeros=function(t,e){return f.zeros(t,e)},e.randNormal=function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);var a=new l.MPRandGauss(e,n,r,!1,o);return f.rand(t,function(){return a.nextValue()},r)},e.randTruncatedNormal=function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);var a=new l.MPRandGauss(e,n,r,!0,o);return f.rand(t,function(){return a.nextValue()},r)},e.randUniform=function(t,e,n,r){return f.rand(t,function(){return h.randUniform(e,n)},r)},e}(f);e.Array4D=g},C4MV:function(t,e,n){t.exports={default:n("9bBU"),__esModule:!0}},CXw9:function(t,e,n){"use strict";var r,o,a,i,s=n("O4g8"),u=n("7KvD"),c=n("+ZMJ"),p=n("RY/4"),h=n("kM2E"),l=n("EqjI"),f=n("lOnJ"),d=n("2KxR"),v=n("NWt+"),y=n("t8x9"),m=n("L42u").set,g=n("82Mu")(),x=n("qARP"),b=n("dNDb"),w=n("fJUb"),E="Promise",A=u.TypeError,T=u.process,S=u[E],_="process"==p(T),M=function(){},N=o=x.f,k=!!function(){try{var t=S.resolve(1),e=(t.constructor={})[n("dSzd")("species")]=function(t){t(M,M)};return(_||"function"==typeof PromiseRejectionEvent)&&t.then(M)instanceof e}catch(t){}}(),C=function(t){var e;return!(!l(t)||"function"!=typeof(e=t.then))&&e},O=function(t,e){if(!t._n){t._n=!0;var n=t._c;g(function(){for(var r=t._v,o=1==t._s,a=0,i=function(e){var n,a,i=o?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{i?(o||(2==t._h&&P(t),t._h=1),!0===i?n=r:(c&&c.enter(),n=i(r),c&&c.exit()),n===e.promise?u(A("Promise-chain cycle")):(a=C(n))?a.call(n,s,u):s(n)):u(r)}catch(t){u(t)}};n.length>a;)i(n[a++]);t._c=[],t._n=!1,e&&!t._h&&R(t)})}},R=function(t){m.call(u,function(){var e,n,r,o=t._v,a=D(t);if(a&&(e=b(function(){_?T.emit("unhandledRejection",o,t):(n=u.onunhandledrejection)?n({promise:t,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)}),t._h=_||D(t)?2:1),t._a=void 0,a&&e.e)throw e.v})},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},P=function(t){m.call(u,function(){var e;_?T.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},I=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),O(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw A("Promise can't be resolved itself");(e=C(t))?g(function(){var r={_w:n,_d:!1};try{e.call(t,c(F,r,1),c(I,r,1))}catch(t){I.call(r,t)}}):(n._v=t,n._s=1,O(n,!1))}catch(t){I.call({_w:n,_d:!1},t)}}};k||(S=function(t){d(this,S,E,"_h"),f(t),r.call(this);try{t(c(F,this,1),c(I,this,1))}catch(t){I.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n("xH/j")(S.prototype,{then:function(t,e){var n=N(y(this,S));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=_?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&O(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),a=function(){var t=new r;this.promise=t,this.resolve=c(F,t,1),this.reject=c(I,t,1)},x.f=N=function(t){return t===S||t===i?new a(t):o(t)}),h(h.G+h.W+h.F*!k,{Promise:S}),n("e6n0")(S,E),n("bRrM")(E),i=n("FeBl")[E],h(h.S+h.F*!k,E,{reject:function(t){var e=N(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!k),E,{resolve:function(t){return w(s&&this===i?S:this,t)}}),h(h.S+h.F*!(k&&n("dY0y")(function(t){S.all(t).catch(M)})),E,{all:function(t){var e=this,n=N(e),r=n.resolve,o=n.reject,a=b(function(){var n=[],a=0,i=1;v(t,!1,function(t){var s=a++,u=!1;n.push(void 0),i++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--i||r(n))},o)}),--i||r(n)});return a.e&&o(a.v),n.promise},race:function(t){var e=this,n=N(e),r=n.reject,o=b(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},CsGD:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("jMY8"),a=n("yNpf"),i=function(t){function e(e,n,r){var a=t.call(this)||this;return a.t1=e,a.t2=n,a.outTensor=r,o.assert(1===o.sizeFromShape(e.shape)||1===o.sizeFromShape(n.shape)||o.arraysEqual(e.shape,n.shape),"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape"),a}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.t1),a=e.get(this.t2);t.scope(function(i){var s;s=o.isScalarShape(r.shape)?t.scalarMinusArray(r,a):o.isScalarShape(a.shape)?t.arrayMinusScalar(r,a):t.subtract(r,a),e.set(n.outTensor,i(s))})},e.prototype.backProp=function(t,e,n){var r=this,i=n.get(this.outTensor);t.scope(function(){if(a.shouldBackProp(r.t1))if(o.isScalarShape(r.t1.shape)){var e=t.sum(i);n.add(r.t1,e)}else n.add(r.t1,t.clone(i));if(a.shouldBackProp(r.t2))if(o.isScalarShape(r.t2.shape)){e=t.sum(i);var s=t.neg(e);n.add(r.t2,s)}else n.add(r.t2,t.neg(i))})},e.prototype.dispose=function(){null!=this.dySizeScalar&&this.dySizeScalar.dispose()},e}(n("/ROS").Operation);e.Subtract=i},D2L2:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},Di7A:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.variableNames=["source"],this.outputShape=null,this.userCode="\n      uniform ivec2 sourceStart;\n      uniform ivec2 destStart;\n\n      void main() {\n        ivec2 destCoords = getOutputCoords() - destStart;\n        int index = destCoords.x * "+e+" + destCoords.y;\n        int r = index / "+t+";\n        ivec2 sourceCoords = sourceStart + ivec2(r, index - r * "+t+");\n        setOutput(getSource(sourceCoords.x, sourceCoords.y));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t,e,n){return function(r,o){r.setOutputMatrixWriteRegion(e[0],n[0],e[1],n[1]);var a=r.getUniformLocation(o,"sourceStart");r.gl.uniform2i(a,t[0],t[1]);var i=r.getUniformLocation(o,"destStart");r.gl.uniform2i(i,e[0],e[1])}},t}();e.Copy2DProgram=r},EGZi:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},EHtm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("H/Ud"),o=function(){function t(t,e,n,o,a){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=a||Math.random();this.random=r.alea(i.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,n,r=!1;!r;){var o=void 0,a=void 0,i=void 0;do{i=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*o*s,n=this.mean+this.stdDev*a*s,this.truncated&&!this.isValidTruncated(e)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(e)},t.prototype.convertValue=function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)},t.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},t}();e.MPRandGauss=o},Emi9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        "+e+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "}}();e.UnaryOpProgram=r,e.CHECK_NAN_SNIPPET="\n  if (isNaN(x)) {\n    return x;\n  }\n",e.ABS="\n  return abs(x);\n",e.RELU=e.CHECK_NAN_SNIPPET+"\n  return (x < 0.0) ? 0.0 : x;\n",e.ELU="\n  return (x >= 0.0) ? x : (exp(x) - 1.0);\n",e.ELU_DER="\n  return (x >= 0.0) ? 1.0 : exp(x);\n",e.SELU="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768599402175208123;\n  float scale = 1.0507009873554804934193349852946;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",e.LEAKY_RELU=function(t){return"\n    return (x >= 0.0) ? x : "+t+" * x;\n  "},e.STEP=function(t){return void 0===t&&(t=0),e.CHECK_NAN_SNIPPET+"\n    return x > 0.0 ? 1.0 : float("+t+");\n  "},e.NEG="\n  return -x;\n",e.CEIL="\n  return ceil(x);\n",e.FLOOR="\n  return floor(x);\n",e.EXP="\n  return exp(x);\n",e.LOG="\n  return log(x);\n",e.SQRT=e.CHECK_NAN_SNIPPET+"\n  return sqrt(x);\n",e.SIGMOID="\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",e.SIN=e.CHECK_NAN_SNIPPET+"\n  return sin(x);\n",e.COS=e.CHECK_NAN_SNIPPET+"\n  return cos(x);\n",e.TAN="\n  return tan(x);\n",e.ASIN=e.CHECK_NAN_SNIPPET+"\n  return asin(x);\n",e.ACOS=e.CHECK_NAN_SNIPPET+"\n  return acos(x);\n",e.ATAN=e.CHECK_NAN_SNIPPET+"\n  return atan(x);\n",e.SINH="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",e.COSH="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",e.TANH="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",e.SQUARE="\n  return x * x;\n"},EqBC:function(t,e,n){"use strict";var r=n("kM2E"),o=n("FeBl"),a=n("7KvD"),i=n("t8x9"),s=n("fJUb");r(r.P+r.R,"Promise",{finally:function(t){var e=i(this,o.Promise||a.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},EqjI:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},FHsp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={MatMul:function(t,e){return t.matMul(e.inputs.a,e.inputs.b,e.args.aOrientation,e.args.bOrientation)},Clone:function(t,e){return t.clone(e.inputs.x)},Slice1D:function(t,e){return t.slice1D(e.inputs.x,e.args.begin,e.args.size)},Slice2D:function(t,e){return t.slice2D(e.inputs.x,e.args.begin,e.args.size)},Slice3D:function(t,e){return t.slice3D(e.inputs.x,e.args.begin,e.args.size)},Slice4D:function(t,e){return t.slice4D(e.inputs.x,e.args.begin,e.args.size)},Concat1D:function(t,e){return t.concat1D(e.inputs.a,e.inputs.b)},Concat2D:function(t,e){return t.concat2D(e.inputs.a,e.inputs.b,e.args.axis)},Concat3D:function(t,e){return t.concat3D(e.inputs.a,e.inputs.b,e.args.axis)},Concat4D:function(t,e){return t.concat4D(e.inputs.a,e.inputs.b,e.args.axis)},Neg:function(t,e){return t.neg(e.inputs.x)},Add:function(t,e){return t.add(e.inputs.a,e.inputs.b)},Sub:function(t,e){return t.subtract(e.inputs.a,e.inputs.b)},Mul:function(t,e){return t.multiply(e.inputs.a,e.inputs.b)},Div:function(t,e){return t.divide(e.inputs.a,e.inputs.b)},Sum:function(t,e){return t.sum(e.inputs.x,e.args.axes)},ArgMax:function(t,e){return t.argMax(e.inputs.x,e.args.axes)},ArgMin:function(t,e){return t.argMin(e.inputs.x,e.args.axes)},Equal:function(t,e){return t.equal(e.inputs.a,e.inputs.b)},TopKValues:function(t,e){return t.topKValues(e.inputs.x,e.args.k)},TopKIndices:function(t,e){return t.topKIndices(e.inputs.x,e.args.k)},Min:function(t,e){return t.min(e.inputs.x,e.args.axes)},Max:function(t,e){return t.max(e.inputs.x,e.args.axes)},Ceil:function(t,e){return t.ceil(e.inputs.x)},Floor:function(t,e){return t.floor(e.inputs.x)},Pow:function(t,e){return t.pow(e.inputs.a,e.inputs.b)},Exp:function(t,e){return t.exp(e.inputs.x)},Log:function(t,e){return t.log(e.inputs.x)},Sqrt:function(t,e){return t.sqrt(e.inputs.x)},Square:function(t,e){return t.square(e.inputs.x)},Relu:function(t,e){return t.relu(e.inputs.x)},LeakyRelu:function(t,e){return t.leakyRelu(e.inputs.x,e.args.alpha)},PReLU:function(t,e){return t.prelu(e.inputs.x,e.inputs.alpha)},PReLUDer:function(t,e){return t.preluDer(e.inputs.x,e.inputs.alpha)},Elu:function(t,e){return t.elu(e.inputs.x)},EluDer:function(t,e){return t.eluDer(e.inputs.x)},Selu:function(t,e){return t.selu(e.inputs.x)},Abs:function(t,e){return t.abs(e.inputs.x)},Sigmoid:function(t,e){return t.sigmoid(e.inputs.x)},Step:function(t,e){return t.step(e.inputs.x,e.args.alpha)},Sin:function(t,e){return t.sin(e.inputs.x)},Cos:function(t,e){return t.cos(e.inputs.x)},Tan:function(t,e){return t.tan(e.inputs.x)},Asin:function(t,e){return t.asin(e.inputs.x)},Acos:function(t,e){return t.acos(e.inputs.x)},Atan:function(t,e){return t.atan(e.inputs.x)},Sinh:function(t,e){return t.sinh(e.inputs.x)},Cosh:function(t,e){return t.cosh(e.inputs.x)},Tanh:function(t,e){return t.tanh(e.inputs.x)},Clip:function(t,e){return t.clip(e.inputs.x,e.args.min,e.args.max)},Transpose:function(t,e){return t.transpose(e.inputs.x,e.args.perm)},Tile:function(t,e){return t.tile(e.inputs.x,e.args.reps)},Conv2D:function(t,e){return t.conv2d(e.inputs.x,e.inputs.filter,e.inputs.bias,e.args.convInfo)},Conv2DDerInput:function(t,e){return t.conv2dDerInput(e.inputs.dy,e.inputs.filter,e.args.convInfo)},Conv2DDerFilter:function(t,e){return t.conv2dDerFilter(e.inputs.x,e.inputs.dy,e.args.convInfo)},Conv2DDerBias:function(t,e){return t.conv2dDerBias(e.inputs.dy)},DepthwiseConv2D:function(t,e){return t.depthwiseConv2D(e.inputs.x,e.inputs.filter,e.args.convInfo)},MaxPool:function(t,e){return t.maxPool(e.inputs.x,e.args.convInfo)},MaxPoolBackprop:function(t,e){return t.maxPoolBackprop(e.inputs.dy,e.inputs.x,e.args.convInfo)},AvgPool:function(t,e){return t.avgPool(e.inputs.x,e.args.convInfo)},MinPool:function(t,e){return t.minPool(e.inputs.x,e.args.convInfo)},ResizeBilinear3D:function(t,e){return t.resizeBilinear3D(e.inputs.x,e.args.newShape2D,e.args.alignCorners)},BatchNorm3D:function(t,e){return t.batchNormalization3D(e.inputs.x,e.inputs.mean,e.inputs.variance,e.args.varianceEpsilon,e.inputs.scale,e.inputs.offset)},BatchNorm2D:function(t,e){return t.batchNormalization2D(e.inputs.x,e.inputs.mean,e.inputs.variance,e.args.varianceEpsilon,e.inputs.scale,e.inputs.offset)},Multinomial:function(t,e){return t.multinomial(e.inputs.probs,e.args.numSamples,e.args.seed)},OneHot:function(t,e){return t.oneHot(e.inputs.indices,e.args.depth,e.args.onValue,e.args.offValue)}};e.executeKernel=function(t,e,n){return r[e](t,n)}},FSI1:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.dict={}}return t.prototype.get=function(t,e){if(void 0===e&&(e=!1),!e&&void 0===this.dict[t.id])throw new Error("tensor "+t.id+" not in array map.");var n=this.dict[t.id];if(!e&&null===n)throw new Error("tensor "+t.id+" has null array.");return n},t.prototype.delete=function(t){delete this.dict[t.id]},t.prototype.nullify=function(t){this.dict[t.id]=null},t.prototype.disposeArray=function(t){if(void 0!==this.dict[t.id]){var e=this.dict[t.id];null!==e&&(e.dispose(),this.dict[t.id]=null)}},t.prototype.size=function(){return Object.keys(this.dict).length},t.prototype.dispose=function(){var t=this;Object.keys(this.dict).forEach(function(e){var n=t.dict[+e];n&&n.dispose()}),this.dict={}},t.prototype.hasNullArray=function(t){if(void 0===this.dict[t.id])throw new Error("tensor "+t.id+" not in array map.");return null===this.dict[t.id]},t}();e.TensorArrayMapBase=o;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.set=function(t,e){this.dict[t.id]=e},e}(o);e.TensorArrayMap=a;var i=function(t){function e(e){var n=t.call(this)||this;return n.math=e,n}return r(e,t),e.prototype.add=function(t,e){if(null==this.dict[t.id])this.dict[t.id]=this.math.keep(e);else{var n=this.get(t),r=this.math.keep(this.math.addStrict(n,e));this.dict[t.id]=r,n.dispose()}},e}(o);e.SummedTensorArrayMap=i},FeBl:function(t,e){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},FjvL:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("BozM"),a=n("FSI1"),i=function(t){function e(e,n,r,i){var s=t.call(this,e,i)||this;return s.learningRate=e,s.beta1=n,s.beta2=r,s.firstMoment=new a.TensorArrayMap,s.secondMoment=new a.TensorArrayMap,s.eps=o.Scalar.new(1e-8),s.b1=o.Scalar.new(s.beta1),s.b2=o.Scalar.new(s.beta2),s.accB1=o.Scalar.new(s.beta1),s.accB2=o.Scalar.new(s.beta2),s}return r(e,t),e.prototype.beforeBatch=function(e,n,r,a,i){var s=this;t.prototype.beforeBatch.call(this,e,n,r,a,i),0===this.firstMoment.size()&&this.variableNodes.forEach(function(t){s.firstMoment.set(t.output,o.NDArray.zeros(t.output.shape))}),0===this.secondMoment.size()&&this.variableNodes.forEach(function(t){s.secondMoment.set(t.output,o.NDArray.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,n,r,o){var i=this;t.scope(function(e){i.variableNodes.forEach(function(n){var o=r.get(n.output),a=i.variableGradients.get(n.output),s=i.firstMoment.get(n.output),u=i.secondMoment.get(n.output),c=t.scaledArrayAdd(i.b1,s,t.subtract(i.one,i.b1),a),p=t.multiply(a,a),h=t.scaledArrayAdd(i.b2,u,t.subtract(i.one,i.b2),p),l=t.divide(c,t.subtract(i.one,i.accB1)),f=t.divide(h,t.subtract(i.one,i.accB2)),d=t.scaledArrayAdd(i.c,t.divide(l,t.add(t.sqrt(f),i.eps)),i.one,o);r.set(n.output,e(d)),n.data=d,i.firstMoment.set(n.output,e(c)),i.secondMoment.set(n.output,e(h)),o.dispose(),a.dispose(),s.dispose(),u.dispose()});var n=i.accB1,o=i.accB2;i.accB1=e(t.multiply(i.accB1,i.b1)),i.accB2=e(t.multiply(i.accB2,i.b2)),n.dispose(),o.dispose()}),this.variableGradients.dispose(),this.variableGradients=new a.TensorArrayMap},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.firstMoment.dispose(),this.secondMoment.dispose(),this.eps.dispose(),this.b1.dispose(),this.b2.dispose(),this.accB1.dispose(),this.accB2.dispose()},e}(n("qhzv").Optimizer);e.AdamOptimizer=i},"H/Ud":function(t,e,n){var r=n("VOQS"),o=n("di0+"),a=n("i+52"),i=n("fzqA"),s=n("9g4f"),u=n("4dK1"),c=n("p//t");c.alea=r,c.xor128=o,c.xorwow=a,c.xorshift7=i,c.xor4096=s,c.tychei=u,t.exports=c},H24h:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isMobile=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}},HHSQ:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("P58p"),a=n("jMY8"),i=function(t){function e(e,n,r,i,s){void 0===i&&(i=1);var u=t.call(this)||this;return u.xTensor=e,u.yTensor=n,u.fieldSize=r,u.stride=i,u.pad=null!=s?s:o.computeDefaultPad(e.shape,u.fieldSize,u.stride),a.assert(a.isInt(u.pad),"The zero padding ("+u.pad+") must be an integer. Change the stride and/or zero pad parameters"),u}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.xTensor);t.scope(function(o){e.set(n.yTensor,o(t.maxPool(r,n.fieldSize,n.stride,n.pad)))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.xTensor),a=n.get(this.yTensor);t.scope(function(){n.add(r.xTensor,t.maxPoolBackprop(a,o,r.fieldSize,r.stride,r.pad))})},e}(n("/ROS").Operation);e.MaxPool=i},Ibhu:function(t,e,n){var r=n("D2L2"),o=n("TcQ7"),a=n("vFc/")(!1),i=n("ax3d")("IE_PROTO");t.exports=function(t,e){var n,s=o(t),u=0,c=[];for(n in s)n!=i&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~a(c,n)||c.push(n));return c}},KCc1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t.float32="float32",t.int32="int32",t.bool="int32"}(e.SumTypesMap||(e.SumTypesMap={}));var r;!function(t){t.float32="float32",t.int32="int32",t.bool="int32"}(r=e.UpcastInt32AndMap||(e.UpcastInt32AndMap={}));var o;!function(t){t.float32="float32",t.int32="int32",t.bool="bool"}(o=e.UpcastBoolAndMap||(e.UpcastBoolAndMap={}));var a;!function(t){t.float32="float32",t.int32="float32",t.bool="float32"}(a=e.UpcastFloat32AndMap||(e.UpcastFloat32AndMap={}));var i={float32:a,int32:r,bool:o};e.upcastType=function(t,e){return i[t][e]}},KFeC:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("BozM"),a=n("FSI1"),i=function(t){function e(e,n,r){var i=t.call(this,e,r)||this;return i.learningRate=e,i.momentum=n,i.variableVelocities=new a.TensorArrayMap,i.m=o.Scalar.new(i.momentum),i}return r(e,t),e.prototype.beforeBatch=function(e,n,r,a,i){var s=this;t.prototype.beforeBatch.call(this,e,n,r,a,i),0===this.variableVelocities.size()&&this.variableNodes.forEach(function(t){s.variableVelocities.set(t.output,o.NDArray.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,n,r,o){var i=this;t.scope(function(e){i.variableNodes.forEach(function(n){var o=r.get(n.output),a=i.variableGradients.get(n.output),s=i.variableVelocities.get(n.output),u=t.scaledArrayAdd(i.m,s,i.one,a),c=t.scaledArrayAdd(i.c,u,i.one,o);i.variableVelocities.set(n.output,e(u)),r.set(n.output,e(c)),n.data=c,o.dispose(),s.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new a.TensorArrayMap},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.m.dispose(),this.variableVelocities.dispose()},e.prototype.setMomentum=function(t){this.momentum=t},e}(n("wb5b").SGDOptimizer);e.MomentumOptimizer=i},KOOB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("9RhS"),o=n("lYtQ"),a=function(){return function(t,e,n){this.variableNames=["A","B"],this.outputShape=[];var a=["yR","yC","yD","yW"][n];this.outputShape=r.computeOutShape(t,e,n);var i=o.getCoordsDataType(t.length),s=function(t){var e=1===t?"int yR = coords;":"int yR = coords.x;";if(t>1&&(e+="\nint yC = coords.y;"),t>2&&(e+="\nint yD = coords.z;"),t>3&&(e+="\nint yW = coords.w;"),t>4)throw Error("Concat for rank "+t+" is not yet supported");return e}(t.length),u=function(t){if(1===t)return"yR";if(2===t)return"yR, yC";if(3===t)return"yR, yC, yD";if(4===t)return"yR, yC, yD, yW";throw Error("Concat for rank "+t+" is not yet supported")}(t.length);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        "+s+"\n\n        float value = 0.0;\n        if ("+a+" < "+t[n]+") {\n          value = getA("+u+");\n        } else {\n          "+a+" -= "+t[n]+";\n          value = getB("+u+");\n        }\n\n        setOutput(value);\n      }\n    "}}();e.ConcatProgram=a},L42u:function(t,e,n){var r,o,a,i=n("+ZMJ"),s=n("knuC"),u=n("RPLV"),c=n("ON07"),p=n("7KvD"),h=p.process,l=p.setImmediate,f=p.clearImmediate,d=p.MessageChannel,v=p.Dispatch,y=0,m={},g="onreadystatechange",x=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},b=function(t){x.call(t.data)};l&&f||(l=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++y]=function(){s("function"==typeof t?t:Function(t),e)},r(y),y},f=function(t){delete m[t]},"process"==n("R9M2")(h)?r=function(t){h.nextTick(i(x,t,1))}:v&&v.now?r=function(t){v.now(i(x,t,1))}:d?(a=(o=new d).port2,o.port1.onmessage=b,r=i(a.postMessage,a,1)):p.addEventListener&&"function"==typeof postMessage&&!p.importScripts?(r=function(t){p.postMessage(t+"","*")},p.addEventListener("message",b,!1)):r=g in c("script")?function(t){u.appendChild(c("script"))[g]=function(){u.removeChild(this),x.call(t)}}:function(t){setTimeout(i(x,t,1),0)}),t.exports={set:l,clear:f}},LGuY:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},LUqz:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("yNpf"),a=function(t){function e(e,n,r,o,a){var i=t.call(this)||this;return i.x1Tensor=e,i.x2Tensor=n,i.c1Tensor=r,i.c2Tensor=o,i.outTensor=a,i}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor),a=e.get(this.c1Tensor).asScalar(),i=e.get(this.c2Tensor).asScalar();t.scope(function(s){e.set(n.outTensor,s(t.scaledArrayAdd(a,r,i,o)))})},e.prototype.backProp=function(t,e,n){var r=this,a=e.get(this.x1Tensor),i=e.get(this.x2Tensor),s=e.get(this.c1Tensor),u=e.get(this.c2Tensor),c=n.get(this.outTensor);t.scope(function(){if(o.shouldBackProp(r.x1Tensor)&&n.add(r.x1Tensor,t.scalarTimesArray(s,c)),o.shouldBackProp(r.x2Tensor)&&n.add(r.x2Tensor,t.scalarTimesArray(u,c)),o.shouldBackProp(r.c1Tensor)){var e=t.elementWiseMul(a,c);n.add(r.c1Tensor,t.sum(e))}if(o.shouldBackProp(r.c2Tensor)){var p=t.elementWiseMul(i,c);n.add(r.c2Tensor,t.sum(p))}})},e}(n("/ROS").Operation);e.LinearCombination=a},LWEw:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("jMY8");e.assertParamsValid=function(t,e,n){r.assert(t.rank===e.length,"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."),r.assert(t.rank===n.length,"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+").");for(var o=0;o<t.rank;++o)r.assert(e[o]+n[o]<=t.shape[o],"Error in slice"+t.rank+"D: begin["+o+"] + size["+o+"] ("+(e[o]+n[o])+") would overflow input.shape["+o+"] ("+t.shape[o]+")")}},LbFW:function(t,e,n){"use strict";function r(){return{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0}}function o(t,e){return l.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===l.ENV.get("WEBGL_VERSION")?4===e?t.RGBA:t.RED:t.RGBA}function a(t){return l.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?t.FLOAT:t.UNSIGNED_BYTE}function i(t,e,n,r){d.validateTextureSize(t,e,n);var i=d.createTexture(t),s=t.TEXTURE_2D,u=function(t,e){return l.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===l.ENV.get("WEBGL_VERSION")?4===e?t.RGBA32F:t.R32F:t.RGBA}(t,r),c=o(t,r);return d.callAndCheck(t,function(){return t.bindTexture(s,i)}),d.callAndCheck(t,function(){return t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),d.callAndCheck(t,function(){return t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),d.callAndCheck(t,function(){return t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)}),d.callAndCheck(t,function(){return t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)}),d.callAndCheck(t,function(){return t.texImage2D(s,0,u,e,n,0,c,a(t),null)}),d.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,null)}),i}function s(t,e,n,r,i,s){var u=o(t,s);d.validateTextureSize(t,n,r),d.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,e)}),d.callAndCheck(t,function(){return t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,u,a(t),i)}),d.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function u(t,e,n){return l.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?new Float32Array(f.getUnpackedArraySizeFromMatrixSize(t*e,n)):new Uint8Array(t*e*n)}function c(t,e,n,r){if(l.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")){var o=new Float32Array(e*n);return f.decodeMatrixFromUnpackedArray(t,o,r),o}return f.decodeToFloatArray(t)}var p=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},h=this&&this.__generator||function(t,e){function n(n){return function(i){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],o=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,i])}}var r,o,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(e,"__esModule",{value:!0});var l=n("fpai"),f=n("1S1d"),d=n("WQ8k");e.getWebGLContextAttributes=r,e.createWebGLContext=function(t){var e,n={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};return e=null!=t?d.createWebGLRenderingContextFromCanvas(t,n):d.createWebGLRenderingContext(n),d.callAndCheck(e,function(){return e.disable(e.DEPTH_TEST)}),d.callAndCheck(e,function(){return e.disable(e.STENCIL_TEST)}),d.callAndCheck(e,function(){return e.disable(e.BLEND)}),d.callAndCheck(e,function(){return e.disable(e.DITHER)}),d.callAndCheck(e,function(){return e.disable(e.POLYGON_OFFSET_FILL)}),d.callAndCheck(e,function(){return e.disable(e.SAMPLE_COVERAGE)}),d.callAndCheck(e,function(){return e.enable(e.SCISSOR_TEST)}),d.callAndCheck(e,function(){return e.enable(e.CULL_FACE)}),d.callAndCheck(e,function(){return e.cullFace(e.BACK)}),e},e.createVertexShader=function(t){return d.createVertexShader(t,"\n    precision highp float;\n    attribute vec3 clipSpacePos;\n    attribute vec2 uv;\n    varying vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")},e.createVertexBuffer=function(t){var e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return d.createStaticVertexBuffer(t,e)},e.createIndexBuffer=function(t){var e=new Uint16Array([0,1,2,2,1,3]);return d.createStaticIndexBuffer(t,e)},e.createMatrixTexture=function(t,e,n){var r=f.getUnpackedMatrixTextureShapeWidthHeight(e,n);return i(t,r[0],r[1],1)},e.createColorMatrixTexture=function(t,e,n){var r=f.getColorMatrixTextureShapeWidthHeight(e,n);return i(t,r[0],r[1],4)},e.createPackedMatrixTexture=function(t,e,n){var r=f.getPackedMatrixTextureShapeWidthHeight(e,n);return i(t,r[0],r[1],4)},e.bindVertexProgramAttributeStreams=function(t,e,n,r){d.callAndCheck(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,n)}),d.bindVertexBufferToProgramAttribute(t,e,"clipSpacePos",n,3,20,0,r),d.bindVertexBufferToProgramAttribute(t,e,"uv",n,2,20,12,r)},e.uploadPixelDataToTexture=function(t,e,n){d.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,e)}),d.callAndCheck(t,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)}),d.callAndCheck(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})},e.uploadMatrixToTexture=function(t,e,n,r,o,a){var i,u=f.getUnpackedMatrixTextureShapeWidthHeight(n,r),c=u[0],p=u[1];if(l.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")){var h=1===a?d.getChannelsPerTexture():a;1===h?i=o:(i=new Float32Array(f.getUnpackedArraySizeFromMatrixSize(o.length,h)),f.encodeMatrixToUnpackedArray(o,i,h))}else i=f.encodeFloatArray(o);s(t,e,c,p,i,a)},e.uploadMatrixToPackedTexture=function(t,e,n,r,o){var a=f.getPackedMatrixTextureShapeWidthHeight(n,r),i=a[0],u=a[1],c=new Float32Array(f.getPackedRGBAArraySizeFromMatrixShape(n,r));f.encodeMatrixToPackedRGBA(o,n,r,c),s(t,e,i,u,c,4)},e.downloadMatrixFromOutputTextureAsync=function(t,e,n,r){return p(this,void 0,void 0,function(){var o,i,s,p,l;return h(this,function(h){switch(h.label){case 0:return o=t,i=4,s=u(n,r,i),p=s instanceof Float32Array?4*s.length:s,l=t.createBuffer(),d.callAndCheck(t,function(){return t.bindBuffer(o.PIXEL_PACK_BUFFER,l)}),d.callAndCheck(t,function(){return t.bufferData(o.PIXEL_PACK_BUFFER,p,t.STATIC_DRAW)}),d.callAndCheck(t,function(){return o.readPixels(0,0,r,n,t.RGBA,a(t),0)}),[4,e.getBufferSubDataAsync(o.PIXEL_PACK_BUFFER,0,s)];case 1:return h.sent(),[2,c(s,n,r,i)]}})})},e.downloadMatrixFromOutputTexture=function(t,e,n){var r=f.getUnpackedMatrixTextureShapeWidthHeight(e,n),o=r[0],i=r[1],s=u(e,n,4);return d.callAndCheck(t,function(){return t.readPixels(0,0,o,i,t.RGBA,a(t),s)}),c(s,e,n,4)},e.downloadMatrixFromRGBAColorTexture=function(t,e,n,r){var o=e*n*4,a=new Uint8Array(o);d.callAndCheck(t,function(){return t.readPixels(0,0,n,e,t.RGBA,t.UNSIGNED_BYTE,a)});for(var i=new Float32Array(o),s=0;s<a.length;s++)i[s]=a[s];var u=new Float32Array(e*n*r);return f.decodeMatrixFromUnpackedColorRGBAArray(i,u,r),u},e.downloadMatrixFromPackedOutputTexture=function(t,e,n){var r=f.getPackedMatrixTextureShapeWidthHeight(e,n),o=r[0],i=r[1],s=new Float32Array(f.getPackedRGBAArraySizeFromMatrixShape(e,n));d.callAndCheck(t,function(){return t.readPixels(0,0,o,i,t.RGBA,a(t),s)});var u=new Float32Array(e*n);return f.decodeMatrixFromPackedRGBA(s,e,n,u)}},M0xE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("lYtQ"),o=function(){return function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),o=0;o<n.length;o++)n[o]=t[o]*e[o];this.outputShape=n,this.rank=n.length;var a=r.getCoordsDataType(this.rank),i=function(t){var e=t.length;if(e>4)throw Error("Tile for rank "+e+" is not yet supported");if(1===e)return"imod(resRC, "+t[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],o=0;o<t.length;o++)r.push("imod("+n[o]+", "+t[o]+")");return r.join()}(t);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "}}();e.TileProgram=o},"M1+U":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("kiVh");e.ADD="return a + b;",e.SUB="return a - b;",e.MUL="return a * b;",e.DIV="return a / b;",e.POW="\n  return (round(mod(b, 2.0)) == 0 || round(mod(b, 2.0)) == 2) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.EQUAL="\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n  return float(a == b);\n",e.PRELU="\n  return (a >= 0.0) ? a : b * a;\n",e.PRELU_DER="\n  return (a > 0.0) ? 1.0 : ((a < 0.0) ? b : a);\n";var o=function(){return function(t,e,n){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.outputShape=r.assertAndGetBroadcastShape(e,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+t+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "}}();e.BinaryOpProgram=o},M6a0:function(t,e){},MU5D:function(t,e,n){var r=n("R9M2");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},Mhyx:function(t,e,n){var r=n("/bQp"),o=n("dSzd")("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||a[o]===t)}},MmMw:function(t,e,n){var r=n("EqjI");t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},"NWt+":function(t,e,n){var r=n("+ZMJ"),o=n("msXi"),a=n("Mhyx"),i=n("77Pl"),s=n("QRG4"),u=n("3fs2"),c={},p={};(e=t.exports=function(t,e,n,h,l){var f,d,v,y,m=l?function(){return t}:u(t),g=r(n,h,e?2:1),x=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(a(m)){for(f=s(t.length);f>x;x++)if((y=e?g(i(d=t[x])[0],d[1]):g(t[x]))===c||y===p)return y}else for(v=m.call(t);!(d=v.next()).done;)if((y=o(v,g,d.value,e))===c||y===p)return y}).BREAK=c,e.RETURN=p},O4g8:function(t,e){t.exports=!0},ON07:function(t,e,n){var r=n("EqjI"),o=n("7KvD").document,a=r(o)&&r(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},P58p:function(t,e,n){"use strict";function r(t,e,n,r,a,s){void 0===a&&(a=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],c=u[0],p=u[1],h=u[2],l=u[3];if("channelsLast"===s)c=t[0],p=t[1],h=t[2],l=t[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);c=t[0],l=t[1],p=t[2],h=t[3]}var f,d=e[0],v=e[1],y=e[3],m=i(n),g=m[0],x=m[1],b=function(t,e,n,r,a,i,s){var u,c,p;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t};var h=o([e,n,1],i,1,r,t);c=h[0],p=h[1]}else if("same"===t){c=Math.ceil(e/r),p=Math.ceil(n/a);var l=(c-1)*r+i-e,f=(p-1)*a+s-n,d=Math.floor(l/2),v=l-d,y=Math.floor(f/2),m=f-y;u={top:d,bottom:v,left:y,right:m}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);u={top:0,bottom:0,left:0,right:0},c=Math.ceil((e-i+1)/r),p=Math.ceil((n-s+1)/a)}return{padInfo:u,outHeight:c,outWidth:p}}(r,p,h,g,x,d,v),w=b.padInfo,E=b.outHeight,A=b.outWidth,T=a?y*l:y;return"channelsFirst"===s?f=[c,T,E,A]:"channelsLast"===s&&(f=[c,E,A,T]),{batchSize:c,dataFormat:s,inHeight:p,inWidth:h,inChannels:l,outHeight:E,outWidth:A,outChannels:T,padInfo:w,strideHeight:g,strideWidth:x,filterHeight:d,filterWidth:v,inShape:t,outShape:f,filterShape:e}}function o(t,e,n,r,o){null==o&&(o=a(t,e,r));var i=t[0],u=t[1],c=(i-e+2*o)/r+1;s.assert(s.isInt(c),"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters");var p=(u-e+2*o)/r+1;return s.assert(s.isInt(p),"The output # of columns ("+p+") must be an integer. Change the stride and/or zero pad parameters"),[c,p,n]}function a(t,e,n){return Math.floor((t[0]*(n-1)-n+e)/2)}function i(t){return"number"==typeof t?[t,t]:t}Object.defineProperty(e,"__esModule",{value:!0});var s=n("jMY8");e.computePool2DInfo=function(t,e,n,o,a){void 0===a&&(a="channelsLast");var s,u=i(e),c=u[0],p=u[1];if("channelsLast"===a)s=[c,p,t[3],t[3]];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);s=[c,p,t[1],t[1]]}return r(t,s,n,o,!1,a)},e.computeConv2DInfo=r,e.computeOutputShape3D=o,e.computeDefaultPad=a,e.computeWeightsShape4D=function(t,e,n,r){return[n,r,t,e]},e.computeDilatedRC=function(t,e){return[(t[0]-1)*e+1,(t[1]-1)*e+1]}},PzxK:function(t,e,n){var r=n("D2L2"),o=n("sB3e"),a=n("ax3d")("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?i:null}},QLAB:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("jMY8"),a=n("yNpf"),i=function(t){function e(e,n,r){var a=t.call(this)||this;return a.x1Tensor=e,a.x2Tensor=n,a.yTensor=r,o.assert(1===o.sizeFromShape(e.shape)||1===o.sizeFromShape(n.shape)||o.arraysEqual(e.shape,n.shape),"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape"),a}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),a=e.get(this.x2Tensor);t.scope(function(i){var s;s=o.isScalarShape(r.shape)?t.scalarTimesArray(r,a):o.isScalarShape(a.shape)?t.scalarTimesArray(a,r):t.elementWiseMul(r,a),e.set(n.yTensor,i(s))})},e.prototype.backProp=function(t,e,n){var r=this,i=e.get(this.x1Tensor),s=e.get(this.x2Tensor),u=n.get(this.yTensor);t.scope(function(){if(a.shouldBackProp(r.x1Tensor))if(o.isScalarShape(r.x1Tensor.shape)){var e=t.elementWiseMul(u,s);n.add(r.x1Tensor,t.sum(e))}else o.isScalarShape(s.shape)?n.add(r.x1Tensor,t.scalarTimesArray(s,u)):n.add(r.x1Tensor,t.elementWiseMul(s,u));if(a.shouldBackProp(r.x2Tensor))if(o.isScalarShape(r.x2Tensor.shape)){e=t.elementWiseMul(u,i);n.add(r.x2Tensor,t.sum(e))}else o.isScalarShape(i.shape)?n.add(r.x2Tensor,t.scalarTimesArray(i,u)):n.add(r.x2Tensor,t.elementWiseMul(i,u))})},e}(n("/ROS").Operation);e.Multiply=i},QRG4:function(t,e,n){var r=n("UuGF"),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},QtZe:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n){var r=t.call(this)||this;return r.xTensor=e,r.yTensor=n,r}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.xTensor);t.scope(function(o){e.set(n.yTensor,o(t.argMax(r)))})},e.prototype.backProp=function(t,e,n){throw new Error("ArgMax backprop unimplemented")},e}(n("/ROS").Operation);e.ArgMax=o},QwX8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+e+" - "+r+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();e.Conv2DDerFilterProgram=r;var o=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=n-1-t.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();e.Conv2DDerInputProgram=o;var a=function(){return function(t){this.variableNames=["dy"];var e=t[0],n=t[1],r=t[2],o=t[3];this.outputShape=[o],this.userCode="\n      void main() {\n        int d2 = getOutputCoords();\n\n        float derBias = 0.0;\n        for (int b = 0; b < "+e+"; b++) {\n          for (int yR = 0; yR < "+n+"; yR++) {\n            for (int yC = 0; yC < "+r+"; yC++) {\n              derBias += getDy(b, yR, yC, d2);\n            }\n          }\n        }\n        setOutput(derBias);\n      }\n    "}}();e.Conv2DDerBiasProgram=a},R9M2:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},ROF2:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("BozM"),a=n("FSI1"),i=function(t){function e(e,n,r){var i=t.call(this,e,r)||this;return i.learningRate=e,i.gamma=n,i.accumulatedSquaredGradients=new a.TensorArrayMap,i.accumulatedUpdates=new a.TensorArrayMap,i.eps=o.Scalar.new(1e-6),i.g=o.Scalar.new(i.gamma),i}return r(e,t),e.prototype.beforeBatch=function(e,n,r,a,i){var s=this;t.prototype.beforeBatch.call(this,e,n,r,a,i),0===this.accumulatedSquaredGradients.size()&&this.variableNodes.forEach(function(t){s.accumulatedSquaredGradients.set(t.output,o.NDArray.zeros(t.output.shape)),s.accumulatedUpdates.set(t.output,o.NDArray.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,n,r,o){var i=this;t.scope(function(e){i.variableNodes.forEach(function(n){var o=r.get(n.output),a=i.variableGradients.get(n.output),s=i.accumulatedSquaredGradients.get(n.output),u=i.accumulatedUpdates.get(n.output),c=t.multiply(a,a),p=t.scaledArrayAdd(i.g,s,t.subtract(i.one,i.g),c),h=t.multiply(t.divide(t.sqrt(t.add(u,i.eps)),t.sqrt(t.add(s,i.eps))),a),l=t.scaledArrayAdd(i.c,h,i.one,o),f=t.multiply(h,h),d=t.scaledArrayAdd(i.g,u,t.subtract(i.one,i.g),f);i.accumulatedSquaredGradients.set(n.output,e(p)),i.accumulatedUpdates.set(n.output,e(d)),r.set(n.output,e(l)),n.data=l,o.dispose(),s.dispose(),u.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new a.TensorArrayMap},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.eps.dispose(),this.g.dispose(),this.accumulatedSquaredGradients.dispose(),this.accumulatedUpdates.dispose()},e}(n("qhzv").Optimizer);e.AdadeltaOptimizer=i},RPLV:function(t,e,n){var r=n("7KvD").document;t.exports=r&&r.documentElement},"RY/4":function(t,e,n){var r=n("R9M2"),o=n("dSzd")("toStringTag"),a="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?r(e):"Object"==(i=r(e))&&"function"==typeof e.callee?"Arguments":i}},Rx9u:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("jMY8"),a=n("yNpf"),i=function(t){function e(e,n,r){var a=t.call(this)||this;return a.x1Tensor=e,a.x2Tensor=n,a.yTensor=r,o.assert(1===o.sizeFromShape(e.shape)||1===o.sizeFromShape(n.shape)||o.arraysEqual(e.shape,n.shape)||2===e.shape.length&&1===n.shape.length&&e.shape[1]===n.shape[0]||1===e.shape.length&&2===n.shape.length&&e.shape[0]===n.shape[1],"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape, or one of them can be broadcasted (2D and 1D)."),a}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),a=e.get(this.x2Tensor);t.scope(function(i){var s;s=o.isScalarShape(r.shape)?t.scalarPlusArray(r,a):o.isScalarShape(a.shape)?t.scalarPlusArray(a,r):t.add(r,a),e.set(n.yTensor,i(s))})},e.prototype.backProp=function(t,e,n){var r=this,i=n.get(this.yTensor);t.scope(function(){if(a.shouldBackProp(r.x1Tensor))if(1===r.x1Tensor.shape.length&&2===r.x2Tensor.shape.length&&r.x1Tensor.shape[0]===r.x2Tensor.shape[1]){var e=t.sum(i,0);n.add(r.x1Tensor,e)}else if(o.isScalarShape(r.x1Tensor.shape)){e=t.sum(i);n.add(r.x1Tensor,e)}else n.add(r.x1Tensor,t.clone(i));if(a.shouldBackProp(r.x2Tensor))if(2===r.x1Tensor.shape.length&&1===r.x2Tensor.shape.length&&r.x1Tensor.shape[1]===r.x2Tensor.shape[0]){e=t.sum(i,0);n.add(r.x2Tensor,e)}else if(o.isScalarShape(r.x2Tensor.shape)){e=t.sum(i);n.add(r.x2Tensor,e)}else n.add(r.x2Tensor,t.clone(i))})},e.prototype.dispose=function(){null!=this.dySizeScalar&&this.dySizeScalar.dispose()},e}(n("/ROS").Operation);e.Add=i},S82l:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},SfB7:function(t,e,n){t.exports=!n("+E39")&&!n("S82l")(function(){return 7!=Object.defineProperty(n("ON07")("div"),"a",{get:function(){return 7}}).a})},SldL:function(t,e){!function(e){"use strict";function n(t,e,n,a){var i=e&&e.prototype instanceof o?e:o,s=Object.create(i.prototype),u=new l(a||[]);return s._invoke=function(t,e,n){var o=T;return function(a,i){if(o===_)throw new Error("Generator is already running");if(o===M){if("throw"===a)throw i;return d()}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=c(s,n);if(u){if(u===N)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===T)throw o=M,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=_;var p=r(t,e,n);if("normal"===p.type){if(o=n.done?M:S,p.arg===N)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=M,n.method="throw",n.arg=p.arg)}}}(t,n,u),s}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function o(){}function a(){}function i(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function e(n,o,a,i){var s=r(t[n],t,o);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&m.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,a,i)},function(t){e("throw",t,a,i)}):Promise.resolve(c).then(function(t){u.value=t,a(u)},i)}i(s.arg)}var n;this._invoke=function(t,r){function o(){return new Promise(function(n,o){e(t,r,n,o)})}return n=n?n.then(o,o):o()}}function c(t,e){var n=t.iterator[e.method];if(n===v){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=v,c(t,e),"throw"===e.method))return N;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return N}var o=r(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,N;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=v),e.delegate=null,N):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,N)}function p(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function h(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function l(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(p,this),this.reset(!0)}function f(t){if(t){var e=t[x];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(m.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=v,e.done=!0,e};return r.next=r}}return{next:d}}function d(){return{value:v,done:!0}}var v,y=Object.prototype,m=y.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},x=g.iterator||"@@iterator",b=g.asyncIterator||"@@asyncIterator",w=g.toStringTag||"@@toStringTag",E="object"==typeof t,A=e.regeneratorRuntime;if(A)E&&(t.exports=A);else{(A=e.regeneratorRuntime=E?t.exports:{}).wrap=n;var T="suspendedStart",S="suspendedYield",_="executing",M="completed",N={},k={};k[x]=function(){return this};var C=Object.getPrototypeOf,O=C&&C(C(f([])));O&&O!==y&&m.call(O,x)&&(k=O);var R=i.prototype=o.prototype=Object.create(k);a.prototype=R.constructor=i,i.constructor=a,i[w]=a.displayName="GeneratorFunction",A.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},A.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,i):(t.__proto__=i,w in t||(t[w]="GeneratorFunction")),t.prototype=Object.create(R),t},A.awrap=function(t){return{__await:t}},s(u.prototype),u.prototype[b]=function(){return this},A.AsyncIterator=u,A.async=function(t,e,r,o){var a=new u(n(t,e,r,o));return A.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},s(R),R[w]="Generator",R[x]=function(){return this},R.toString=function(){return"[object Generator]"},A.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},A.values=f,l.prototype={constructor:l,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(h),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=v)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,r){return a.type="throw",a.arg=t,n.next=e,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var i=m.call(o,"catchLoc"),s=m.call(o,"finallyLoc");if(i&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,N):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),N},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),h(n),N}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;h(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:f(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=v),N}}}}(function(){return this}()||Function("return this")())},SumV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("lYtQ"),o=function(){function t(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e=r.getCoordsDataType(this.rank),n=function(t){if(1===t)return"sourceLoc";if(2===t)return"sourceLoc.x, sourceLoc.y";if(3===t)return"sourceLoc.x, sourceLoc.y, sourceLoc.z";if(4===t)return"sourceLoc.x, sourceLoc.y, sourceLoc.z, sourceLoc.w";throw Error("Slicing for rank "+t+" is not yet supported")}(this.rank);this.userCode="\n      uniform "+e+" start;\n\n      void main() {\n        "+e+" sourceLoc = start + getOutputCoords();\n        setOutput(getSource("+n+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){if(null!=e.startLoc||(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null!=e.startLoc))if(1===e.rank)n.gl.uniform1i(e.startLoc,t[0]);else if(2===e.rank)n.gl.uniform2i(e.startLoc,t[0],t[1]);else if(3===e.rank)n.gl.uniform3i(e.startLoc,t[0],t[1],t[2]);else{if(4!==e.rank)throw Error("Slicing for rank "+e.rank+" is not yet supported");n.gl.uniform4i(e.startLoc,t[0],t[1],t[2],t[3])}}},t}();e.SliceProgram=o},T9Dr:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("BozM"),a=n("FSI1"),i=function(t){function e(e,n,r){var i=t.call(this,e,r)||this;return i.learningRate=e,i.gamma=n,i.accumulatedSquaredGradients=new a.TensorArrayMap,i.eps=o.Scalar.new(1e-6),i.g=o.Scalar.new(i.gamma),i}return r(e,t),e.prototype.beforeBatch=function(e,n,r,a,i){var s=this;t.prototype.beforeBatch.call(this,e,n,r,a,i),0===this.accumulatedSquaredGradients.size()&&this.variableNodes.forEach(function(t){s.accumulatedSquaredGradients.set(t.output,o.NDArray.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,n,r,o){var i=this;t.scope(function(e){i.variableNodes.forEach(function(n){var o=r.get(n.output),a=i.variableGradients.get(n.output),s=i.accumulatedSquaredGradients.get(n.output),u=t.multiply(a,a),c=t.scaledArrayAdd(i.g,s,t.subtract(i.one,i.g),u),p=t.scaledArrayAdd(i.c,t.divide(a,t.add(t.sqrt(c),i.eps)),i.one,o);i.accumulatedSquaredGradients.set(n.output,e(c)),r.set(n.output,e(p)),n.data=p,o.dispose(),s.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new a.TensorArrayMap},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.eps.dispose(),this.g.dispose(),this.accumulatedSquaredGradients.dispose()},e}(n("qhzv").Optimizer);e.RMSPropOptimizer=i},TcQ7:function(t,e,n){var r=n("MU5D"),o=n("52gC");t.exports=function(t){return r(o(t))}},Tu3E:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("jMY8"),a=function(t){function e(e,n){var r=t.call(this)||this;r.xTensor=e,r.yTensor=n;var a=o.sizeFromShape(e.shape),i=o.sizeFromShape(n.shape);return o.assert(a===i,"The input size ("+a+") and output size ("+i+") must match"),r}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.xTensor),o=t.clone(r);t.scope(function(t){e.set(n.yTensor,t(o.reshape(n.yTensor.shape)))})},e.prototype.backProp=function(t,e,n){var r=this,o=n.get(this.yTensor),a=t.clone(o);t.scope(function(){n.add(r.xTensor,a.reshape(r.xTensor.shape))})},e}(n("/ROS").Operation);e.Reshape=a},U5ju:function(t,e,n){n("M6a0"),n("zQR9"),n("+tPU"),n("CXw9"),n("EqBC"),n("jKW+"),t.exports=n("FeBl").Promise},UuGF:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},VOQS:function(t,e,n){(function(t){var r;!function(t,o,a){function i(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function s(t,e){var n=new function(t){var e=this,n=function(){var t=4022871197;return function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}(t),r=e&&e.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+1.1102230246251565e-16*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n("LGuY")&&n("nErl")?void 0===(r=function(){return s}.call(e,n,e,o))||(o.exports=r):this.alea=s}(0,"object"==typeof t&&t,n("LGuY"))}).call(e,n("3IRH")(t))},WQ8k:function(t,e,n){"use strict";function r(t,e){var n,r=d.ENV.get("WEBGL_VERSION");if(2===r?n=t.getContext("webgl2",e):1===r&&(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)),0===r||null==n)throw new Error("This browser does not support WebGL.");return n}function o(t,e){var n=e();return a(t),n}function a(t){if(v){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+i(t,e))}}function i(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function s(t){return null!=l?l:l=o(t,function(){return t.getParameter(t.MAX_TEXTURE_SIZE)})}function u(t,e,n){h(t,n),o(t,function(){return t.activeTexture(t.TEXTURE0+n)}),o(t,function(){return t.bindTexture(t.TEXTURE_2D,e)})}function c(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function p(t,e,n){var r=o(t,function(){return e()});if(null==r)throw new Error(n);return r}function h(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){var o="[gl.TEXTURE0, gl.TEXTURE"+n+"]";throw new Error("textureUnit must be in "+o+".")}}Object.defineProperty(e,"__esModule",{value:!0});var l=null,f=n("jMY8"),d=n("fpai");e.createWebGLRenderingContext=function(t){var e=document.createElement("canvas");return e.width=1,e.height=1,r(e,t)},e.createWebGLRenderingContextFromCanvas=r,e.callAndCheck=o;var v=!1;e.enableDebugWebGLErrorChecking=function(t){v=t},e.checkWebGLError=a,e.getWebGLErrorMessage=i,e.getExtensionOrThrow=function(t,e){return p(t,function(){return t.getExtension(e)},'Extension "'+e+'" not supported on this browser.')},e.createVertexShader=function(t,e){var n=p(t,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(o(t,function(){return t.shaderSource(n,e)}),o(t,function(){return t.compileShader(n)}),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n},e.createFragmentShader=function(t,e){var n=p(t,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(o(t,function(){return t.shaderSource(n,e)}),o(t,function(){return t.compileShader(n)}),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw function(t,e){var n=y.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);for(var r=+n[1],o=t.split("\n"),a=o.length.toString().length+2,i=o.map(function(t,e){return f.rightPad((e+1).toString(),a)+t}),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var c=i.slice(0,r-1),p=i.slice(r-1,r),h=i.slice(r);console.log(c.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+f.rightPad(p[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n};var y=/ERROR: [0-9]+:([0-9]+):/g;e.createProgram=function(t){return p(t,function(){return t.createProgram()},"Unable to create WebGLProgram.")},e.linkProgram=function(t,e){if(o(t,function(){return t.linkProgram(e)}),!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")},e.validateProgram=function(t,e){if(o(t,function(){return t.validateProgram(e)}),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")},e.createStaticVertexBuffer=function(t,e){var n=p(t,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return o(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,n)}),o(t,function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}),n},e.createStaticIndexBuffer=function(t,e){var n=p(t,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return o(t,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)}),o(t,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}),n},e.queryMaxTextureSize=s,e.getChannelsPerTexture=function(){return d.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")&&2===d.ENV.get("WEBGL_VERSION")?1:4},e.createTexture=function(t){return p(t,function(){return t.createTexture()},"Unable to create WebGLTexture.")},e.validateTextureSize=function(t,e,n){var r=s(t);if(e<=0||n<=0){var o="["+e+"x"+n+"]";throw new Error("Requested texture size "+o+" is invalid.")}if(e>r||n>r){o="["+e+"x"+n+"]";var a="["+r+"x"+r+"]";throw new Error("Requested texture size "+o+" greater than WebGL maximum on this browser / GPU "+a+".")}},e.createFramebuffer=function(t){return p(t,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")},e.bindVertexBufferToProgramAttribute=function(t,e,n,r,a,i,s,u){var c=-1;-1!==(c=null!=u&&n in u?u[n]:t.getAttribLocation(e,n))&&(o(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),o(t,function(){return t.vertexAttribPointer(c,a,t.FLOAT,!1,i,s)}),o(t,function(){return t.enableVertexAttribArray(c)}))},e.bindTextureUnit=u,e.unbindTextureUnit=function(t,e){h(t,e),o(t,function(){return t.activeTexture(t.TEXTURE0+e)}),o(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})},e.getProgramUniformLocationOrThrow=function(t,e,n){return p(t,function(){return t.getUniformLocation(e,n)},'uniform "'+n+'" not present in program.')},e.bindTextureToProgramUniformSampler=function(t,e,n,r,a){o(t,function(){return u(t,n,a)}),o(t,function(){return t.uniform1i(r,a)})},e.bindCanvasToFramebuffer=function(t){o(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),o(t,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),o(t,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},e.bindColorTextureToFramebuffer=function(t,e,n){o(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),o(t,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)})},e.unbindColorTextureFromFramebuffer=function(t,e){o(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)}),o(t,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})},e.validateFramebuffer=function(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+c(t,e))},e.getFramebufferErrorMessage=c,e.getTextureShapeFromLogicalShape=function(t,e){2!==e.length&&(e=f.squeezeShape(e).newShape);var n=s(t),r=f.sizeFromShape(e);return e.length<=1&&r<=n?[r,1]:2===e.length&&e[0]<=n&&e[1]<=n?e:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?[e[0],e[1]*e[2]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n?[e[0],e[1]*e[2]*e[3]]:f.sizeToSquarishShape(r)}},X8DO:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},XGXz:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("yNpf"),a=function(t){function e(e,n){var r=t.call(this)||this;return r.xTensor=e,r.yTensor=n,r}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.xTensor);t.scope(function(o){e.set(n.yTensor,o(t.exp(r)))})},e.prototype.backProp=function(t,e,n){var r=this,a=e.get(this.yTensor),i=n.get(this.yTensor);t.scope(function(){o.shouldBackProp(r.xTensor)&&n.add(r.xTensor,t.elementWiseMul(a,i))})},e}(n("/ROS").Operation);e.Exp=a},XZBy:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(e-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(e-1)+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.seedLoc&&(e.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(e.seedLoc,t)}},t}();e.MultinomialProgram=r},Xd32:function(t,e,n){n("+tPU"),n("zQR9"),t.exports=n("5PlU")},Xkia:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("BozM"),o=n("jMY8"),a=function(){function t(t){this.dataShapes=t,this.normalizationInfo={}}return t.prototype.getDataShape=function(t){return this.dataShapes[t]},t.prototype.getData=function(){return this.dataset},t.prototype.getStats=function(){var t=this;if(null==this.dataset)throw new Error("Data is null.");return this.dataset.map(function(e){return t.getStatsForData(e)})},t.prototype.getStatsForData=function(t){var e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=t.map(function(t,e){return e});o.shuffle(r),r=r.slice(.1*r.length);for(var a=0;a<r.length;a++)for(var i=t[r[a]].getValues(),s=0;s<i.length;s++)e=Math.min(e,i[s]),n=Math.max(n,i[s]);return{inputMin:e,inputMax:n,exampleCount:t.length,shape:t[0].shape}},t.prototype.normalizeExamplesToRange=function(t,e,n,a,i){var s=n instanceof Float32Array&&e instanceof Float32Array,u=a instanceof Float32Array&&i instanceof Float32Array,c=o.sizeFromShape(t[0].shape),p=[];return t.forEach(function(t){for(var o=t.getValues(),h=new Float32Array(c),l=0;l<c;l++){var f=s?e[l]:e,d=(s?n[l]:n)-f,v=u?a[l]:a,y=(u?i[l]:i)-v;h[l]=0===d?v:v+y*(o[l]-f)/d}p.push(r.NDArray.make(t.shape,{values:h},"float32"))}),p},t.prototype.computeBounds=function(t){var e=this;if(null==this.dataset)throw new Error("Data is null.");var n=o.sizeFromShape(this.dataset[t][0].shape);this.normalizationInfo[t]={isNormalized:!1,minValues:new Float32Array(n),maxValues:new Float32Array(n)};for(var r=0;r<n;r++)this.normalizationInfo[t].minValues[r]=Number.POSITIVE_INFINITY,this.normalizationInfo[t].maxValues[r]=Number.NEGATIVE_INFINITY;this.dataset[t].forEach(function(r){for(var o=r.getValues(),a=0;a<n;a++)e.normalizationInfo[t].minValues[a]=Math.min(e.normalizationInfo[t].minValues[a],o[a]),e.normalizationInfo[t].maxValues[a]=Math.max(e.normalizationInfo[t].maxValues[a],o[a])})},t.prototype.normalizeWithinBounds=function(t,e,n){if(null==this.dataset)throw new Error("Data is null.");if(t>=this.dataset.length)throw new Error("dataIndex out of bounds.");null==this.normalizationInfo[t]&&this.computeBounds(t);var r,o;this.normalizationInfo[t].isNormalized?(r=this.normalizationInfo[t].lowerBound,o=this.normalizationInfo[t].upperBound):(r=this.normalizationInfo[t].minValues,o=this.normalizationInfo[t].maxValues),this.dataset[t]=this.normalizeExamplesToRange(this.dataset[t],r,o,e,n),this.normalizationInfo[t].isNormalized=!0,this.normalizationInfo[t].lowerBound=e,this.normalizationInfo[t].upperBound=n},t.prototype.isNormalized=function(t){return null!=this.normalizationInfo&&this.normalizationInfo[t].isNormalized},t.prototype.removeNormalization=function(t){if(null==this.dataset)throw new Error("Training or test data is null.");this.isNormalized(t)&&(this.dataset[t]=this.normalizeExamplesToRange(this.dataset[t],this.normalizationInfo[t].lowerBound,this.normalizationInfo[t].upperBound,this.normalizationInfo[t].minValues,this.normalizationInfo[t].maxValues),this.normalizationInfo[t].isNormalized=!1)},t.prototype.unnormalizeExamples=function(t,e){return this.isNormalized(e)?this.normalizeExamplesToRange(t,this.normalizationInfo[e].lowerBound,this.normalizationInfo[e].upperBound,this.normalizationInfo[e].minValues,this.normalizationInfo[e].maxValues):t},t.prototype.dispose=function(){if(null!=this.dataset){for(var t=0;t<this.dataset.length;t++)for(var e=0;e<this.dataset[t].length;e++)this.dataset[t][e].dispose();this.dataset=[]}},t}();e.InMemoryDataset=a},Xxa5:function(t,e,n){t.exports=n("jyFz")},Y78X:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.seedLoc&&(e.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(e.seedLoc,t)}},t}();e.OneHotProgram=r},Yobk:function(t,e,n){var r=n("77Pl"),o=n("qio6"),a=n("xnc9"),i=n("ax3d")("IE_PROTO"),s=function(){},u=function(){var t,e=n("ON07")("iframe"),r=a.length;for(e.style.display="none",n("RPLV").appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[a[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[i]=t):n=u(),void 0===e?n:o(n,e)}},Z92E:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){function n(n){return function(i){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],o=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,i])}}var r,o,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(e,"__esModule",{value:!0});var i=n("H/Ud"),s=n("fpai"),u=n("jMY8"),c=n("kiVh"),p=n("9RhS"),h=n("02A5"),l=n("BozM"),f=n("KCc1"),d=n("KCc1"),v=n("eYNA"),y=n("65Fz"),m=function(){function t(){this.data={}}return t.prototype.dispose=function(){},t.prototype.write=function(t,e,n,r){this.data[t]=e},t.prototype.writePixels=function(t,e,n){var r;if(e instanceof ImageData)r=e.data;else if(e instanceof HTMLCanvasElement)r=e.getContext("2d").getImageData(0,0,e.width,e.height).data;else{if(!(e instanceof HTMLImageElement||e instanceof HTMLVideoElement))throw new Error("pixels is of unknown type: "+e.constructor.name);var o=document.createElement("canvas");o.width=e.width,o.height=e.height,o.getContext("2d").drawImage(e,0,0,o.width,o.height),r=o.getContext("2d").getImageData(0,0,o.width,o.height).data}var a;if(4===n)a=new Int32Array(r);else{var i=e.width*e.height;a=new Int32Array(i*n);for(var s=0;s<i;s++)for(var u=0;u<n;++u)a[s*n+u]=r[4*s+u]}this.data[t]=a},t.prototype.read=function(t){return o(this,void 0,void 0,function(){return a(this,function(e){return this.throwIfNoData(t),[2,this.data[t]]})})},t.prototype.readSync=function(t){return this.throwIfNoData(t),this.data[t]},t.prototype.disposeData=function(t){delete this.data[t]},t.prototype.time=function(t){return o(this,void 0,void 0,function(){var e;return a(this,function(n){return e=performance.now(),t(),[2,performance.now()-e]})})},t.prototype.throwIfNoData=function(t){if(!(t in this.data))throw new Error("No data found for NDArray with id "+t+". Use dl.ENV.math instead of constructing your own NDArrayMath. If you need to construct your own math, make sure this array is allocated after the math construction")},t.prototype.clone=function(t){return l.NDArray.make(t.shape,{values:new Float32Array(t.getValues())})},t.prototype.slice1D=function(t,e,n){var r=t.getValues().slice(e,e+n);return l.Array1D.new(r)},t.prototype.slice2D=function(t,e,n){for(var r=l.Array2D.zeros(n),o=e[0],a=e[1],i=0;i<n[0];++i)for(var s=0;s<n[1];++s){var u=t.get(i+o,s+a);r.set(u,i,s)}return r},t.prototype.slice3D=function(t,e,n){for(var r=l.Array3D.zeros(n),o=e[0],a=e[1],i=e[2],s=0;s<n[0];++s)for(var u=0;u<n[1];++u)for(var c=0;c<n[2];++c){var p=t.get(s+o,u+a,c+i);r.set(p,s,u,c)}return r},t.prototype.slice4D=function(t,e,n){for(var r=l.Array4D.zeros(n),o=e[0],a=e[1],i=e[2],s=e[3],u=0;u<n[0];++u)for(var c=0;c<n[1];++c)for(var p=0;p<n[2];++p)for(var h=0;h<n[3];++h){var f=t.get(u+o,c+a,p+i,h+s);r.set(f,u,c,p,h)}return r},t.prototype.concat1D=function(t,e){var n=p.computeOutShape(t.shape,e.shape,0),r=l.Array1D.zeros(n),o=t.getValues(),a=e.getValues(),i=r.getValues();return i.set(o,0),i.set(a,t.size),r},t.prototype.concat2D=function(t,e,n){var r=p.computeOutShape(t.shape,e.shape,n),o=l.Array2D.zeros(r);if(0===n){var a=t.getValues(),i=e.getValues(),s=o.getValues();return s.set(a,0),s.set(i,t.size),o}for(var u=0;u<r[0];++u)for(var c=0;c<r[1];++c){var h=[u,c],f=void 0;if(h[n]<t.shape[n])f=t.get(u,c);else{h[n]-=t.shape[n];var d=h[0],v=h[1];f=e.get(d,v)}o.set(f,u,c)}return o},t.prototype.concat3D=function(t,e,n){var r=p.computeOutShape(t.shape,e.shape,n),o=l.Array3D.zeros(r);if(0===n){var a=t.getValues(),i=e.getValues(),s=o.getValues();return s.set(a,0),s.set(i,t.size),o}for(var u=0;u<r[0];++u)for(var c=0;c<r[1];++c)for(var h=0;h<r[2];++h){var f=[u,c,h],d=void 0;if(f[n]<t.shape[n])d=t.get(u,c,h);else{f[n]-=t.shape[n];var v=f[0],y=f[1],m=f[2];d=e.get(v,y,m)}o.set(d,u,c,h)}return o},t.prototype.concat4D=function(t,e,n){var r=p.computeOutShape(t.shape,e.shape,n),o=l.Array4D.zeros(r);if(0===n){var a=t.getValues(),i=e.getValues(),s=o.getValues();return s.set(a,0),s.set(i,t.size),o}for(var u=0;u<r[0];++u)for(var c=0;c<r[1];++c)for(var h=0;h<r[2];++h)for(var f=0;f<r[3];++f){var d=[u,c,h,f],v=void 0;if(d[n]<t.shape[n])v=t.get(u,c,h,f);else{d[n]-=t.shape[n];var y=d[0],m=d[1],g=d[2],x=d[3];v=e.get(y,m,g,x)}o.set(v,u,c,h,f)}return o},t.prototype.neg=function(t){return this.multiply(l.Scalar.new(-1),t)},t.prototype.add=function(t,e){return this.broadcastedBinaryOp(t,e,f.upcastType(t.dtype,e.dtype),function(t,e){return t+e})},t.prototype.subtract=function(t,e){return this.broadcastedBinaryOp(t,e,f.upcastType(t.dtype,e.dtype),function(t,e){return t-e})},t.prototype.pow=function(t,e){return this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.pow(t,e)})},t.prototype.matMul=function(t,e,n,r){void 0===n&&(n=y.MatrixOrientation.REGULAR),void 0===r&&(r=y.MatrixOrientation.REGULAR);for(var o=n===y.MatrixOrientation.REGULAR?t.shape[1]:t.shape[0],a=n===y.MatrixOrientation.REGULAR?t.shape[0]:t.shape[1],i=r===y.MatrixOrientation.REGULAR?e.shape[1]:e.shape[0],s=function(t,e,n){return t.get(e,n)},u=function(t,e,n){return t.get(n,e)},c=n===y.MatrixOrientation.REGULAR?s:u,p=r===y.MatrixOrientation.REGULAR?s:u,h=new Float32Array(a*i),f=0,d=0;d<a;++d)for(var v=0;v<i;++v){for(var m=0,g=0;g<o;++g)m+=c(t,d,g)*p(e,g,v);h[f++]=m}return l.Array2D.new([a,i],h)},t.prototype.multiply=function(t,e){return this.broadcastedBinaryOp(t,e,f.upcastType(t.dtype,e.dtype),function(t,e){return t*e})},t.prototype.divide=function(t,e){return this.broadcastedBinaryOp(t,e,"float32",function(t,e){return t/e})},t.prototype.sum=function(t,e){v.assertAxesAreInnerMostDims("sum",e,t.rank);for(var n=v.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=d.SumTypesMap[t.dtype],i=l.NDArray.zeros(r,a),s=u.sizeFromShape(o),c=i.getValues(),p=t.getValues(),h=0;h<c.length;++h){for(var f=h*s,y=0,m=0;m<s;++m)y+=p[f+m];c[h]=y}return i},t.prototype.argMin=function(t,e){v.assertAxesAreInnerMostDims("argMin",e,t.rank);for(var n=v.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=l.NDArray.zeros(r,"int32"),i=u.sizeFromShape(o),s=a.getValues(),c=t.getValues(),p=0;p<s.length;++p){for(var h=p*i,f=c[h],d=0,y=0;y<i;++y){var m=c[h+y];if(isNaN(m)){d=u.NAN_INT32;break}m<f&&(f=m,d=y)}s[p]=d}return a},t.prototype.argMax=function(t,e){v.assertAxesAreInnerMostDims("argMax",e,t.rank);for(var n=v.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=l.NDArray.zeros(r,"int32"),i=u.sizeFromShape(o),s=a.getValues(),c=t.getValues(),p=0;p<s.length;++p){for(var h=p*i,f=c[h],d=0,y=0;y<i;++y){var m=c[h+y];if(isNaN(m)){d=u.NAN_INT32;break}m>f&&(f=m,d=y)}s[p]=d}return a},t.prototype.equal=function(t,e){return this.broadcastedBinaryOp(t,e,"bool",function(n,r){return u.isValNaN(n,t.dtype)||u.isValNaN(r,e.dtype)?u.getNaN("bool"):n===r?1:0})},t.prototype.topKValues=function(t,e){return this.topK(t,e).values},t.prototype.topKIndices=function(t,e){return this.topK(t,e).indices},t.prototype.topK=function(t,e){for(var n=t.getValues(),r=[],o=0;o<n.length;o++)r.push({value:n[o],index:o});r.sort(function(t,e){return e.value-t.value});var a=u.getTypedArrayFromDType(t.dtype,e),i=new Int32Array(e);for(o=0;o<e;o++)a[o]=r[o].value,i[o]=r[o].index;return{values:l.Array1D.new(a),indices:l.Array1D.new(i)}},t.prototype.min=function(t,e){v.assertAxesAreInnerMostDims("min",e,t.rank);for(var n=v.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=l.NDArray.zeros(r,t.dtype),i=u.sizeFromShape(o),s=a.getValues(),c=t.getValues(),p=0;p<s.length;++p){for(var h=p*i,f=c[0],d=0;d<i;++d){var y=c[h+d];if(isNaN(y)){f=Number.NaN;break}y<f&&(f=y)}s[p]=f}return a},t.prototype.max=function(t,e){v.assertAxesAreInnerMostDims("max",e,t.rank);for(var n=v.computeOutAndReduceShapes(t.shape,e),r=n[0],o=n[1],a=l.NDArray.zeros(r,t.dtype),i=u.sizeFromShape(o),s=a.getValues(),c=t.getValues(),p=0;p<s.length;++p){for(var h=p*i,f=c[h],d=0;d<i;++d){var y=c[h+d];if(isNaN(y)){f=Number.NaN;break}y>f&&(f=y)}s[p]=f}return a},t.prototype.ceil=function(t){for(var e=t.getValues(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.ceil(e[r]);return l.NDArray.make(t.shape,{values:n})},t.prototype.floor=function(t){for(var e=t.getValues(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.floor(e[r]);return l.NDArray.make(t.shape,{values:n})},t.prototype.exp=function(t){for(var e=t.getValues(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.exp(e[r]);return l.NDArray.make(t.shape,{values:n})},t.prototype.log=function(t){for(var e=t.getValues(),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=Math.log(o)}return l.NDArray.make(t.shape,{values:n})},t.prototype.sqrt=function(t){for(var e=t.getValues(),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=Math.sqrt(o)}return l.NDArray.make(t.shape,{values:n})},t.prototype.square=function(t){for(var e=t.getValues(),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=o*o}return l.NDArray.make(t.shape,{values:n})},t.prototype.relu=function(t){for(var e=l.NDArray.zeros(t.shape,t.dtype),n=e.getValues(),r=t.getValues(),o=0;o<r.length;++o){var a=r[o];u.isValNaN(a,t.dtype)?n[o]=u.getNaN(e.dtype):n[o]=Math.max(0,r[o])}return e},t.prototype.elu=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r){var o=n[r];e[r]=o>=0?o:Math.exp(o)-1}return l.NDArray.make(t.shape,{values:e})},t.prototype.eluDer=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r){var o=n[r];e[r]=o>=0?1:Math.exp(o)}return l.NDArray.make(t.shape,{values:e})},t.prototype.selu=function(t){for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r){var o=n[r];e[r]=o>=0?1.0507009873554805*o:1.7580993408473768*(Math.exp(o)-1)}return l.NDArray.make(t.shape,{values:e})},t.prototype.leakyRelu=function(t,e){for(var n=new Float32Array(t.size),r=t.dataSync(),o=0;o<r.length;o++){var a=r[o];n[o]=a>=0?a:e*a}return l.NDArray.make(t.shape,{values:n})},t.prototype.prelu=function(t,e){for(var n=new Float32Array(t.size),r=t.dataSync(),o=e.dataSync(),a=0;a<r.length;a++){var i=r[a];n[a]=i>=0?i:o[a]*i}return l.NDArray.make(t.shape,{values:n})},t.prototype.preluDer=function(t,e){for(var n=new Float32Array(t.size),r=t.dataSync(),o=e.dataSync(),a=0;a<r.length;a++){var i=r[a];n[a]=i>0?1:i<0?o[a]:i}return l.NDArray.make(t.shape,{values:n})},t.prototype.clip=function(t,e,n){for(var r=new Float32Array(t.size),o=t.getValues(),a=0;a<o.length;++a)r[a]=Math.min(n,Math.max(e,o[a]));return l.NDArray.make(t.shape,{values:r})},t.prototype.abs=function(t){for(var e=new Float32Array(t.size),n=t.getValues(),r=0;r<n.length;++r)e[r]=Math.abs(n[r]);return l.NDArray.make(t.shape,{values:e})},t.prototype.sigmoid=function(t){for(var e=new Float32Array(t.size),n=t.getValues(),r=0;r<n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return l.NDArray.make(t.shape,{values:e})},t.prototype.sin=function(t){for(var e=new Float32Array(t.size),n=t.getValues(),r=0;r<n.length;++r)e[r]=Math.sin(n[r]);return l.NDArray.make(t.shape,{values:e})},t.prototype.cos=function(t){for(var e=new Float32Array(t.size),n=t.getValues(),r=0;r<n.length;++r)e[r]=Math.cos(n[r]);return l.NDArray.make(t.shape,{values:e})},t.prototype.tan=function(t){for(var e=new Float32Array(t.size),n=t.getValues(),r=0;r<n.length;++r)e[r]=Math.tan(n[r]);return l.NDArray.make(t.shape,{values:e})},t.prototype.asin=function(t){for(var e=new Float32Array(t.size),n=t.getValues(),r=0;r<n.length;++r)e[r]=Math.asin(n[r]);return l.NDArray.make(t.shape,{values:e})},t.prototype.acos=function(t){for(var e=new Float32Array(t.size),n=t.getValues(),r=0;r<n.length;++r)e[r]=Math.acos(n[r]);return l.NDArray.make(t.shape,{values:e})},t.prototype.atan=function(t){for(var e=new Float32Array(t.size),n=t.getValues(),r=0;r<n.length;++r)e[r]=Math.atan(n[r]);return l.NDArray.make(t.shape,{values:e})},t.prototype.sinh=function(t){for(var e=new Float32Array(t.size),n=t.getValues(),r=0;r<n.length;++r)e[r]=Math.sinh(n[r]);return l.NDArray.make(t.shape,{values:e})},t.prototype.cosh=function(t){for(var e=new Float32Array(t.size),n=t.getValues(),r=0;r<n.length;++r)e[r]=Math.cosh(n[r]);return l.NDArray.make(t.shape,{values:e})},t.prototype.tanh=function(t){for(var e=new Float32Array(t.size),n=t.getValues(),r=0;r<n.length;++r)e[r]=u.tanh(n[r]);return l.NDArray.make(t.shape,{values:e})},t.prototype.step=function(t,e){void 0===e&&(e=0);for(var n=new Float32Array(t.size),r=t.getValues(),o=0;o<r.length;++o){var a=r[o];u.isValNaN(a,t.dtype)?n[o]=u.getNaN(t.dtype):n[o]=a>0?1:e}return l.NDArray.make(t.shape,{values:n})},t.prototype.conv2d=function(t,e,n,r){for(var o=r.filterHeight,a=r.filterWidth,i=r.padInfo.left,s=r.padInfo.top,u=l.Array4D.zeros(r.outShape),c=0;c<r.batchSize;++c)for(var p=0;p<r.outChannels;++p)for(var h=0;h<r.outHeight;++h)for(var f=h*r.strideHeight-i,d=Math.max(0,f),v=Math.min(r.inHeight,o+f),y=0;y<r.outWidth;++y){for(var m=y*r.strideWidth-s,g=Math.max(0,m),x=Math.min(r.inWidth,a+m),b=0,w=d;w<v;++w)for(var E=w-f,A=g;A<x;++A)for(var T=A-m,S=0;S<r.inChannels;++S){b+=t.get(c,w,A,S)*e.get(E,T,S,p)}var _=null!=n?n.get(p):0;u.set(b+_,c,h,y,p)}return u},t.prototype.conv2dDerInput=function(t,e,n){for(var r=n.filterHeight,o=n.filterWidth,a=r-1-n.padInfo.top,i=o-1-n.padInfo.left,s=n.strideHeight,u=n.strideWidth,c=l.Array4D.zeros(n.inShape),p=0;p<n.batchSize;++p)for(var h=0;h<n.inChannels;++h)for(var f=0;f<n.inHeight;++f)for(var d=f-i,v=Math.max(0,Math.ceil(d/s)),y=Math.min(n.outHeight,(r+d)/s),m=0;m<n.inWidth;++m){for(var g=m-a,x=Math.max(0,Math.ceil(g/u)),b=Math.min(n.outWidth,(o+g)/u),w=0,E=v;E<y;++E)for(var A=E*s-d,T=x;T<b;++T)for(var S=T*u-g,_=0;_<n.outChannels;++_){w+=t.get(p,E,T,_)*e.get(r-1-A,o-1-S,h,_)}c.set(w,p,f,m,h)}return c},t.prototype.conv2dDerFilter=function(t,e,n){for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s=l.Array4D.zeros(n.filterShape),u=n.padInfo.left,c=n.padInfo.top,p=0;p<a;++p)for(var h=Math.max(0,Math.ceil((c-p)/r)),f=Math.min(n.outHeight,(n.inHeight+c-p)/r),d=0;d<i;++d)for(var v=Math.max(0,Math.ceil((u-d)/o)),y=Math.min(n.outWidth,(n.inWidth+u-d)/o),m=0;m<n.inChannels;++m)for(var g=0;g<n.outChannels;++g){for(var x=0,b=0;b<n.batchSize;++b)for(var w=h;w<f;++w)for(var E=p+w*r-c,A=v;A<y;++A){var T=d+A*o-u;x+=t.get(b,E,T,m)*e.get(b,w,A,g)}s.set(x,p,d,m,g)}return s},t.prototype.conv2dDerBias=function(t){for(var e=t.shape,n=e[0],r=e[1],o=e[2],a=e[3],i=new Float32Array(a),s=0;s<a;++s){for(var u=0,c=0;c<n;++c)for(var p=0;p<r;++p)for(var h=0;h<o;++h)u+=t.get(c,p,h,s);i[s]=u}return l.Array1D.new(i)},t.prototype.depthwiseConv2D=function(t,e,n){for(var r=n.filterHeight,o=n.filterWidth,a=n.padInfo.left,i=n.padInfo.top,s=n.outChannels/n.inChannels,u=l.Array4D.zeros(n.outShape),c=0;c<n.batchSize;++c)for(var p=0;p<n.inChannels;++p)for(var h=0;h<n.outHeight;++h)for(var f=h*n.strideHeight-a,d=Math.max(0,f),v=Math.min(n.inHeight,r+f),y=0;y<n.outWidth;++y)for(var m=y*n.strideWidth-i,g=Math.max(0,m),x=Math.min(n.inWidth,o+m),b=0;b<s;++b){for(var w=0,E=d;E<v;++E)for(var A=E-f,T=g;T<x;++T){var S=T-m;w+=t.get(c,E,T,p)*e.get(A,S,p,b)}u.set(w,c,h,y,p*s+b)}return u},t.prototype.tile=function(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var o;if("float32"===t.dtype)o=Float32Array;else if("int32"===t.dtype)o=Int32Array;else{if("bool"!==t.dtype)throw new Error("Dtype "+t.dtype+" not supported for tile");o=Uint8Array}var a=new o(u.sizeFromShape(n)),i=l.NDArray.make(n,{values:a},t.dtype),s=t.getValues();for(r=0;r<i.size;++r){for(var c=i.indexToLoc(r),p=new Array(t.rank),h=0;h<p.length;h++)p[h]=c[h]%t.shape[h];var f=t.locToIndex(p);a[r]=s[f]}return i},t.prototype.transpose=function(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[e[r]];var o=new Float32Array(t.size),a=t.getValues(),i=l.NDArray.make(n,{values:o});for(r=0;r<t.size;++r){for(var s=t.indexToLoc(r),u=new Array(s.length),c=0;c<u.length;c++)u[c]=s[e[c]];o[i.locToIndex(u)]=a[r]}return i},t.prototype.pool=function(t,e,n){for(var r=e.strideHeight,o=e.strideWidth,a=e.filterHeight,i=e.filterWidth,s=l.Array4D.zeros(e.outShape),u=e.padInfo.top,c=e.padInfo.left,p=0;p<e.batchSize;++p)for(var h=0;h<e.inChannels;++h)for(var f=0;f<e.outHeight;++f)for(var d=f*r-u,v=Math.max(0,d),y=Math.min(e.inHeight,a+d),m=0;m<e.outWidth;++m){for(var g=m*o-c,x=Math.max(0,g),b=Math.min(e.inWidth,i+g),w="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,E=0,A=v;A<y;++A){for(var T=x;T<b;++T){var S=t.get(p,A,T,h);if(isNaN(S)){w=NaN,E=NaN;break}"max"===n&&S>w||"min"===n&&S<w?w=S:"avg"===n&&(E+=S/(a*i))}if(isNaN(w))break}s.set("avg"===n?E:w,p,f,m,h)}return s},t.prototype.maxPool=function(t,e){return this.pool(t,e,"max")},t.prototype.maxPoolPositions=function(t,e){for(var n=l.Array4D.zeros(e.outShape),r=e.strideHeight,o=e.strideWidth,a=e.filterHeight,i=e.filterWidth,s=e.padInfo.top,u=e.padInfo.left,c=0;c<e.batchSize;++c)for(var p=0;p<e.inChannels;++p)for(var h=0;h<e.outHeight;++h)for(var f=h*r-s,d=Math.max(0,f),v=Math.min(e.inHeight,a+f),y=0;y<e.outWidth;++y){for(var m=y*o-u,g=Math.max(0,m),x=Math.min(e.inWidth,i+m),b=Number.NEGATIVE_INFINITY,w=-1,E=d;E<v;++E)for(var A=E-f,T=g;T<x;++T){var S=T-m,_=t.get(c,E,T,p);_>b&&(b=_,w=A*i+S)}n.set(w,c,h,y,p)}return n},t.prototype.maxPoolBackprop=function(t,e,n){for(var r=this.maxPoolPositions(e,n),o=n.strideHeight,a=n.strideWidth,i=n.filterHeight,s=n.filterWidth,u=s-1-n.padInfo.left,c=i-1-n.padInfo.top,p=l.Array4D.zeros(e.shape),h=0;h<n.batchSize;++h)for(var f=0;f<n.inChannels;++f)for(var d=0;d<n.inHeight;++d)for(var v=0;v<n.inWidth;++v){for(var y=d-c,m=v-u,g=0,x=0;x<i;++x){var b=(y+x)/o;if(!(b<0||b>=n.outHeight||Math.floor(b)!==b))for(var w=0;w<s;++w){var E=(m+w)/a;if(!(E<0||E>=n.outWidth||Math.floor(E)!==E)){var A=i*s-1-r.get(h,b,E,f)===x*s+w?1:0;if(0!==A){g+=t.get(h,b,E,f)*A}}}}p.set(g,h,d,v,f)}return p},t.prototype.minPool=function(t,e){return this.pool(t,e,"min")},t.prototype.avgPool=function(t,e){return this.pool(t,e,"avg")},t.prototype.resizeBilinear3D=function(t,e,n){for(var r=l.Array3D.zeros([e[0],e[1],t.shape[2]]),o=n?[t.shape[0]-1,t.shape[1]-1,t.shape[2]]:t.shape,a=n?[r.shape[0]-1,r.shape[1]-1,r.shape[2]]:r.shape,i=0;i<r.shape[0];i++)for(var s=0;s<r.shape[1];s++)for(var u=0;u<r.shape[2];u++){var c=o[0]*i/a[0],p=o[1]*s/a[1],h=Math.floor(c),f=Math.min(t.shape[0]-1,Math.ceil(c)),d=Math.floor(p),v=Math.min(t.shape[1]-1,Math.ceil(p)),y=t.get(h,d,u),m=t.get(f,d,u),g=p-d,x=y+(t.get(h,v,u)-y)*g,b=x+(m+(t.get(f,v,u)-m)*g-x)*(c-h);r.set(b,i,s,u)}return r},t.prototype.batchNormalization2D=function(t,e,n,r,o,a){for(var i=t.getValues(),s=e.getValues(),u=n.getValues(),c=o?o.getValues():new Float32Array([1]),p=a?a.getValues():new Float32Array([0]),h=new Float32Array(i.length),f=0;f<i.length;f++)h[f]=p[f%p.length]+(i[f]-s[f%s.length])*c[f%c.length]/Math.sqrt(u[f%u.length]+r);return l.Array2D.new(t.shape,h)},t.prototype.batchNormalization3D=function(t,e,n,r,o,a){for(var i=t.getValues(),s=e.getValues(),u=n.getValues(),c=o?o.getValues():new Float32Array([1]),p=a?a.getValues():new Float32Array([0]),h=new Float32Array(i.length),f=0;f<i.length;f++)h[f]=p[f%p.length]+(i[f]-s[f%s.length])*c[f%c.length]/Math.sqrt(u[f%u.length]+r);return l.Array3D.new(t.shape,h)},t.prototype.multinomial=function(t,e,n){for(var r=t.shape[0],o=t.shape[1],a=l.Array2D.zeros([r,e],"int32"),s=a.getValues(),u=t.getValues(),c=0;c<r;++c){var p=c*o,h=new Float32Array(o-1);h[0]=u[p];for(var f=1;f<h.length;++f)h[f]=h[f-1]+u[p+f];for(var d=i.alea(n.toString()),v=c*e,y=0;y<e;++y){var m=d();s[v+y]=h.length;for(var g=0;g<h.length;g++)if(m<h[g]){s[v+y]=g;break}}}return a},t.prototype.oneHot=function(t,e,n,r){var o=new Float32Array(t.size*e);o.fill(r);for(var a=0;a<t.size;++a)o[a*e+t.get(a)]=n;return l.Array2D.new([t.size,e],o)},t.prototype.broadcastedBinaryOp=function(t,e,n,r){for(var o=c.assertAndGetBroadcastShape(t.shape,e.shape),a=l.NDArray.zeros(o,n),i=a.getValues(),s=t.getValues(),u=e.getValues(),p=c.getBroadcastDims(t.shape,o),h=c.getBroadcastDims(e.shape,o),f=function(n){var o=a.indexToLoc(n),c=o.slice(-t.rank);p.forEach(function(t){return c[t]=0});var l=t.locToIndex(c),f=o.slice(-e.rank);h.forEach(function(t){return f[t]=0});var d=e.locToIndex(f);i[n]=r(s[l],u[d])},d=0;d<i.length;++d)f(d);return a},t}();e.MathBackendCPU=m,s.ENV.registerBackend("cpu",function(){return new m});var g=function(t){function e(e){void 0===e&&(e=!1);var n=this;return console.warn("new NDArrayMathCPU() is deprecated. Please use the global dl.ENV.math. In rare cases, to construct your own NDArrayMath that runs on CPU, use math = new NDArrayMath('cpu', safeMode); and make sure to set it as global: dl.ENV.setMath(math);"),n=t.call(this,"cpu",e)||this,s.ENV.setMath(n),n}return r(e,t),e}(h.NDArrayMath);e.NDArrayMathCPU=g},Zrlr:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},ac8B:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("65Fz"),a=n("yNpf"),i=function(t){function e(e,n,r){var o=t.call(this)||this;return o.x1Tensor=e,o.x2Tensor=n,o.yTensor=r,o}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor);t.scope(function(a){2===r.shape.length&&2===o.shape.length?e.set(n.yTensor,a(t.matMul(r,o))):2===r.shape.length&&1===o.shape.length?e.set(n.yTensor,a(t.matrixTimesVector(r,o))):1===r.shape.length&&2===o.shape.length&&e.set(n.yTensor,a(t.vectorTimesMatrix(r,o)))})},e.prototype.backProp=function(t,e,n){var r=this,i=e.get(this.x1Tensor),s=e.get(this.x2Tensor),u=n.get(this.yTensor);1===i.shape.length&&(i=i.reshape([1,i.size]),u=u.reshape([1,u.size])),1===s.shape.length&&(s=s.reshape([s.size,1]),u=u.reshape([u.size,1])),t.scope(function(){if(a.shouldBackProp(r.x1Tensor)){var e=t.matMul(u,s,o.MatrixOrientation.REGULAR,o.MatrixOrientation.TRANSPOSED);n.add(r.x1Tensor,1===r.x1Tensor.shape.length?e.as1D():e)}if(a.shouldBackProp(r.x2Tensor)){var c=t.matMul(i,u,o.MatrixOrientation.TRANSPOSED,o.MatrixOrientation.REGULAR);n.add(r.x2Tensor,1===r.x2Tensor.shape.length?c.as1D():c)}})},e}(n("/ROS").Operation);e.MatMul=i},ax3d:function(t,e,n){var r=n("e8AB")("keys"),o=n("3Eo+");t.exports=function(t){return r[t]||(r[t]=o(t))}},ayDV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("fpai"),o=n("BozM");e.getFilteredNodesXToY=function(t,e,n){for(var r={},a={},i=0;i<e.length;i++)r[e[i].id]=!0;for(i=0;i<t.length;i++){var s=(w=t[i]).inputAndArgs.inputs;for(var u in s){for(var c=s[u],p=!1,h=0;h<e.length;h++)if(r[c.id]){if(w.output instanceof o.NDArray)r[w.output.id]=!0;else for(var l=0,f=Object.keys(w.output);l<f.length;l++){var d=f[l];r[w.output[d].id]=!0}p=!0,a[w.id]=!0;break}if(p)break}}var v={};v[n.id]=!0;var y={};for(i=t.length-1;i>=0;i--){s=(w=t[i]).inputAndArgs.inputs;var m=[];if(w.output instanceof o.NDArray)m.push(w.output);else for(var g=0,x=Object.keys(w.output);g<x.length;g++)d=x[g],m.push(w.output[d]);for(h=0;h<m.length;h++)if(v[m[h].id]){for(var u in s)v[s[u].id]=!0,y[w.id]=!0;break}}var b=[];for(i=0;i<t.length;i++){var w;if(a[(w=t[i]).id]&&y[w.id]){var E={};for(var u in w.inputAndArgs.inputs){var A=w.inputAndArgs.inputs[u];r[A.id]&&(E[u]=A)}var T=void 0;if(w.output instanceof o.NDArray)T=w.output;else{T={};for(var S in w.output)v[w.output[S].id]&&(T[S]=w.output[S])}var _=Object.assign({},w);_.inputAndArgs={inputs:E},_.output=T,b.push(_)}}return b},e.backpropagateGradients=function(t,e){for(var n=e.length-1;n>=0;n--){var a=e[n],i=void 0;if(a.output instanceof o.NDArray)i=t[a.output.id];else{i={};for(var s=0,u=Object.keys(a.output);s<u.length;s++){var c=u[s];i[c]=t[a.output[c].id]}}if(null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found for\n              "+a.name+".");var p=a.gradient(i,a.output);for(var h in a.inputAndArgs.inputs){if(!(h in p))throw new Error("Cannot backprop through input "+a.name+"."+h+". Gradients found: "+Object.keys(p)+".");var l=p[h](),f=a.inputAndArgs.inputs[h];if(null==t[f.id])t[f.id]=l;else{var d=t[f.id];t[f.id]=r.ENV.math.add(d,l),d.dispose()}}}},e.computeInputs=function(t){for(var e={},n=0;n<t.length;n++)if((p=t[n]).output instanceof o.NDArray)e[p.output.id]=!0;else for(var r=0,a=Object.keys(p.output);r<a.length;r++){var i=a[r];e[p.output[i].id]=!0}var s={},u={},c=0;for(n=0;n<t.length;n++)for(var p,h=(p=t[n]).inputAndArgs.inputs,l=0,f=Object.keys(h);l<f.length;l++)e[h[i=f[l]].id]||u[h[i].id]||(s[(c++).toString()]=h[i],u[h[i].id]=!0);return s},e.extractNDArraysFromScopeResult=function(t){if(null==t)return[];if(t instanceof o.NDArray)return[t];var e=[],n=t;for(var r in n){var a=n[r];a instanceof o.NDArray&&e.push(a)}return e},e.stripUndefinedInputsFromInputConfig=function(t){return Object.keys(t.inputs).forEach(function(e){null==t.inputs[e]&&delete t.inputs[e]}),t}},"bGD+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("fpai"),o=n("BozM"),a=function(){function t(){this.halfOne=r.ENV.math.keep(o.Scalar.new(.5))}return t.prototype.cost=function(t,e,n){var r=t.subStrict(e,n),o=t.elementWiseMul(r,r),a=t.scalarTimesArray(this.halfOne,o);return r.dispose(),o.dispose(),a},t.prototype.der=function(t,e,n){return t.subStrict(e,n)},t.prototype.dispose=function(){this.halfOne.dispose()},t}();e.SquareCostFunc=a},bRrM:function(t,e,n){"use strict";var r=n("7KvD"),o=n("FeBl"),a=n("evD5"),i=n("+E39"),s=n("dSzd")("species");t.exports=function(t){var e="function"==typeof o[t]?o[t]:r[t];i&&e&&!e[s]&&a.f(e,s,{configurable:!0,get:function(){return this}})}},"c+8m":function(t,e,n){"use strict";function r(t,e){void 0===e&&(e={}),e.name=e.name||t._componentTag||t.name;var n=t.prototype;Object.getOwnPropertyNames(n).forEach(function(t){if("constructor"!==t)if(s.indexOf(t)>-1)e[t]=n[t];else{var r=Object.getOwnPropertyDescriptor(n,t);"function"==typeof r.value?(e.methods||(e.methods={}))[t]=r.value:(r.get||r.set)&&((e.computed||(e.computed={}))[t]={get:r.get,set:r.set})}}),(e.mixins||(e.mixins=[])).push({data:function(){return function(t,e){var n=e.prototype._init;e.prototype._init=function(){var e=this,n=Object.getOwnPropertyNames(t);if(t.$options.props)for(var r in t.$options.props)t.hasOwnProperty(r)||n.push(r);n.forEach(function(n){"_"!==n.charAt(0)&&Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e},configurable:!0})})};var r=new e;e.prototype._init=n;var o={};return Object.keys(r).forEach(function(t){void 0!==r[t]&&(o[t]=r[t])}),o}(this,t)}});var r=t.__decorators__;r&&(r.forEach(function(t){return t(e)}),delete t.__decorators__);var o=Object.getPrototypeOf(t.prototype),u=o instanceof a?o.constructor:a,c=u.extend(e);return function(t,e,n){Object.getOwnPropertyNames(e).forEach(function(r){if("prototype"!==r){var o=Object.getOwnPropertyDescriptor(t,r);if(!o||o.configurable){var a=Object.getOwnPropertyDescriptor(e,r);if(!i){if("cid"===r)return;var s=Object.getOwnPropertyDescriptor(n,r);if(!function(t){var e=typeof t;return null==t||"object"!==e&&"function"!==e}(a.value)&&s&&s.value===a.value)return}0,Object.defineProperty(t,r,a)}}})}(c,t,u),c}function o(t){return"function"==typeof t?r(t):function(e){return r(e,t)}}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(n("/5sW")),i={__proto__:[]}instanceof Array,s=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured"];!function(t){(o||(o={})).registerHooks=function(t){s.push.apply(s,t)}}();var u=o;e.default=u,e.createDecorator=function(t){return function(e,n,r){var o="function"==typeof e?e:e.constructor;o.__decorators__||(o.__decorators__=[]),"number"!=typeof r&&(r=void 0),o.__decorators__.push(function(e){return t(e,n,r)})}}},cJi8:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("fpai"),a=n("bGD+"),i=n("BozM"),s=n("jMY8"),u=n("yNpf"),c=function(t){function e(e,n,r,a){var u=t.call(this)||this;return u.x1Tensor=e,u.x2Tensor=n,u.yTensor=r,u.func=a,u.oneOverNScalar=o.ENV.math.keep(i.Scalar.new(1/s.sizeFromShape(e.shape))),u}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor);t.scope(function(a){var i=n.func.cost(t,r,o),s=t.sum(i),u=t.scalarTimesArray(n.oneOverNScalar,s);e.set(n.yTensor,a(u))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.x1Tensor),a=e.get(this.x2Tensor);t.scope(function(){u.shouldBackProp(r.x1Tensor)&&n.add(r.x1Tensor,r.func.der(t,o,a)),u.shouldBackProp(r.x2Tensor)&&n.add(r.x2Tensor,r.func.der(t,a,o))})},e.prototype.dispose=function(){this.func.dispose(),this.oneOverNScalar.dispose()},e}(n("/ROS").Operation);e.ElementWiseCost=c;var p=function(t){function e(e,n,r){return t.call(this,e,n,r,new a.SquareCostFunc)||this}return r(e,t),e}(c);e.MeanSquaredCost=p},d7EF:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=r(n("us/S")),a=r(n("BO1k"));e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var s,u=(0,a.default)(t);!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},dNDb:function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},dSzd:function(t,e,n){var r=n("e8AB")("wks"),o=n("3Eo+"),a=n("7KvD").Symbol,i="function"==typeof a;(t.exports=function(t){return r[t]||(r[t]=i&&a[t]||(i?a:o)("Symbol."+t))}).store=r},dY0y:function(t,e,n){var r=n("dSzd")("iterator"),o=!1;try{var a=[7][r]();a.return=function(){o=!0},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var a=[7],i=a[r]();i.next=function(){return{done:n=!0}},a[r]=function(){return i},t(a)}catch(t){}return n}},da8W:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("9RhS"),a=function(t){function e(e,n,r,a){var i=t.call(this)||this;return i.x1Tensor=e,i.x2Tensor=n,i.axis=r,i.yTensor=a,o.assertParams(e.shape,n.shape,r),i}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),o=e.get(this.x2Tensor);t.scope(function(a){var i=t.concat3D(r,o,n.axis);e.set(n.yTensor,a(i))})},e.prototype.backProp=function(t,e,n){throw new Error("Concat3D backprop not implemented.")},e}(n("/ROS").Operation);e.Concat3D=a},"di0+":function(t,e,n){(function(t){var r;!function(t,o,a){function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function s(t,e){var n=new function(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n("LGuY")&&n("nErl")?void 0===(r=function(){return s}.call(e,n,e,o))||(o.exports=r):this.xor128=s}(0,"object"==typeof t&&t,n("LGuY"))}).call(e,n("3IRH")(t))},e6n0:function(t,e,n){var r=n("evD5").f,o=n("D2L2"),a=n("dSzd")("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},e8AB:function(t,e,n){var r=n("7KvD"),o="__core-js_shared__",a=r[o]||(r[o]={});t.exports=function(t){return a[t]||(a[t]={})}},eYNA:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function o(t,e,n){for(var r=t.length+e.length,o=[],a=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?o.push(t[a++]):o.push(e[i++]);return o}Object.defineProperty(e,"__esModule",{value:!0}),e.axesAreInnerMostDims=r,e.combineLocations=o,e.computeOutAndReduceShapes=function(t,e){for(var n=[],r=t.length,o=0;o<r;o++)-1===e.indexOf(o)&&n.push(t[o]);return[n,e.map(function(e){return t[e]})]},e.expandShapeToKeepDim=function(t,e){return o(t,e.map(function(t){return 1}),e)},e.parseAxisParam=function(t,e){return null==t?t=e.map(function(t,e){return e}):"number"==typeof t&&(t=[t]),t},e.assertAxesAreInnerMostDims=function(t,e,n){if(!r(e,n))throw new Error(t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input.")},e.getPermutedAxes=function(t,e){if(r(t,e))return null;for(var n=[],o=0;o<e;++o)-1===t.indexOf(o)&&n.push(o);return t.forEach(function(t){return n.push(t)}),n},e.getInnerMostAxes=function(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}},evD5:function(t,e,n){var r=n("77Pl"),o=n("SfB7"),a=n("MmMw"),i=Object.defineProperty;e.f=n("+E39")?Object.defineProperty:function(t,e,n){if(r(t),e=a(e,!0),r(n),o)try{return i(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},f75v:function(t,e,n){"use strict";function r(t,e,n,r){return s.assert(e.size===n.size,"The output and target must be the same size"),t.scope(function(){var o=t.scalarPlusArray(r,e),a=t.log(o),i=t.elementWiseMul(n,a),s=t.neg(i);return t.sum(s)})}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n("fpai"),i=n("BozM"),s=n("jMY8"),u=n("lABf"),c=n("/ROS"),p=function(t){function e(e,n){var r=t.call(this)||this;return r.logitsTensor=e,r.output=n,r}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.logitsTensor);return t.scope(function(o){e.set(n.output,o(t.softmax(r)))})},e.prototype.backProp=function(){throw Error("Softmax backprop is not yet implemented")},e}(c.Operation);e.Softmax=p;var h=function(t){function e(e,n,r){var o=t.call(this)||this;return o.logitsTensor=e,o.labelTensor=n,o.yTensor=r,o.softmaxTensor=new u.Tensor(e.shape),o.epsilon=a.ENV.math.keep(i.Scalar.new(1e-5)),o}return o(e,t),e.prototype.feedForward=function(t,e){var n=this,o=e.get(this.logitsTensor),a=e.get(this.labelTensor);t.scope(function(i){var s=t.softmax(o);e.set(n.softmaxTensor,i(s)),e.set(n.yTensor,i(r(t,s,a,n.epsilon)))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.softmaxTensor),a=e.get(this.labelTensor);t.scope(function(){n.add(r.logitsTensor,t.subtract(o,a))})},e.prototype.disposeTransientArrays=function(t,e){t.disposeArray(this.softmaxTensor)},e.prototype.dispose=function(){this.epsilon.dispose()},e}(c.Operation);e.SoftmaxCrossEntropyCost=h,e.crossEntropyCost=r},fJUb:function(t,e,n){var r=n("77Pl"),o=n("EqjI"),a=n("qARP");t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=a.f(t);return(0,n.resolve)(e),n.promise}},fkB2:function(t,e,n){var r=n("UuGF"),o=Math.max,a=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):a(t,e)}},fpai:function(t,e,n){"use strict";(function(t){function r(t){if(0===t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var e=document.createElement("canvas");return 1===t?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}function o(t){if(null!=t){var e=t.getExtension("WEBGL_lose_context");if(null==e)throw new Error("Extension WEBGL_lose_context not supported on this browser.");e.loseContext()}}function a(t){var e=r(t);return null!=e&&(o(e),!0)}function i(){var t={};if("undefined"==typeof window)return t;var n=p.getQueryParams(window.location.search);if(l in n){var r={};n[l].split(",").forEach(function(t){var e=t.split(":"),n=e[0],o=e[1];r[n]=o}),e.URL_PROPERTIES.forEach(function(e){e.name in r&&(console.log("Setting feature override from URL "+e.name+": "+r[e.name]),e.type===s.NUMBER?t[e.name]=+r[e.name]:e.type===s.BOOLEAN?t[e.name]="true"===r[e.name]:console.warn("Unknown URL param: "+e.name+"."))})}return t}Object.defineProperty(e,"__esModule",{value:!0});var s,u=n("H24h"),c=n("02A5"),p=n("jMY8");!function(t){t[t.NUMBER=0]="NUMBER",t[t.BOOLEAN=1]="BOOLEAN"}(s=e.Type||(e.Type={})),e.URL_PROPERTIES=[{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_ENABLED",type:s.BOOLEAN},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",type:s.BOOLEAN},{name:"WEBGL_VERSION",type:s.NUMBER},{name:"WEBGL_FLOAT_TEXTURE_ENABLED",type:s.BOOLEAN},{name:"WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED",type:s.BOOLEAN}];var h=function(){function t(t){this.features={},this.globalMath=null,this.backendRegistry={},this.prevBackendRegistry=this.backendRegistry,null!=t&&(this.features=t)}return t.prototype.get=function(t){return t in this.features?this.features[t]:(this.features[t]=this.evaluateFeature(t),this.features[t])},t.prototype.getBestBackend=function(){for(var t=["webgl","cpu"],e=0;e<t.length;++e){var n=t[e];if(n in this.backendRegistry)return this.backendRegistry[n]}throw new Error("No backend found in registry.")},t.prototype.evaluateFeature=function(t){if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_ENABLED"===t){var e=this.get("WEBGL_VERSION");return 0!==e&&function(t){var e=r(t),n=1===t?"EXT_disjoint_timer_query":"EXT_disjoint_timer_query_webgl2",a=null!=e.getExtension(n);return null!=e&&o(e),a}(e)}if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE"===t)return this.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_ENABLED")&&!u.isMobile();if("WEBGL_VERSION"===t)return a(2)?2:a(1)?1:0;if("WEBGL_FLOAT_TEXTURE_ENABLED"===t)return function(t){if(0===t)return!1;var e=r(t);if(1===t){if(null==e.getExtension("OES_texture_float"))return!1}else if(null==e.getExtension("EXT_color_buffer_float"))return!1;var n=e.createFramebuffer(),a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a);var i=2===t?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,i,1,1,0,e.RGBA,e.FLOAT,null),e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;e.readPixels(0,0,1,1,e.RGBA,e.FLOAT,new Float32Array(4));var u=e.getError()===e.NO_ERROR;return o(e),s&&u}(this.get("WEBGL_VERSION"));if("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED"===t)return function(t){if(2!==t)return!1;var e=r(t),n=null!=e.getExtension("WEBGL_get_buffer_sub_data_async");return o(e),n}(this.get("WEBGL_VERSION"));throw new Error("Unknown feature "+t+".")},t.prototype.setFeatures=function(t){this.empty(),this.features=t},t.prototype.reset=function(){this.globalMath=null,this.backendRegistry=this.prevBackendRegistry,this.features=i()},t.prototype.setMath=function(t){this.globalMath=t},t.prototype.getBackend=function(t){return this.backendRegistry[t]},t.prototype.registerBackend=function(t,e){if(t in this.backendRegistry)throw new Error(t+" backend was already registered");try{var n=e();return this.backendRegistry[t]=n,!0}catch(t){return!1}},Object.defineProperty(t.prototype,"math",{get:function(){if(null==this.globalMath){var t=this.getBestBackend();this.globalMath=new c.NDArrayMath(t,!1)}return this.globalMath},enumerable:!0,configurable:!0}),t.prototype.empty=function(){this.globalMath=null,this.prevBackendRegistry=this.backendRegistry,this.backendRegistry={},this.features=null},t}();e.Environment=h;var l="dljsflags";e.ENV=function(){var e=function(){var e;if("undefined"!=typeof window)e=window;else{if(void 0===t)throw new Error("Could not find a global object");e=t}return e}();return e.ENV=e.ENV||new h(i()),e.ENV}()}).call(e,n("DuR2"))},fxRn:function(t,e,n){n("+tPU"),n("zQR9"),t.exports=n("g8Ux")},fzqA:function(t,e,n){(function(t){var r;!function(t,o,a){function i(t,e){return e.x=t.x.slice(),e.i=t.i,e}function s(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.x,o=e.i;return t=r[o],t^=t>>>7,n=t^t<<24,t=r[o+1&7],n^=t^t>>>10,t=r[o+3&7],n^=t^t>>>3,t=r[o+4&7],n^=t^t<<7,t=r[o+7&7],t^=t<<13,n^=t^t<<9,r[o]=n,e.i=o+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&(r.x&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n("LGuY")&&n("nErl")?void 0===(r=function(){return s}.call(e,n,e,o))||(o.exports=r):this.xorshift7=s}(0,"object"==typeof t&&t,n("LGuY"))}).call(e,n("3IRH")(t))},g8Ux:function(t,e,n){var r=n("77Pl"),o=n("3fs2");t.exports=n("FeBl").getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},h65t:function(t,e,n){var r=n("UuGF"),o=n("52gC");t.exports=function(t){return function(e,n){var a,i,s=String(o(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(a=s.charCodeAt(u))<55296||a>56319||u+1===c||(i=s.charCodeAt(u+1))<56320||i>57343?t?s.charAt(u):a:t?s.slice(u,u+2):i-56320+(a-55296<<10)+65536}}},h6eJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PARALLELIZE_THRESHOLD=30,e.computeOptimalWindowSize=function(t){return t<=e.PARALLELIZE_THRESHOLD?t:function(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}(t,Math.floor(Math.sqrt(t)))}},hEMf:function(t,e,n){"use strict";function r(t,e,n){t.setProgram(e);var r=o.getProgramUniformLocationOrThrow(t.gl,e,"source");t.setInputMatrixTexture(n,r,0),t.executeProgram()}Object.defineProperty(e,"__esModule",{value:!0});var o=n("WQ8k");e.getRenderRGBShader=function(t,e){var n="\n    precision highp float;\n    uniform sampler2D source;\n    varying vec2 resultUV;\n\n    const float destinationWidth = "+e+".0;\n    const float a = 1.0;\n\n    void main() {\n      float xr = floor(resultUV.s * destinationWidth) * 3.0;\n      vec3 x = xr + vec3(0, 1, 2);\n\n      float sourceWidth = destinationWidth * 3.0;\n      vec3 u = (x + 0.5) / sourceWidth;\n      float v = 1.0 - resultUV.t;\n\n      float r = texture2D(source, vec2(u[0], v)).r;\n      float g = texture2D(source, vec2(u[1], v)).r;\n      float b = texture2D(source, vec2(u[2], v)).r;\n\n      gl_FragColor = vec4(r, g, b, a);\n    }";return t.createProgram(n)},e.renderToCanvas=function(t,e,n){o.bindCanvasToFramebuffer(t.gl),r(t,e,n)},e.renderToFramebuffer=r},hJx8:function(t,e,n){var r=n("evD5"),o=n("X8DO");t.exports=n("+E39")?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},hbAG:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){function n(n){return function(i){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],o=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,i])}}var r,o,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i};Object.defineProperty(e,"__esModule",{value:!0});var a=n("fpai"),i=n("jMY8"),s=n("LbFW"),u=n("1S1d"),c=n("WQ8k"),p=function(){function t(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.autoDebugValidate=!1,this.gl=null!=t?t:s.createWebGLContext(),1===a.ENV.get("WEBGL_VERSION")?(this.textureFloatExtension=c.getExtensionOrThrow(this.gl,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float")):this.colorBufferFloatExtension=c.getExtensionOrThrow(this.gl,"EXT_color_buffer_float"),this.loseContextExtension=c.getExtensionOrThrow(this.gl,"WEBGL_lose_context"),a.ENV.get("WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED")&&(this.getBufferSubDataAsyncExtension=this.gl.getExtension("WEBGL_get_buffer_sub_data_async")),this.vertexBuffer=s.createVertexBuffer(this.gl),this.indexBuffer=s.createIndexBuffer(this.gl),this.framebuffer=c.createFramebuffer(this.gl)}return t.prototype.dispose=function(){var t=this;this.throwIfDisposed(),null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;c.callAndCheck(e,function(){return e.finish()}),c.callAndCheck(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),c.callAndCheck(e,function(){return e.deleteFramebuffer(t.framebuffer)}),c.callAndCheck(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),c.callAndCheck(e,function(){return e.deleteBuffer(t.vertexBuffer)}),c.callAndCheck(e,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),c.callAndCheck(e,function(){return e.deleteBuffer(t.indexBuffer)}),this.loseContextExtension.loseContext(),this.disposed=!0},t.prototype.enableAutomaticDebugValidation=function(t){this.autoDebugValidate=t,c.enableDebugWebGLErrorChecking(t)},t.prototype.createMatrixTexture=function(t,e){return this.throwIfDisposed(),s.createMatrixTexture(this.gl,t,e)},t.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),s.uploadPixelDataToTexture(this.gl,t,e)},t.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),s.createPackedMatrixTexture(this.gl,t,e)},t.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(c.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer),this.outputTexture=null),c.callAndCheck(this.gl,function(){return e.gl.deleteTexture(t)})},t.prototype.uploadMatrixToTexture=function(t,e,n,r){this.throwIfDisposed();return s.uploadMatrixToTexture(this.gl,t,e,n,r,1)},t.prototype.uploadMatrixToPackedTexture=function(t,e,n,r){return this.throwIfDisposed(),s.uploadMatrixToPackedTexture(this.gl,t,e,n,r)},t.prototype.downloadMatrixFromTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return s.downloadMatrixFromOutputTexture(r.gl,e,n)})},t.prototype.downloadMatrixFromTextureAsync=function(t,e,n){return r(this,void 0,void 0,function(){var r=this;return o(this,function(o){if(null==this.getBufferSubDataAsyncExtension)throw new Error("Cannot download matrix from output texture asynchronously, WEBGL_get_buffer_sub_data_async is not enabled.");return[2,this.downloadMatrixDriverAsync(t,function(){return s.downloadMatrixFromOutputTextureAsync(r.gl,r.getBufferSubDataAsyncExtension,e,n)})]})})},t.prototype.downloadMatrixFromRGBAColorTexture=function(t,e,n,r){var o=this;return this.downloadMatrixDriver(t,function(){return s.downloadMatrixFromRGBAColorTexture(o.gl,e,n,r)})},t.prototype.downloadMatrixFromPackedTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return s.downloadMatrixFromPackedOutputTexture(r.gl,e,n)})},t.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,n=c.createFragmentShader(e,t),r=s.createVertexShader(e),o=c.createProgram(e);return c.callAndCheck(e,function(){return e.attachShader(o,r)}),c.callAndCheck(e,function(){return e.attachShader(o,n)}),c.linkProgram(e,o),this.autoDebugValidate&&c.validateProgram(e,o),o},t.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&c.callAndCheck(this.gl,function(){return e.gl.deleteProgram(t)})},t.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&this.autoDebugValidate&&c.validateProgram(this.gl,this.program),c.callAndCheck(this.gl,function(){return e.gl.useProgram(t)})},t.prototype.getUniformLocation=function(t,e){return this.throwIfDisposed(),c.getProgramUniformLocationOrThrow(this.gl,t,e)},t.prototype.getAttributeLocation=function(t,e){var n=this;return this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return n.gl.getAttribLocation(t,e)})},t.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},t.prototype.setInputMatrixTexture=function(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),c.bindTextureToProgramUniformSampler(this.gl,this.program,t,e,n)},t.prototype.setOutputMatrixTexture=function(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)},t.prototype.setOutputPackedMatrixTexture=function(t,e,n){this.throwIfDisposed();var r=u.getPackedMatrixTextureShapeWidthHeight(e,n),o=r[0],a=r[1];this.setOutputMatrixTextureDriver(t,o,a)},t.prototype.setOutputMatrixWriteRegion=function(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){null!=this.program&&c.validateProgram(this.gl,this.program),c.validateFramebuffer(this.gl)},t.prototype.executeProgram=function(t){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;s.bindVertexProgramAttributeStreams(e,this.program,this.vertexBuffer,t),this.autoDebugValidate&&this.debugValidate(),c.callAndCheck(e,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return t.gl.finish()})},t.prototype.runQuery=function(t){return 2===a.ENV.get("WEBGL_VERSION")?this.runQueryWebGL2(t):this.runQueryWebGL1(t)},t.prototype.runQueryWebGL2=function(t){var e=this,n=c.getExtensionOrThrow(this.gl,"EXT_disjoint_timer_query_webgl2"),r=this.gl.createQuery();return this.gl.beginQuery(n.TIME_ELAPSED_EXT,r),t(),this.gl.endQuery(n.TIME_ELAPSED_EXT),new Promise(function(t,o){i.repeatedTry(function(){var t=e.gl.getQueryParameter(r,e.gl.QUERY_RESULT_AVAILABLE),o=e.gl.getParameter(n.GPU_DISJOINT_EXT);return t&&!o}).then(function(){var n=e.gl.getQueryParameter(r,e.gl.QUERY_RESULT);t(n/1e6)}).catch(function(){console.warn("Disjoint query timer never available."),t(-1)})})},t.prototype.runQueryWebGL1=function(t){var e=this,n=c.getExtensionOrThrow(this.gl,"EXT_disjoint_timer_query"),r=n.createQueryEXT();return n.beginQueryEXT(n.TIME_ELAPSED_EXT,r),t(),n.endQueryEXT(n.TIME_ELAPSED_EXT),new Promise(function(t,o){i.repeatedTry(function(){var t=n.getQueryObjectEXT(r,n.QUERY_RESULT_AVAILABLE_EXT),o=e.gl.getParameter(n.GPU_DISJOINT_EXT);return t&&!o}).then(function(){var e=n.getQueryObjectEXT(r,n.QUERY_RESULT_EXT);t(e/1e6)}).catch(function(){console.warn("Disjoint query timer never available."),t(-1)})})},t.prototype.downloadMatrixDriverSetup=function(t){this.throwIfDisposed(),c.bindColorTextureToFramebuffer(this.gl,t,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(this.gl)},t.prototype.downloadMatrixDriverTeardown=function(){null!=this.outputTexture?(c.bindColorTextureToFramebuffer(this.gl,this.outputTexture,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(this.gl)):c.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer)},t.prototype.downloadMatrixDriver=function(t,e){this.downloadMatrixDriverSetup(t);var n=e();return this.downloadMatrixDriverTeardown(),n},t.prototype.downloadMatrixDriverAsync=function(t,e){return r(this,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return this.downloadMatrixDriverSetup(t),[4,e()];case 1:return n=r.sent(),this.downloadMatrixDriverTeardown(),[2,n]}})})},t.prototype.setOutputMatrixTextureDriver=function(t,e,n){this.throwIfDisposed();var r=this.gl;c.bindColorTextureToFramebuffer(r,t,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(r),this.outputTexture=t,c.callAndCheck(r,function(){return r.viewport(0,0,e,n)}),c.callAndCheck(r,function(){return r.scissor(0,0,e,n)})},t.prototype.setOutputMatrixWriteRegionDriver=function(t,e,n,r){var o=this;this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return o.gl.scissor(t,e,n,r)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},t}();e.GPGPUContext=p},hkhl:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,o=t.inSize,a=Math.ceil(o/n);this.outputShape=[r,a];var i="sum"===e,s="0.0";i||(s="min"===e?"1.0 / 0.0":"-1.0 / 0.0");var u="min"===e?"min":"max",c=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e&&(c="sumValue");var p=4*Math.floor(n/4),h=n%4,l="\n      if ("+i+") {\n        sumValue += dot(values, ones);\n      } else {\n        if (hasNaN(values)) {\n          setOutput(getNaN(values));\n          return;\n        }\n        minMaxValue = "+u+"(values, minMaxValue);\n      }\n    ",f="";o%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+s+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+f+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+s+");\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+p+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+p+";\n        if ("+(1===h)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n          "+l+"\n        } else if ("+(2===h)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n          "+l+"\n        } else if ("+(3===h)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n          "+l+"\n        }\n        setOutput("+c+");\n      }\n    "}}();e.ReduceProgram=r},"i+52":function(t,e,n){(function(t){var r;!function(t,o,a){function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function s(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&i(r,n),o.state=function(){return i(n,{})}),o}o&&o.exports?o.exports=s:n("LGuY")&&n("nErl")?void 0===(r=function(){return s}.call(e,n,e,o))||(o.exports=r):this.xorwow=s}(0,"object"==typeof t&&t,n("LGuY"))}).call(e,n("3IRH")(t))},i0QU:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.inHeight,n=t.inWidth,r=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,i=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 strides = ivec2("+a+", "+i+");\n      const ivec2 pads = ivec2("+r+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+c+";\n        int q = d2 - d1 * "+c+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC;\n\n            if (xC < 0 || xC >= "+n+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();e.DepthwiseConv2DProgram=r},j3TE:function(t,e,n){"use strict";function r(t){return Object.keys(t.dict).map(function(e){return t.dict[+e].tensor.node})}Object.defineProperty(e,"__esModule",{value:!0});var o=n("BozM"),a=n("jMY8"),i=n("lABf"),s=n("yNpf");e.getTerminatingNodesFromFeedDictionary=r,e.getOrderedEvaluationSetFromEvalTensor=function(t,e){var n=r(e),o=t.map(function(t){return t.node}),a=s.getUnorderedEvaluationSet(o,n);return s.getOrderedEvaluationSet(a)},e.addPersistentArraysToTensorArrayMap=function(t,e){t.forEach(function(t){(t instanceof i.VariableNode||t instanceof i.ConstantNode)&&e.set(t.output,t.data)})},e.getVariableNodesFromEvaluationSet=function(t){var e=[];return t.forEach(function(t){t instanceof i.VariableNode&&e.push(t)}),e},e.throwIfFeedDictionaryContainsNDArrays=function(t){Object.keys(t.dict).forEach(function(e){if(t.dict[+e].data instanceof o.NDArray)throw new Error("training requires FeedDictionary entries to be InputProvidersand not NDArrays.")})},e.loadInputsFromFeedDictionaryToTensorArrayMap=function(t,e,n){Object.keys(t.dict).forEach(function(r){var i,s=t.dict[+r];i=s.data instanceof o.NDArray?s.data:s.data.getNextCopy(n),a.assert(a.arraysEqual(s.tensor.shape,i.shape),"Error loading FeedEntry: feeding NDArray of shape "+i.shape+" does not match Tensor (id: "+s.tensor.id+") shape: "+s.tensor.shape+"."),e.set(s.tensor,i)})},e.releaseFeedDictionaryInputsFromTensorArrayMap=function(t,e,n){Object.keys(t.dict).forEach(function(r){var a=t.dict[+r];if(!(a.data instanceof o.NDArray)){var i=a.data,s=e.get(a.tensor);i.disposeCopy(n,s)}e.delete(a.tensor)})},e.removeFeedDictionaryNodesFromEvaluationSet=function(t,e){for(var n=0;n<e.length;){var r=e[n];null!=t.dict[r.output.id]?e.splice(n,1):++n}},e.disposeAndInitializeOperationOutputs=function(t,e){t.forEach(function(t){s.isInputNode(t)||(s.isPassthroughNode(t,e)||e.disposeArray(t.output),e.set(t.output,null))})},e.disposeAndInitializeOperationInputGradients=function(t,e){t.forEach(function(t){Object.keys(t.inputs).forEach(function(n){var r=t.inputs[n];e.get(r,!0)!==e.get(t.output,!0)&&e.disposeArray(r),e.nullify(r)})})},e.disposeTransientOperationArrays=function(t,e,n){t.forEach(function(t){return t.disposeTransientArrays(e,n)})},e.throwErrorIfEvaluationSetContainsPlaceholderNodes=function(t){t.forEach(function(t){if(t instanceof i.PlaceholderNode){var e="["+t.output.shape.join(", ")+"]";throw new Error('Placeholder node "'+t.name+'" '+e+" not present in feed dictionary.")}})}},"jKW+":function(t,e,n){"use strict";var r=n("kM2E"),o=n("qARP"),a=n("dNDb");r(r.S,"Promise",{try:function(t){var e=o.f(this),n=a(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},jLs2:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("jMY8"),a=n("yNpf"),i=function(t){function e(e,n,r){var a=t.call(this)||this;return a.x1Tensor=e,a.x2Tensor=n,a.yTensor=r,o.assert(1===o.sizeFromShape(e.shape)||1===o.sizeFromShape(n.shape)||o.arraysEqual(e.shape,n.shape),"One of t1 or t2 must be a scalar, or t1 and t2 must have the same shape"),a}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x1Tensor),a=e.get(this.x2Tensor);t.scope(function(i){var s;s=o.isScalarShape(r.shape)?t.scalarDividedByArray(r,a):o.isScalarShape(a.shape)?t.arrayDividedByScalar(r,a):t.divide(r,a),e.set(n.yTensor,i(s))})},e.prototype.backProp=function(t,e,n){var r=this,i=e.get(this.x1Tensor),s=e.get(this.x2Tensor),u=n.get(this.yTensor),c=o.isScalarShape(i.shape),p=o.isScalarShape(s.shape);t.scope(function(){if(a.shouldBackProp(r.x1Tensor))if(c){var e=t.divide(u,s);n.add(r.x1Tensor,t.sum(e)),e.dispose()}else p?n.add(r.x1Tensor,t.arrayDividedByScalar(u,s)):n.add(r.x1Tensor,t.divide(u,s));if(a.shouldBackProp(r.x2Tensor)){var o=t.elementWiseMul(s,s),h=void 0;h=p?t.arrayDividedByScalar(i,o):c?t.scalarDividedByArray(i,o):t.divide(i,o);var l=t.neg(h),f=t.elementWiseMul(u,l);p?n.add(r.x2Tensor,t.sum(f)):n.add(r.x2Tensor,f)}})},e}(n("/ROS").Operation);e.Divide=i},jMY8:function(t,e,n){"use strict";function r(t){for(var e=t.length,n=0,r=0;e>0;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function o(t,e){if(!t)throw new Error(e)}function a(t,e){if(void 0===e&&(e=[]),Array.isArray(t))for(var n=0;n<t.length;++n)a(t[n],e);else e.push(t);return e}function i(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function s(t,n){if(isNaN(t))return!0;if("float32"===n)return!1;if("int32"===n)return t===e.NAN_INT32;if("bool"===n)return t===e.NAN_BOOL;throw new Error("Unknown dtype "+n)}Object.defineProperty(e,"__esModule",{value:!0});var u=n("BozM");e.shuffle=r,e.clamp=function(t,e,n){return Math.max(t,Math.min(e,n))},e.randUniform=function(t,e){return Math.random()*(e-t)+t},e.distSquared=function(t,e){for(var n=0,r=0;r<t.length;r++){var o=Number(t[r])-Number(e[r]);n+=o*o}return n},e.assert=o,e.assertShapesMatch=function(t,e,n){void 0===n&&(n=""),o(i(t,e),n+"Shapes "+t+" and "+e+" must match")},e.flatten=a,e.inferShape=function(t){for(var e=[];t instanceof Array;)e.push(t.length),t=t[0];return e},e.sizeFromShape=function(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e},e.isScalarShape=function(t){return 0===t.length},e.arraysEqual=i,e.isInt=function(t){return t%1==0},e.tanh=function(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)},e.sizeToSquarishShape=function(t){for(var e=Math.floor(Math.sqrt(t));e>1;--e)if(t%e==0)return[e,t/e];return[1,t]},e.createShuffledIndices=function(t){for(var e=new Uint32Array(t),n=0;n<t;++n)e[n]=n;return r(e),e},e.rightPad=function(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)},e.repeatedTry=function(t,e,n){return void 0===e&&(e=function(t){return 0}),new Promise(function(r,o){var a=0,i=function(){if(t())r();else{var s=e(++a);null!=n&&a>=n?o():setTimeout(i,s)}};setTimeout(i,0)})},e.getQueryParams=function(t){var e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}(e,n[0],n[1]),n.join("=")}),e},e.inferFromImplicitShape=function(t,e){for(var n=1,r=-1,o=0;o<t.length;++o)if(t[o]>0)n*=t[o];else if(-1===t[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(t[o]<=0)throw Error("Shapes can not be <= 0. Found "+t[o]+" at dim "+o);if(-1===r){if(e>0&&e!==n)throw Error("Size ("+e+") must match the product of shape "+t);return t}if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var a=t.slice();return a[r]=e/n,a},e.NAN_INT32=1<<31,e.NAN_BOOL=255,e.NAN_FLOAT32=NaN,e.getNaN=function(t){if("float32"===t)return e.NAN_FLOAT32;if("int32"===t)return e.NAN_INT32;if("bool"===t)return e.NAN_BOOL;throw new Error("Unknown dtype "+t)},e.isValNaN=s,e.squeezeShape=function(t){for(var e=[],n=[],r=0;r<t.length;++r)t[r]>1&&(e.push(t[r]),n.push(r));return{newShape:e,keptDims:n}},e.getTypedArrayFromDType=function(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n},e.isNDArrayInList=function(t,e){for(var n=0;n<e.length;n++)if(e[n].id===t.id)return!0;return!1},e.checkForNaN=function(t,e,n){for(var r=0;r<t.length;r++)if(s(t[r],e))throw Error("The result of the last math."+n+" has NaNs.")},e.flattenNameArrayMap=function(t,e){var n=[];if(t instanceof u.NDArray)n.push(t);else for(var r=t,o=0;o<e.length;o++)n.push(r[e[o]]);return n},e.unflattenToNameArrayMap=function(t,e){if(t.length!==e.length)throw new Error("Cannot unflatten NDArray[], keys and arrays are not of same length.");for(var n={},r=0;r<t.length;r++)n[t[r]]=e[r];return n}},jSF7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e,n){this.variableNames=["A"];var r=t.windowSize,o=t.batchSize,a=t.inSize,i=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===e?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = 0;\n        float bestValue = getA(batch, inOffset);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (isNaN(candidate)) {\n            setOutput(candidate);\n            return;\n          }\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "}}();e.ArgMinMaxProgram=r},jnen:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("P58p"),a=n("jMY8"),i=function(t){function e(e,n,r,i,s,u,c,p){void 0===c&&(c=1);var h=t.call(this)||this;return h.wTensor=e,h.xTensor=n,h.bTensor=r,h.yTensor=i,h.fieldSize=s,h.outputDepth=u,h.stride=c,h.assertWeightsShape(e.shape),h.zeroPad=null!=p?p:o.computeDefaultPad(h.xTensor.shape,h.fieldSize,h.stride),a.assert(a.isInt(h.zeroPad),"The zero padding ("+h.zeroPad+") must be an integer. Change the stride and/or zero pad parameters"),h}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.wTensor),o=e.get(this.bTensor),a=e.get(this.xTensor);t.scope(function(i){e.set(n.yTensor,i(t.conv2d(a,r,o,n.stride,n.zeroPad)))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.wTensor),a=e.get(this.xTensor),i=n.get(this.yTensor);t.scope(function(){var e=t.conv2dDerFilter(a,i,o.shape,r.stride,r.zeroPad),s=t.conv2dDerBias(i),u=t.conv2dDerInput(a.shape,i,o,r.stride,r.zeroPad);n.add(r.wTensor,e),n.add(r.bTensor,s),n.add(r.xTensor,u)})},e.prototype.assertWeightsShape=function(t){a.assert(t[0]===this.fieldSize&&t[1]===this.fieldSize&&t[2]===this.xTensor.shape[2]&&t[3]===this.outputDepth,"weights must be of shape ["+this.fieldSize+","+this.fieldSize+","+this.xTensor.shape[2]+","+this.outputDepth+"] but they are ofshape ["+t+"]")},e}(n("/ROS").Operation);e.Convolution2D=i},jyFz:function(t,e,n){var r=function(){return this}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n("SldL"),o)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},jySH:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("lYtQ"),o=function(){return function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),o=0;o<n.length;o++)n[o]=t[e[o]];this.outputShape=n,this.rank=n.length;var a=r.getCoordsDataType(this.rank),i=function(t){var e=t.length;if(e>4)throw Error("Transpose for rank "+e+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=new Array(e),o=0;o<t.length;o++)r[t[o]]=n[o];return r.join()}(e);this.userCode="\n    void main() {\n      "+a+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "}}();e.TransposeProgram=o},kM2E:function(t,e,n){var r=n("7KvD"),o=n("FeBl"),a=n("+ZMJ"),i=n("hJx8"),s="prototype",u=function(t,e,n){var c,p,h,l=t&u.F,f=t&u.G,d=t&u.S,v=t&u.P,y=t&u.B,m=t&u.W,g=f?o:o[e]||(o[e]={}),x=g[s],b=f?r:d?r[e]:(r[e]||{})[s];f&&(n=e);for(c in n)(p=!l&&b&&void 0!==b[c])&&c in g||(h=p?b[c]:n[c],g[c]=f&&"function"!=typeof b[c]?n[c]:y&&p?a(h,r):m&&b[c]==h?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[s]=t[s],e}(h):v&&"function"==typeof h?a(Function.call,h):h,v&&((g.virtual||(g.virtual={}))[c]=h,t&u.R&&x&&!x[c]&&i(x,c,h)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},kcYE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("BozM"),o=function(){function t(){this.one=r.Scalar.new(1)}return t.prototype.output=function(t,e){return t.tanh(e)},t.prototype.der=function(t,e,n){var r=this;return t.scope(function(){var e=t.elementWiseMul(n,n);return t.scalarMinusArray(r.one,e)})},t.prototype.dispose=function(){this.one.dispose()},t}();e.TanHFunc=o;var a=function(){function t(){}return t.prototype.output=function(t,e){return t.relu(e)},t.prototype.der=function(t,e,n){return t.step(e)},t.prototype.dispose=function(){},t}();e.ReLUFunc=a;var i=function(){function t(t){this.alpha=t}return t.prototype.output=function(t,e){return t.leakyRelu(e,this.alpha)},t.prototype.der=function(t,e,n){return t.step(e,this.alpha)},t.prototype.dispose=function(){},t}();e.LeakyReluFunc=i;var s=function(){function t(){}return t.prototype.output=function(t,e){return t.sigmoid(e)},t.prototype.der=function(t,e,n){return t.scope(function(){var e=t.elementWiseMul(n,n);return t.subStrict(n,e)})},t.prototype.dispose=function(){},t}();e.SigmoidFunc=s;var u=function(){function t(){this.two=r.Scalar.new(2)}return t.prototype.output=function(t,e){return t.elementWiseMul(e,e)},t.prototype.der=function(t,e,n){return t.scalarTimesArray(this.two,e)},t.prototype.dispose=function(){this.two.dispose()},t}();e.SquareFunc=u;var c=function(){function t(){}return t.prototype.output=function(t,e){return t.elu(e)},t.prototype.der=function(t,e,n){return t.eluDer(e)},t.prototype.dispose=function(){},t}();e.EluFunc=c},kiVh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBroadcastDims=function(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var a=n-1-o,i=t[a]||1;(e[e.length-1-o]||1)>1&&1===i&&r.unshift(a)}return r},e.broadcastDimsAreOuter=function(t){for(var e=0;e<t.length;e++)if(t[e]!==e)return!1;return!0},e.assertAndGetBroadcastShape=function(t,e){for(var n=[],r="Operands could not be broadcast together with shapes "+t+" and "+e+".",o=Math.max(t.length,e.length),a=0;a<o;a++){var i=t[t.length-a-1]||1,s=e[e.length-a-1]||1;if(i>1&&s>1&&i!==s)throw Error(r);n.unshift(Math.max(i,s))}return n}},knuC:function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},l7u8:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("yNpf"),a=function(t){function e(e,n){var r=t.call(this)||this;return r.xTensor=e,r.yTensor=n,r}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.xTensor);t.scope(function(o){e.set(n.yTensor,o(t.log(r)))})},e.prototype.backProp=function(t,e,n){var r=this,a=e.get(this.xTensor),i=n.get(this.yTensor);t.scope(function(){o.shouldBackProp(r.xTensor)&&n.add(r.xTensor,t.divide(i,a))})},e}(n("/ROS").Operation);e.Log=a},lABf:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("lCbW"),a=n("9RhS"),i=n("P58p"),s=n("BozM"),u=n("jMY8"),c=function(){function t(t){this.g=t}return t.prototype.dense=function(t,e,n,r,a,i,s){void 0===r&&(r=null),void 0===a&&(a=!0),void 0===i&&(i=new o.VarianceScalingInitializer),void 0===s&&(s=new o.ZerosInitializer);var u=this.g.variable(t+"-weights",i.initialize([e.shape[0],n],e.shape[0],n)),c=this.g.matmul(e,u);if(a){var p=this.g.variable(t+"-bias",s.initialize([n],e.shape[0],n));c=this.g.add(c,p)}return null!=r&&(c=r(c)),c},t}();e.GraphLayers=c;var p=function(){function t(){this.nodes=[],this.layers=new c(this)}return t.prototype.variable=function(t,e){return this.addNodeAndReturnOutput(new f(this,t,e))},t.prototype.placeholder=function(t,e){return this.addNodeAndReturnOutput(new d(this,t,e))},t.prototype.constant=function(t){var e;if("number"==typeof t)e=s.Scalar.new(t);else if(t instanceof s.NDArray)e=t;else{if(!(t instanceof Array))throw new Error("unimplemented constant type.");var n=u.flatten(t),r=new Float32Array(n);e=s.NDArray.make(u.inferShape(t),{values:r})}return this.addNodeAndReturnOutput(new v(this,e))},t.prototype.reshape=function(t,e){return this.addNodeAndReturnOutput(new y(this,"Reshape",t,e))},t.prototype.fusedLinearCombination=function(t,e,n,r){return this.addNodeAndReturnOutput(new m(this,t,e,n,r))},t.prototype.add=function(t,e){return this.addNodeAndReturnOutput(new g(this,t,e))},t.prototype.subtract=function(t,e){return this.addNodeAndReturnOutput(new x(this,t,e))},t.prototype.multiply=function(t,e){return this.addNodeAndReturnOutput(new b(this,t,e))},t.prototype.divide=function(t,e){return this.addNodeAndReturnOutput(new w(this,t,e))},t.prototype.reduceSum=function(t){return this.addNodeAndReturnOutput(new E(this,t))},t.prototype.concat3d=function(t,e,n){return this.addNodeAndReturnOutput(new A(this,t,e,n))},t.prototype.matmul=function(t,e){return this.addNodeAndReturnOutput(new T(this,t,e))},t.prototype.conv2d=function(t,e,n,r,o,a,i){return void 0===a&&(a=1),this.addNodeAndReturnOutput(new S(this,t,e,n,r,o,a,i))},t.prototype.maxPool=function(t,e,n,r){return void 0===n&&(n=1),this.addNodeAndReturnOutput(new _(this,t,e,n,r))},t.prototype.exp=function(t){return this.addNodeAndReturnOutput(new O(this,t))},t.prototype.log=function(t){return this.addNodeAndReturnOutput(new R(this,t))},t.prototype.relu=function(t){return this.addNodeAndReturnOutput(new M(this,t))},t.prototype.leakyRelu=function(t,e){return this.addNodeAndReturnOutput(new N(this,t,e))},t.prototype.prelu=function(t,e){return this.addNodeAndReturnOutput(new k(this,t,e))},t.prototype.elu=function(t){return this.addNodeAndReturnOutput(new C(this,t))},t.prototype.tanh=function(t){return this.addNodeAndReturnOutput(new D(this,t))},t.prototype.sigmoid=function(t){return this.addNodeAndReturnOutput(new P(this,t))},t.prototype.square=function(t){return this.addNodeAndReturnOutput(new I(this,t))},t.prototype.softmax=function(t){return this.addNodeAndReturnOutput(new L(this,t))},t.prototype.softmaxCrossEntropyCost=function(t,e){return this.addNodeAndReturnOutput(new F(this,t,e))},t.prototype.meanSquaredCost=function(t,e){return this.addNodeAndReturnOutput(new z(this,t,e))},t.prototype.argmax=function(t){return this.addNodeAndReturnOutput(new B(this,t))},t.prototype.argmaxEquals=function(t,e){return this.addNodeAndReturnOutput(new U(this,t,e))},t.prototype.addNodeAndReturnOutput=function(t){return this.nodes.push(t),t.validate(),t.output},t.prototype.getNodes=function(){return this.nodes},t}();e.Graph=p;var h=function(){function t(e){this.shape=e,this.id=t.nextID++}return t.nextID=0,t}();e.Tensor=h;var l=function(){function t(e,n,r,o){this.graph=e,this.name=n,this.inputs=r,this.output=o,this.id=t.nextID++,o.node=this}return t.nextID=0,t}();e.Node=l;var f=function(t){function e(e,n,r){var o=t.call(this,e,n,{},new h(r.shape))||this;return o.data=r,o}return r(e,t),e.prototype.validate=function(){u.assert(null!=this.data,"Error adding variable op: Data for variable '"+this.name+"' is null or undefined")},e}(l);e.VariableNode=f;var d=function(t){function e(e,n,r){return t.call(this,e,n,{},new h(r))||this}return r(e,t),e.prototype.validate=function(){},e}(l);e.PlaceholderNode=d;var v=function(t){function e(e,n){var r=t.call(this,e,"Constant",{},new h(n.shape))||this;return r.data=n,r}return r(e,t),e.prototype.validate=function(){u.assert(null!=this.data,"Error adding constant: data for placeholder '"+this.name+"' is null or undefined")},e}(l);e.ConstantNode=v;var y=function(t){function e(e,n,r,o){var a=t.call(this,e,n,{x:r},new h(o))||this;return a.name=n,a.x=r,a.shape=o,a}return r(e,t),e.prototype.validate=function(){var t=u.sizeFromShape(this.x.shape),e=u.sizeFromShape(this.shape);u.assert(t===e,"Error making reshape operation: input to reshape '"+this.name+"' of shape ("+this.x.shape+") does not match size of requested shape "+this.shape+".")},e.X="x",e}(l);e.ReshapeNode=y;var m=function(t){function e(e,n,r,o,a){var i=t.call(this,e,"Linear Combination",{t1:n,t2:r,c1:o,c2:a},new h(n.shape))||this;return i.t1=n,i.t2=r,i.c1=o,i.c2=a,i}return r(e,t),e.prototype.validate=function(){if(u.assertShapesMatch(this.t1.shape,this.t2.shape),!u.isScalarShape(this.c1.shape))throw new Error("Error adding fusedLinearCombination: c1 is not a scalar, got shape: "+this.c1.shape);if(!u.isScalarShape(this.c2.shape))throw new Error("Error adding fusedLinearCombination: c2 is not a scalar, got shape: "+this.c2.shape)},e.T1="t1",e.T2="t2",e.C1="c1",e.C2="c2",e}(l);e.FusedLinearCombinationNode=m;var g=function(t){function e(e,n,r){var o=t.call(this,e,"Add",{t1:n,t2:r},new h(1===u.sizeFromShape(n.shape)?r.shape:n.shape.length<r.shape.length?r.shape:n.shape))||this;return o.t1=n,o.t2=r,o}return r(e,t),e.prototype.validate=function(){u.assert(1===u.sizeFromShape(this.t1.shape)||1===u.sizeFromShape(this.t2.shape)||u.arraysEqual(this.t1.shape,this.t2.shape)||2===this.t1.shape.length&&1===this.t2.shape.length&&this.t1.shape[1]===this.t2.shape[0]||1===this.t1.shape.length&&2===this.t2.shape.length&&this.t1.shape[0]===this.t2.shape[1],"Error adding add operation op: one of inputs must be scalar, shapes "+this.t1.shape+" and "+this.t2.shape+" must match,or one of them can be broadcasted (2D and 1D).")},e.T1="t1",e.T2="t2",e}(l);e.AddNode=g;var x=function(t){function e(e,n,r){var o=t.call(this,e,"Subtract",{t1:n,t2:r},new h(1===u.sizeFromShape(n.shape)?r.shape:n.shape))||this;return o.t1=n,o.t2=r,o}return r(e,t),e.prototype.validate=function(){u.assert(1===u.sizeFromShape(this.t1.shape)||1===u.sizeFromShape(this.t2.shape)||u.arraysEqual(this.t1.shape,this.t2.shape),"Error adding subtract op: one of inputs must be scalar or the shapes "+this.t1.shape+" and "+this.t2.shape+" must match.")},e.T1="t1",e.T2="t2",e}(l);e.SubtractNode=x;var b=function(t){function e(e,n,r){var o=t.call(this,e,"Multiply",{t1:n,t2:r},new h(1===u.sizeFromShape(n.shape)?r.shape:n.shape))||this;return o.t1=n,o.t2=r,o}return r(e,t),e.prototype.validate=function(){u.assert(1===u.sizeFromShape(this.t1.shape)||1===u.sizeFromShape(this.t2.shape)||u.arraysEqual(this.t1.shape,this.t2.shape),"Error adding multiply op: one of inputs must be scalar or the shapes "+this.t1.shape+" and "+this.t2.shape+" must match.")},e.T1="t1",e.T2="t2",e}(l);e.MultiplyNode=b;var w=function(t){function e(e,n,r){var o=t.call(this,e,"Divide",{t1:n,t2:r},new h(1===u.sizeFromShape(n.shape)?r.shape:n.shape))||this;return o.t1=n,o.t2=r,o}return r(e,t),e.prototype.validate=function(){u.assert(1===u.sizeFromShape(this.t1.shape)||1===u.sizeFromShape(this.t2.shape)||u.arraysEqual(this.t1.shape,this.t2.shape),"Error adding divide op: one of inputs must be scalar or the shapes "+this.t1.shape+" and "+this.t2.shape+" must match.")},e.T1="t1",e.T2="t2",e}(l);e.DivideNode=w;var E=function(t){function e(e,n){return t.call(this,e,"ReduceSum",{x:n},new h([]))||this}return r(e,t),e.prototype.validate=function(){},e.X="x",e}(l);e.ReduceSumNode=E;var A=function(t){function e(e,n,r,o){var i=t.call(this,e,"Concat3D",{x1:n,x2:r},new h(a.computeOutShape(n.shape,r.shape,o)))||this;return i.x1=n,i.x2=r,i.axis=o,i}return r(e,t),e.prototype.validate=function(){a.assertParams(this.x1.shape,this.x2.shape,this.axis)},e.X1="x1",e.X2="x2",e.AXIS="axis",e}(l);e.Concat3DNode=A;var T=function(t){function e(e,n,r){var o=t.call(this,e,"MatMul",{x1:n,x2:r},new h(function(t,e){return 1===t.length&&1===e.length?[1]:1===t.length&&2===e.length?[e[1]]:2===t.length&&1===e.length?[t[0]]:[t[0],e[1]]}(n.shape,r.shape)))||this;return o.x1=n,o.x2=r,o}return r(e,t),e.prototype.validate=function(){if(2===this.x1.shape.length&&2===this.x2.shape.length)u.assert(this.x1.shape[1]===this.x2.shape[0],"Error adding matmul op: inner shapes of matrices with shapes "+this.x1.shape+" and "+this.x2.shape+" must match.");else if(2===this.x1.shape.length&&1===this.x2.shape.length)u.assert(this.x1.shape[1]===this.x2.shape[0],"Error adding matmul op: second dimension of matrix with shape "+this.x1.shape.toString()+" must match size of vector with shape "+this.x2.shape+".");else{if(1!==this.x1.shape.length||2!==this.x2.shape.length)throw new Error("Error adding matmul op: inputs must be vectors or matrices.");u.assert(this.x1.shape[0]===this.x2.shape[0],"Error adding matmul op: size of vector with shape "+this.x1.shape+" must match first dimension of matrix with shape "+this.x2.shape+".")}},e.X1="x1",e.X2="x2",e}(l);e.MatMulNode=T;var S=function(t){function e(e,n,r,o,a,s,u,c){void 0===u&&(u=1);var p=t.call(this,e,"Convolution 2D",{x:n,w:r,b:o},new h(i.computeOutputShape3D(n.shape,a,s,u,c)))||this;return p.x=n,p.w=r,p.b=o,p.fieldSize=a,p.outputDepth=s,p.stride=u,p.zeroPad=c,p}return r(e,t),e.prototype.validate=function(){u.assert(3===this.x.shape.length,"Error adding conv2d op: input must be of rank 3, but got shape: "+this.x.shape+"."),u.assert(4===this.w.shape.length,"Error adding conv2d op: weights must be of rank 4, but got shape: "+this.w.shape+"."),u.assert(1===this.b.shape.length,"Error adding conv2d op: biases must be of rank 1, but got shape: "+this.b.shape+"."),u.assert(this.x.shape[2]===this.w.shape[2],"Error adding conv2d op: depth of input ("+this.x.shape[2]+") must match input depth for weights ("+this.w.shape[2]+").")},e.X="x",e.W="w",e.B="b",e}(l);e.Convolution2DNode=S;var _=function(t){function e(e,n,r,o,a){void 0===o&&(o=1);var s=t.call(this,e,"Max pool",{x:n},new h(i.computeOutputShape3D(n.shape,r,n.shape[2],o,a)))||this;return s.x=n,s.fieldSize=r,s.stride=o,s.zeroPad=a,s}return r(e,t),e.prototype.validate=function(){u.assert(3===this.x.shape.length,"Error adding maxPool op: input must be of rank 3, but got shape: "+this.x.shape+".")},e.X="x",e}(l);e.MaxPoolNode=_;var M=function(t){function e(e,n){return t.call(this,e,"ReLU",{x:n},new h(n.shape))||this}return r(e,t),e.prototype.validate=function(){},e.X="x",e}(l);e.ReLUNode=M;var N=function(t){function e(e,n,r){var o=t.call(this,e,"LeakyReLU",{x:n},new h(n.shape))||this;return o.alpha=r,o}return r(e,t),e.prototype.validate=function(){},e.X="x",e}(l);e.LeakyReLUNode=N;var k=function(t){function e(e,n,r){var o=t.call(this,e,"PReLU",{x:n,alpha:r},new h(n.shape))||this;return o.x=n,o.alpha=r,o}return r(e,t),e.prototype.validate=function(){u.assert(u.arraysEqual(this.x.shape,this.alpha.shape),"Error adding pRelu op: the shapes x: "+this.x.shape+" and alpha: "+this.alpha.shape+" must match.")},e.X="x",e.ALPHA="alpha",e}(l);e.PReLUNode=k;var C=function(t){function e(e,n){return t.call(this,e,"Elu",{x:n},new h(n.shape))||this}return r(e,t),e.prototype.validate=function(){},e.X="x",e}(l);e.EluNode=C;var O=function(t){function e(e,n){return t.call(this,e,"Exp",{x:n},new h(n.shape))||this}return r(e,t),e.prototype.validate=function(){},e.X="x",e}(l);e.ExpNode=O;var R=function(t){function e(e,n){return t.call(this,e,"Log",{x:n},new h(n.shape))||this}return r(e,t),e.prototype.validate=function(){},e.X="x",e}(l);e.LogNode=R;var D=function(t){function e(e,n){return t.call(this,e,"TanH",{x:n},new h(n.shape))||this}return r(e,t),e.prototype.validate=function(){},e.X="x",e}(l);e.TanHNode=D;var P=function(t){function e(e,n){return t.call(this,e,"Sigmoid",{x:n},new h(n.shape))||this}return r(e,t),e.prototype.validate=function(){},e.X="x",e}(l);e.SigmoidNode=P;var I=function(t){function e(e,n){return t.call(this,e,"Square",{x:n},new h(n.shape))||this}return r(e,t),e.prototype.validate=function(){},e.X="x",e}(l);e.SquareNode=I;var F=function(t){function e(e,n,r){var o=t.call(this,e,"SoftmaxCrossEntropyCost",{x:n,target:r},new h([]))||this;return o.x=n,o.target=r,o}return r(e,t),e.prototype.validate=function(){u.assert(u.arraysEqual(this.x.shape,this.target.shape),"Error adding softmaxCrossEntropyCost op: x shape ("+this.x.shape+") must match target shape ("+this.target.shape+").")},e.X="x",e.TARGET="target",e}(l);e.SoftmaxCrossEntropyCostNode=F;var L=function(t){function e(e,n){var r=t.call(this,e,"Softmax",{x:n},new h(n.shape))||this;return r.x=n,r}return r(e,t),e.prototype.validate=function(){u.assert(1===this.x.shape.length,"The input to a softmax must be a 1-D tensor"),u.assert(this.x.shape[0]>=2,"The input to a softmax must have at least 2 values")},e.X="x",e}(l);e.SoftmaxNode=L;var z=function(t){function e(e,n,r){var o=t.call(this,e,"Mean Squared Cost",{label:n,prediction:r},new h([]))||this;return o.label=n,o.prediction=r,o}return r(e,t),e.prototype.validate=function(){u.assert(u.arraysEqual(this.label.shape,this.prediction.shape),"Error adding meanSquaredCost op: label shape ("+this.label.shape+") must match prediction shape ("+this.prediction.shape+").")},e.LABEL="label",e.PREDICTION="prediction",e}(l);e.MeanSquaredCostNode=z;var B=function(t){function e(e,n){var r=t.call(this,e,"ArgMax",{x:n},new h([1]))||this;return r.x=n,r}return r(e,t),e.prototype.validate=function(){u.assert(u.sizeFromShape(this.x.shape)>0,"Error adding argmax op: input tensor must have at least one entry.")},e.X="x",e}(l);e.ArgMaxNode=B;var U=function(t){function e(e,n,r){var o=t.call(this,e,"ArgMaxEquals",{x1:n,x2:r},new h([1]))||this;return o.x1=n,o.x2=r,o}return r(e,t),e.prototype.validate=function(){u.assert(u.arraysEqual(this.x1.shape,this.x2.shape),"Error adding ArgMaxEquals op: x1 shape ("+this.x1.shape+") must match x2 shape ("+this.x2.shape+").")},e.X1="x1",e.X2="x2",e}(l);e.ArgMaxEqualsNode=U},lCbW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("BozM"),o=function(){function t(t,e,n){void 0===t&&(t=1),void 0===e&&(e="fan_in"),void 0===n&&(n="normal"),this.scale=t,this.mode=e,this.distribution=n}return t.prototype.initialize=function(t,e,n){var o=0;if("fan_in"===this.mode)o=e;else if("fan_out"===this.mode)o=n;else{if("fan_avg"!==this.mode)throw new Error("Unexpected mode for variance scaling initializer: "+this.mode);o=(e+n)/2}if("normal"===this.distribution)return r.NDArray.randTruncatedNormal(t,0,Math.sqrt(this.scale/o));if("uniform"===this.distribution)return r.NDArray.randUniform(t,0,Math.sqrt(3*this.scale/o));throw new Error("Unexpected distribution for variance scaling initializer: "+this.distribution)},t}();e.VarianceScalingInitializer=o;var a=function(){function t(){}return t.prototype.initialize=function(t,e,n){return r.NDArray.zeros(t)},t}();e.ZerosInitializer=a;var i=function(){function t(){}return t.prototype.initialize=function(t,e,n){var o=r.NDArray.zeros(t);return o.fill(1),o},t}();e.OnesInitializer=i;var s=function(){function t(t){void 0===t&&(t=0),this.value=t}return t.prototype.initialize=function(t,e,n){var o=r.NDArray.zeros(t);return o.fill(this.value),o},t}();e.ConstantInitializer=s;var u=function(){function t(t){this.ndarray=t}return t.prototype.initialize=function(t,e,n){return this.ndarray},t}();e.NDArrayInitializer=u;var c=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=.05),this.mean=t,this.stdev=e}return t.prototype.initialize=function(t,e,n){return r.NDArray.randNormal(t,this.mean,this.stdev)},t}();e.RandomNormalInitializer=c;var p=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=.05),this.mean=t,this.stdev=e}return t.prototype.initialize=function(t,e,n){return r.NDArray.randTruncatedNormal(t,this.mean,this.stdev)},t}();e.RandomTruncatedNormalInitializer=p;var h=function(){function t(t,e){void 0===t&&(t=-.05),void 0===e&&(e=.05),this.minval=t,this.maxval=e}return t.prototype.initialize=function(t,e,n){return r.NDArray.randUniform(t,this.minval,this.maxval)},t}();e.RandomUniformInitializer=h},lOnJ:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},lTfx:function(t,e){},lYtQ:function(t,e,n){"use strict";function r(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var e=t.name;return"\n    float get"+e.charAt(0).toUpperCase()+e.slice(1)+"() {\n      return sample("+e+", halfCR);\n    }\n  "}(t);case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);return"\n    float "+n+"(int index) {\n      return "+n+"Flat(index);\n    }\n  "}(t);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.shapeInfo.texShape,i=t.name,u="get"+i.charAt(0).toUpperCase()+i.slice(1),c=n[0],p=n[1];if(s.arraysEqual(e,n))return"\n    float "+u+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+p+".0, "+c+".0);\n      return sample("+i+", uv);\n    }\n  ";var h=s.squeezeShape(e),l=h.newShape,f=h.keptDims,d=l;if(d.length<e.length){var v=o(t,d),y=["row","col"];return"\n      "+r(v)+"\n      float "+u+"(int row, int col) {\n        return "+u+"("+a(y,f)+");\n      }\n    "}if(1===p)return"\n    float "+u+"(int row, int col) {\n      int index = row * "+e[1]+" + col;\n      vec2 uv = vec2(0.5, (float(index) + 0.5) / "+c+".0);\n      return sample("+i+", uv);\n    }\n  ";if(1===c)return"\n    float "+u+"(int row, int col) {\n      int index = row * "+e[1]+" + col;\n      vec2 uv = vec2((float(index) + 0.5) / "+p+".0, 0.5);\n      return sample("+i+", uv);\n    }\n  ";return"\n  float "+u+"(int row, int col) {\n    vec2 uv = UVfrom2D("+c+", "+p+", "+e[1]+", row, col);\n    return sample("+i+", uv);\n  }\n"}(t);case 3:return function(t){var e=t.shapeInfo.texShape,n=t.shapeInfo.logicalShape,i=t.name,u="get"+i.charAt(0).toUpperCase()+i.slice(1),c=e[0],h=e[1],l=n[1]*n[2],f=n[2],d=t.shapeInfo.textureType;if(d===p.TextureType.DEFAULT){var v=s.squeezeShape(n),y=v.newShape,m=v.keptDims,g=y;if(g.length<n.length){var x=o(t,g),b=["row","col","depth"];return"\n        "+r(x)+"\n        float "+u+"(int row, int col, int depth) {\n          return "+u+"("+a(b,m)+");\n        }\n      "}}if(h===l){if(d===p.TextureType.DEFAULT)return"\n        float "+u+"(int row, int col, int depth) {\n          int texR = row;\n          int texC = col * "+f+" + depth;\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+h+".0, "+c+".0);\n          return sample("+i+", uv);\n        }\n      ";if(d===p.TextureType.RGBA_COLOR)return"\n        float "+u+"(int row, int col, int depth) {\n          vec2 uv = (vec2(col, row) + halfCR) /\n                     vec2("+h+".0, "+c+".0);\n          return sampleUVAndDepth("+i+", uv, depth);\n        }\n      ";throw new Error("Unknown TextureType "+d+".")}if(h===f&&d===p.TextureType.DEFAULT)return"\n    float "+u+"(int row, int col, int depth) {\n      int texR = row * "+n[1]+" + col;\n      int texC = depth;\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+".0, "+c+".0);\n      return sample("+i+", uv);\n    }\n  ";if(d===p.TextureType.DEFAULT)return"\n      float "+u+"(int row, int col, int depth) {\n        vec2 uv = UVfrom3D(\n            "+c+", "+h+", "+l+", "+f+", row, col, depth);\n        return sample("+i+", uv);\n      }\n  ";if(d===p.TextureType.RGBA_COLOR)return"\n      float "+u+"(int row, int col, int depth) {\n        vec2 uv = UVfrom2D("+c+", "+h+", "+n[1]+", row, col);\n        return sampleUVAndDepth("+i+", uv, depth);\n      }\n    ";throw new Error("Unknown TextureType "+d+".")}(t);case 4:return function(t){var e=t.shapeInfo.logicalShape,n=t.shapeInfo.texShape,i=t.name,u="get"+i.charAt(0).toUpperCase()+i.slice(1),c=n[0],p=n[1],h=e[3],l=e[2]*h,f=e[1]*l,d=s.squeezeShape(e),v=d.newShape,y=d.keptDims;if(v.length<e.length){var m=o(t,v),g=["row","col","depth","depth2"];return"\n      "+r(m)+"\n      float "+u+"(int row, int col, int depth, int depth2) {\n        return "+u+"("+a(g,y)+");\n      }\n    "}if(p===f)return"\n      float "+u+"(int row, int col, int depth, int depth2) {\n        int texR = row;\n        int texC = col * "+l+" + depth * "+h+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+c+".0);\n        return sample("+i+", uv);\n      }\n    ";if(p===h)return"\n      float "+u+"(int row, int col, int depth, int depth2) {\n        int texR = row * "+e[1]*e[2]+" + col * "+e[2]+" + depth;\n        int texC = depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+c+".0);\n        return sample("+i+", uv);\n      }\n    ";return"\n    float "+u+"(int row, int col, int depth, int depth2) {\n      vec2 uv = UVfrom4D("+c+", "+p+", "+f+", "+l+",\n          "+h+", row, col, depth, depth2);\n      return sample("+i+", uv);\n    }\n  "}(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function o(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function a(t,e){return e.map(function(e){return t[e]}).join(", ")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("fpai"),s=n("jMY8"),u=n("kiVh"),c=n("1S1d"),p=n("1S1d");e.makeShader=function(t,e,n,o){var a=i.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?f:h,c=i.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")?d:l,y=t.map(function(t){return"uniform sampler2D "+t.name+";"}).join("\n"),m=t.map(function(t){return function(t,e,n){var o=function(t){var e=t.name,n=t.shapeInfo.texShape,r="get"+e.charAt(0).toUpperCase()+e.slice(1)+"Flat",o=n[0],a=n[1];return 1===a&&1===o?"\n      float "+r+"(int index) {\n        return sample("+e+", halfCR);\n      }\n    ":1===a?"\n      float "+r+"(int index) {\n        vec2 uv = vec2(0.5, (float(index) + 0.5) / "+o+".0);\n        return sample("+e+", uv);\n      }\n    ":1===o?"\n      float "+r+"(int index) {\n        vec2 uv = vec2((float(index) + 0.5) / "+a+".0, 0.5);\n        return sample("+e+", uv);\n      }\n    ":"\n    float "+r+"(int index) {\n      vec2 uv = UVfrom1D("+o+", "+a+", index);\n      return sample("+e+", uv);\n    }\n  "}(t);return o+=r(t),(n||s.arraysEqual(t.shapeInfo.logicalShape,e.logicalShape))&&(o+=function(t,e,n){var r=t.shapeInfo.texShape,o=t.name,a=t.shapeInfo.textureType===p.TextureType.RGBA_COLOR,i=o.charAt(0).toUpperCase()+o.slice(1),c="get"+i+"AtOutCoords",h=u.getBroadcastDims(t.shapeInfo.logicalShape,e.logicalShape),l=t.shapeInfo.logicalShape.length,f=e.logicalShape.length,d=n&&(f>l||h.length>0),v=u.broadcastDimsAreOuter(h);if(d&&!v)return function(t,e,n,r){var o=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,i="int";2===a?i="ivec2":3===a?i="ivec3":4===a&&(i="ivec4");var s,c=u.getBroadcastDims(t.shapeInfo.logicalShape,e.logicalShape),p=a-o;s=0===o?"":a<2&&c.length>=1?"coords = 0;":c.map(function(t){return"coords["+(t+p)+"] = 0;"}).join("\n");var h="";return h=a<2&&o>0?"coords":t.shapeInfo.logicalShape.map(function(t,e){return"coords["+(e+p)+"]"}).join(", "),"\n    float "+r+"() {\n      "+i+" coords = getOutputCoords();\n      "+s+"\n      return get"+n+"("+h+");\n    }\n  "}(t,e,i,c);var y=e.texShape;if(s.arraysEqual(r,y)&&!a)return"\n      float "+c+"() {\n        return sample("+o+", resultUV);\n      }\n    ";var m=a?[r[0],r[1]*t.shapeInfo.logicalShape[2]]:r,g="return sample("+o+", uv);",x="";a&&(x="\n      int col = texC / "+t.shapeInfo.logicalShape[2]+";\n      int texD = texC - col * "+t.shapeInfo.logicalShape[2]+";\n      texC = col;\n    ",g="return sampleUVAndDepth("+o+", uv, texD);");var b=s.sizeFromShape(m),w="";return d&&v&&(w="\n        int mainPart = index / "+b+";\n        index -= mainPart * "+b+";\n      "),"\n    float "+c+"() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+y[0]+", "+y[1]+"));\n      int index = resTexRC.x * "+y[1]+" + resTexRC.y;\n      "+w+"\n      int texR = index / "+m[1]+";\n      int texC = index - texR * "+m[1]+";\n\n      "+x+"\n\n      vec2 uv = (vec2(texC, texR) + halfCR) /\n                 vec2("+r[1]+".0, "+r[0]+".0);\n\n      "+g+"\n    }\n  "}(t,e,n)),o}(t,e,o)}).join("\n"),g=e.texShape,x=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){return 1===e[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+e[1]+".0);\n      }\n    ":1===e[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+e[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      return resTexRC.x * "+e[1]+" + resTexRC.y;\n    }\n  "}(0,e);case 2:return function(t,e){return s.arraysEqual(t,e)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+e[0]+", "+e[1]+"));\n      }\n    ":1===t[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===t[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+t[1]+";\n      int c = index - r * "+t[1]+";\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return function(t,e){var n=t[1]*t[2],r=t[2];return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+n+";\n      index -= r * "+n+";\n      int c = index / "+r+";\n      int d = index - c * "+r+";\n      return ivec3(r, c, d);\n    }\n  "}(t,e);case 4:return function(t,e){var n=t[3],r=t[2]*n,o=t[1]*r;return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      int r = index / "+o+";\n      index -= r * "+o+";\n\n      int c = index / "+r+";\n      index -= c * "+r+";\n\n      int d = index / "+n+";\n      int d2 = index - d * "+n+";\n\n      return ivec4(r, c, d, d2);\n    }\n  "}(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}}(e.logicalShape,g);return[v,a,c,y,x,m,n].join("\n")};var h="\n  uniform float NaN;\n\n  const vec4 floatDeltas = vec4(\n      1.0,\n      1.0 / 255.0,\n      1.0 / (255.0 * 255.0),\n      1.0 / (255.0 * 255.0 * 255.0)\n  );\n  const float minValue = "+c.FLOAT_MIN+".0;\n  const float maxValue = "+c.FLOAT_MAX+".0;\n  const float range = (maxValue - minValue) / 255.0;\n  const vec2 dotRange = vec2(1.0, range);\n\n  float sample(sampler2D texture, vec2 uv) {\n    vec4 sampleValue = texture2D(texture, uv);\n    if (all(equal(sampleValue, vec4("+c.BYTE_NAN_VALUE+")))) {\n      return NaN;\n    }\n\n    vec4 encValue = floor(sampleValue * 255.0 + 0.5);\n    float decodedValue = dot(encValue, floatDeltas);\n    return dot(vec2(minValue, decodedValue), dotRange);\n  }\n",l="\n  const vec4 floatPowers = vec4(\n    1.0,\n    255.0,\n    255.0 * 255.0,\n    255.0 * 255.0 * 255.0\n  );\n  const vec2 recipRange = vec2(1.0/range);\n  const vec2 recipRange255 = vec2(1.0/(maxValue - minValue));\n\n  void setOutput(float decodedValue) {\n    if (isNaN(decodedValue)) {\n      gl_FragColor = vec4("+c.BYTE_NAN_VALUE+");\n      return;\n    }\n\n    float a = dot(vec2(decodedValue, -minValue), recipRange);\n    float b = fract(a) * 255.0;\n    float c = fract(b) * 255.0;\n    float d = fract(c) * 255.0;\n    gl_FragColor = floor(vec4(a, b, c, d)) / 255.0;\n\n    // TODO(dsmilkov): Version above gets better accuracy but probably slower\n    // than the version below. Benchmark to determine if the accuracy is worth\n    // the cost.\n\n    // float normValue = dot(vec2(decodedValue, -minValue), recipRange255);\n    // vec4 f = normValue * floatPowers;\n    // gl_FragColor = floor(fract(f) * 255.0) / 255.0;\n  }\n",f="\n  float sample(sampler2D texture, vec2 uv) {\n    return texture2D(texture, uv).r;\n  }\n",d="\n  void setOutput(float val) {\n    gl_FragColor = vec4(val, 0, 0, 0);\n  }\n",v="\n  precision highp float;\n  precision highp int;\n  varying vec2 resultUV;\n  const vec2 halfCR = vec2(0.5, 0.5);\n\n  bool isNaN(float val) {\n    float v1 = val * val;\n    float v2 = val * val;\n    return v1 == v2 ? false : true;\n  }\n\n  bool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n  }\n\n  float getNaN(vec4 values) {\n    return dot(vec4(1), values);\n  }\n\n  int round(float value) {\n    return int(floor(value + 0.5));\n  }\n\n  int imod(int x, int y) {\n    return x - y * (x / y);\n  }\n\n  const vec2 randomConst = vec2(\n    23.14069263277926, // e^pi (Gelfond's constant)\n     2.665144142690225 // 2^sqrt(2) (GelfondSchneider constant)\n  );\n\n  float random(float seed) {\n      return fract(cos(dot(resultUV * seed, randomConst)) * 12345.6789);\n  }\n\n  float sampleUVAndDepth(sampler2D texture, vec2 uv, int depth) {\n    float value;\n    if (depth == 0) {\n      value = texture2D(texture, uv).r;\n    } else if (depth == 1) {\n      value = texture2D(texture, uv).g;\n    } else if (depth == 2) {\n      value = texture2D(texture, uv).b;\n    } else if (depth == 3) {\n      value = texture2D(texture, uv).a;\n    }\n    return floor(value * 255.0 + 0.5);\n  }\n\n  \nvec2 UVfrom1D(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom2D(int texNumR, int texNumC, int numC, int row, int col) {\n  int index = row * numC + col;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom3D(int texNumR, int texNumC, int stride0,\n    int stride1, int row, int col, int depth) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom4D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n";e.getCoordsDataType=function(t){if(1===t)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";throw Error("GPU for rank "+t+" is not yet supported")}},lktj:function(t,e,n){var r=n("Ibhu"),o=n("xnc9");t.exports=Object.keys||function(t){return r(t,o)}},mCdk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e,n){this.variableNames=["A"],this.outputShape=[];var r=t[2];this.outputShape=[e[0],e[1],r];var o=n?[t[0]-1,t[1]-1,r]:t,a=n?[this.outputShape[0]-1,this.outputShape[1]-1,r]:this.outputShape;this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+o[0]/a[0]+",\n          "+o[1]/a[1]+");\n      const vec2 inputShapeRC = vec2("+t[0]+".0, "+t[1]+".0);\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        ivec2 yRC = coords.xy;\n        int d = coords.z;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "}}();e.ResizeBilinear3DProgram=r},mClu:function(t,e,n){var r=n("kM2E");r(r.S+r.F*!n("+E39"),"Object",{defineProperty:n("evD5").f})},mDrY:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){this.variableNames=["x","W"],e&&this.variableNames.push("bias"),this.outputShape=t.outShape;var n=e?"dotProd += getBias(d2);":"",r=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,i=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=4*Math.floor(t.inChannels/4),p=t.inChannels%4;this.userCode="\n      const ivec2 strides = ivec2("+a+", "+i+");\n      const ivec2 pads = ivec2("+r+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC;\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+c+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===p)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+c+") *\n                getW(wR, wC, "+c+", d2);\n            } else if ("+(2===p)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+c+"),\n                getX(batch, xR, xC, "+c+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+c+", d2),\n                getW(wR, wC, "+c+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===p)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+c+"),\n                getX(batch, xR, xC, "+c+" + 1),\n                getX(batch, xR, xC, "+c+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+c+", d2),\n                getW(wR, wC, "+c+" + 1, d2),\n                getW(wR, wC, "+c+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        "+n+"\n        setOutput(dotProd);\n      }\n    "}}();e.Conv2DProgram=r},mJJz:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("fpai"),a=n("BozM"),i=n("jMY8"),s=n("yNpf"),u=function(t){function e(e,n){var r=t.call(this)||this;return r.x=e,r.outTensor=n,i.assertShapesMatch(n.shape,[]),r.ones=o.ENV.math.keep(a.NDArray.ones(e.shape)),r}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.x);t.scope(function(o){e.set(n.outTensor,o(t.sum(r)))})},e.prototype.backProp=function(t,e,n){var r=this;s.shouldBackProp(this.x)&&t.scope(function(){var e=n.get(r.outTensor);n.add(r.x,t.scalarTimesArray(e,r.ones))})},e.prototype.dispose=function(){this.ones.dispose()},e}(n("/ROS").Operation);e.ReduceSum=u},msXi:function(t,e,n){var r=n("77Pl");t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var a=t.return;throw void 0!==a&&r(a.call(t)),e}}},nErl:function(t,e){(function(e){t.exports=e}).call(e,{})},nbdk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n("oERz"),a=n("BozM");!function(t){t[t.SUM=0]="SUM",t[t.MEAN=1]="MEAN"}(r=e.MetricReduction||(e.MetricReduction={}));var i=function(){function t(t,e,n){this.math=t,this.session=e,this.eventObserver=n,this.lastCostTimestamp=0,this.lastEvalTimestamp=0,this.resetStatistics(),this.zeroScalar=a.Scalar.new(0)}return t.prototype.resetStatistics=function(){this.totalBatchesTrained=0},t.prototype.train=function(t,e,n,o,i,s,u,c,p,h,l){void 0===p&&(p=r.MEAN),void 0===h&&(h=1500),void 0===l&&(l=500),this.costTensor=t,this.trainFeedEntries=e,this.metricTensor=s,this.metricFeedEntries=u,null!=c&&this.metricBatchSize!==c&&(null!=this.metricBatchSizeScalar&&this.metricBatchSizeScalar.dispose(),this.metricBatchSizeScalar=a.Scalar.new(c)),this.metricBatchSize=c,this.metricReduction=p,this.batchSize=n,this.optimizer=o,this.metricIntervalMs=h,this.costIntervalMs=l,this.currentTrainLoopNumBatches=i,this.batchesTrainedThisRun=0,this.isTraining=!0,this.trainStartTimestamp=performance.now(),this.trainNetwork()},t.prototype.stopTraining=function(){this.isTraining=!1},t.prototype.resumeTraining=function(){this.isTraining=!0,this.trainNetwork()},t.prototype.trainNetwork=function(){var t=this;if(this.batchesTrainedThisRun===this.currentTrainLoopNumBatches&&this.stopTraining(),this.isTraining){var e=performance.now(),n=null!=this.eventObserver.avgCostCallback&&e-this.lastCostTimestamp>this.costIntervalMs;n&&(this.lastCostTimestamp=e);var r=n?o.CostReduction.MEAN:o.CostReduction.NONE;this.math.scope(function(o){var a=t.session.train(t.costTensor,t.trainFeedEntries,t.batchSize,t.optimizer,r);if(n){var i=performance.now()-e;if(t.eventObserver.avgCostCallback(a),null!=t.eventObserver.trainExamplesPerSecCallback){var s=1e3*t.batchSize/i;t.eventObserver.trainExamplesPerSecCallback(s)}}null!=t.eventObserver.metricCallback&&null!=t.metricFeedEntries&&e-t.lastEvalTimestamp>t.metricIntervalMs&&(t.lastEvalTimestamp=e,null!=t.lastComputedMetric&&t.lastComputedMetric.dispose(),t.lastComputedMetric=t.computeMetric(),t.eventObserver.metricCallback(t.lastComputedMetric)),null!=t.eventObserver.totalTimeCallback&&t.eventObserver.totalTimeCallback((e-t.trainStartTimestamp)/1e3),t.batchesTrainedThisRun++,t.totalBatchesTrained++,null!=t.eventObserver.batchesTrainedCallback&&t.eventObserver.batchesTrainedCallback(t.totalBatchesTrained)}),requestAnimationFrame(function(){return t.trainNetwork()})}else null!=this.eventObserver.doneTrainingCallback&&this.eventObserver.doneTrainingCallback()},t.prototype.infer=function(t,e,n,r,o){var i=this;if(void 0===n&&(n=3e3),void 0===r&&(r=5),null==this.eventObserver.inferenceExamplesCallback&&null==this.eventObserver.inferenceExamplesPerSecCallback)throw new Error("Cannot start inference loop, no inference example or examples/sec observer provided.");for(var s=0;s<e.length;s++){if(e[s].data instanceof a.NDArray)throw new Error("Cannot start inference on the model runner with feed entries of type NDArray. Please use InputProviders.")}this.inferenceExampleIntervalMs=n,this.inferenceTensor=t,this.inferenceFeedEntries=e,this.inferenceExampleCount=r,this.currentInferenceLoopNumPasses=o,this.isInferring||(this.inferencePassesThisRun=0,requestAnimationFrame(function(){return i.inferNetwork()})),this.isInferring=!0},t.prototype.inferNetwork=function(){var t=this;this.isInferring&&this.inferencePassesThisRun!==this.currentInferenceLoopNumPasses&&(this.math.scope(function(e){for(var n=[],r=[],o=performance.now(),a=0;a<t.inferenceExampleCount;a++){for(var i=[],s=0;s<t.inferenceFeedEntries.length;s++){var u=t.inferenceFeedEntries[s],c=u.data.getNextCopy(t.math);i.push({tensor:u.tensor,data:c})}n.push(i),r.push(t.session.eval(t.inferenceTensor,i))}if(null!=t.eventObserver.inferenceExamplesPerSecCallback){r[r.length-1].getValues();var p=performance.now()-o,h=1e3*t.inferenceExampleCount/p;t.eventObserver.inferenceExamplesPerSecCallback(h)}null!=t.eventObserver.inferenceExamplesCallback&&t.eventObserver.inferenceExamplesCallback(n,r),t.inferencePassesThisRun++}),this.lastInferTimeoutID=window.setTimeout(function(){return t.inferNetwork()},this.inferenceExampleIntervalMs))},t.prototype.stopInferring=function(){this.isInferring=!1,window.clearTimeout(this.lastInferTimeoutID)},t.prototype.isInferenceRunning=function(){return this.isInferring},t.prototype.computeMetric=function(){var t=this;if(null==this.metricFeedEntries)throw new Error("Cannot compute metric, no metric FeedEntries provided.");var e=this.zeroScalar;return this.math.scope(function(n){for(var o=0;o<t.metricBatchSize;o++){var a=t.session.eval(t.metricTensor,t.metricFeedEntries);e=t.math.add(e,a)}return t.metricReduction===r.MEAN&&(e=t.math.divide(e,t.metricBatchSizeScalar)),e})},t.prototype.getTotalBatchesTrained=function(){return this.totalBatchesTrained},t.prototype.getLastComputedMetric=function(){return this.lastComputedMetric},t.prototype.setMath=function(t){this.math=t},t.prototype.setSession=function(t){this.session=t},t.prototype.setInferenceTensor=function(t){this.inferenceTensor=t},t.prototype.setInferenceExampleCount=function(t){this.inferenceExampleCount=t},t}();e.GraphRunner=i},oERz:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("BozM"),o=n("jMY8"),a=n("2HCx"),i=n("j3TE"),s=n("FSI1"),u=function(){return function(t){var e=this;this.dict={},t&&t.forEach(function(t){return e.dict[t.tensor.id]=t})}}();e.FeedDictionary=u;var c;!function(t){t[t.NONE=0]="NONE",t[t.SUM=1]="SUM",t[t.MEAN=2]="MEAN"}(c=e.CostReduction||(e.CostReduction={}));var p=function(){function t(t,e){this.math=e,this.activationArrayMap=new s.TensorArrayMap,this.runtimeCache={},this.oneScalar=r.Scalar.new(1),this.gradientArrayMap=new s.SummedTensorArrayMap(this.math)}return t.prototype.dispose=function(){var t=this;this.activationArrayMap.dispose(),Object.keys(this.runtimeCache).forEach(function(e){var n=t.runtimeCache[e];n.operations&&n.operations.forEach(function(t){return t.dispose()})}),this.runtimeCache={},null!=this.batchSizeScalar&&this.batchSizeScalar.dispose(),this.oneScalar.dispose()},t.prototype.evalAll=function(t,e){var n=this;return this.math.scope(function(){var r=new u(e),o=n.getOrCreateRuntime(t,r),a=n.activationArrayMap;i.disposeAndInitializeOperationOutputs(o.nodes,a),i.disposeTransientOperationArrays(o.operations,n.activationArrayMap,n.gradientArrayMap),i.addPersistentArraysToTensorArrayMap(o.nodes,a),i.loadInputsFromFeedDictionaryToTensorArrayMap(r,a,n.math),o.operations.forEach(function(t){return t.feedForward(n.math,a)});var s=t.map(function(t){return a.get(t)});return t.forEach(function(t){return a.delete(t)}),i.releaseFeedDictionaryInputsFromTensorArrayMap(r,a,n.math),s})},t.prototype.eval=function(t,e){return this.evalAll([t],e)[0]},t.prototype.train=function(t,e,n,a,s){var p=this;void 0===s&&(s=c.NONE),o.assert(o.isScalarShape(t.shape),"Cost tensor for training must be a scalar value."),this.prevBatchSize!==n&&(this.prevBatchSize=n,null!=this.batchSizeScalar&&this.batchSizeScalar.dispose(),this.batchSizeScalar=this.math.keep(r.Scalar.new(n)));var h=new u(e);i.throwIfFeedDictionaryContainsNDArrays(h);var l=this.getOrCreateRuntime([t],h),f=l.operations,d=l.operations.slice().reverse(),v=this.activationArrayMap,y=this.gradientArrayMap;return y.nullify(t),y.add(t,this.oneScalar),i.addPersistentArraysToTensorArrayMap(l.nodes,v),a.beforeBatch(this.math,n,l,v,y),this.math.scope(function(){for(var e=r.Scalar.new(0),o=0;o<n;++o)i.disposeAndInitializeOperationOutputs(l.nodes,v),i.disposeAndInitializeOperationInputGradients(l.nodes,y),i.disposeTransientOperationArrays(l.operations,v,y),i.loadInputsFromFeedDictionaryToTensorArrayMap(h,v,p.math),f.forEach(function(t){return t.feedForward(p.math,v)}),d.forEach(function(t){return t.backProp(p.math,v,y)}),a.afterExample(p.math,l,v,y),i.releaseFeedDictionaryInputsFromTensorArrayMap(h,v,p.math),e=p.updateCostForExample(e,v.get(t),s);return a.afterBatch(p.math,n,l,v,y),p.updateCostForBatch(e,s)})},t.prototype.updateCostForExample=function(t,e,n){return n===c.MEAN||n===c.SUM?this.math.add(t,e):t},t.prototype.updateCostForBatch=function(t,e){return e===c.MEAN?this.math.divide(t,this.batchSizeScalar):t},t.prototype.getOrCreateRuntime=function(t,e){var n=this.makeRuntimeCacheKey(t,e),r=this.runtimeCache[n];if(void 0===r){var o=i.getOrderedEvaluationSetFromEvalTensor(t,e);i.removeFeedDictionaryNodesFromEvaluationSet(e,o),i.throwErrorIfEvaluationSetContainsPlaceholderNodes(o);r={nodes:o,operations:a.emitFromGraphNodes(o)},this.runtimeCache[n]=r}return r},t.prototype.makeRuntimeCacheKey=function(t,e){return t.map(function(t){return t.id}).sort().join("_")+"__"+Object.keys(e.dict).sort().join("_")},t}();e.Session=p},oGZu:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e,n){this.variableNames=["A"],this.outputShape=t;var r=e.toFixed(20),o=n.toFixed(20);this.userCode="\n      void main() {\n        float value = getAAtOutCoords();\n        if (isNaN(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, "+r+", "+o+"));\n      }\n    "}}();e.ClipProgram=r},"p//t":function(t,e,n){var r;!function(o,a){function i(t,e,n){var r=[],i=c(u((e=1==e?{entropy:!0}:e||{}).entropy?[t,p(o)]:null==t?function(){try{var t;return h&&(t=h.randomBytes)?t=t(f):(t=new Uint8Array(f),(l.crypto||l.msCrypto).getRandomValues(t)),p(t)}catch(t){var e=l.navigator,n=e&&e.plugins;return[+new Date,l,n,l.screen,p(o)]}}():t,3),r),b=new function(t){var e,n=t.length,r=this,o=0,a=r.i=r.j=0,i=r.S=[];n||(t=[n++]);for(;o<f;)i[o]=o++;for(o=0;o<f;o++)i[o]=i[a=x&a+t[o%n]+(e=i[o])],i[a]=e;(r.g=function(t){for(var e,n=0,o=r.i,a=r.j,i=r.S;t--;)e=i[o=x&o+1],n=n*f+i[x&(i[o]=i[a=x&a+e])+(i[a]=e)];return r.i=o,r.j=a,n})(f)}(r),w=function(){for(var t=b.g(d),e=y,n=0;t<m;)t=(t+n)*f,e*=f,n=b.g(1);for(;t>=g;)t/=2,e/=2,n>>>=1;return(t+n)/e};return w.int32=function(){return 0|b.g(4)},w.quick=function(){return b.g(4)/4294967296},w.double=w,c(p(b.S),o),(e.pass||n||function(t,e,n,r){return r&&(r.S&&s(r,b),t.state=function(){return s(b,{})}),n?(a[v]=t,e):t})(w,i,"global"in e?e.global:this==a,e.state)}function s(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function u(t,e){var n,r=[],o=typeof t;if(e&&"object"==o)for(n in t)try{r.push(u(t[n],e-1))}catch(t){}return r.length?r:"string"==o?t:t+"\0"}function c(t,e){for(var n,r=t+"",o=0;o<r.length;)e[x&o]=x&(n^=19*e[x&o])+r.charCodeAt(o++);return p(e)}function p(t){return String.fromCharCode.apply(0,t)}var h,l=this,f=256,d=6,v="random",y=a.pow(f,d),m=a.pow(2,52),g=2*m,x=f-1;if(a["seed"+v]=i,c(a.random(),o),"object"==typeof t&&t.exports){t.exports=i;try{h=n(0)}catch(t){}}else void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)}([],Math)},qARP:function(t,e,n){"use strict";var r=n("lOnJ");t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}(t)}},qfl5:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("kcYE"),a=n("/ROS"),i=function(t){function e(e,n,r){var o=t.call(this)||this;return o.xTensor=e,o.yTensor=n,o.func=r,o}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.xTensor);t.scope(function(o){e.set(n.yTensor,o(n.func.output(t,r)))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.xTensor),a=e.get(this.yTensor),i=n.get(this.yTensor);t.scope(function(){var e=r.func.der(t,o,a);n.add(r.xTensor,t.elementWiseMul(i,e)),e.dispose()})},e.prototype.dispose=function(){this.func.dispose()},e}(a.Operation);e.ElementWiseActivation=i;var s=function(t){function e(e,n){return t.call(this,e,n,new o.ReLUFunc)||this}return r(e,t),e}(i);e.ReLU=s;var u=function(t){function e(e,n,r){return t.call(this,e,n,new o.LeakyReluFunc(r))||this}return r(e,t),e}(i);e.LeakyReLU=u;var c=function(t){function e(e,n){return t.call(this,e,n,new o.TanHFunc)||this}return r(e,t),e}(i);e.TanH=c;var p=function(t){function e(e,n){return t.call(this,e,n,new o.SigmoidFunc)||this}return r(e,t),e}(i);e.Sigmoid=p;var h=function(t){function e(e,n){return t.call(this,e,n,new o.SquareFunc)||this}return r(e,t),e}(i);e.Square=h;var l=function(t){function e(e,n){return t.call(this,e,n,new o.EluFunc)||this}return r(e,t),e}(i);e.Elu=l;var f=function(t){function e(e,n,r){var o=t.call(this)||this;return o.xTensor=e,o.alphaTensor=n,o.yTensor=r,o}return r(e,t),e.prototype.feedForward=function(t,e){var n=this,r=e.get(this.xTensor),o=e.get(this.alphaTensor);t.scope(function(a){e.set(n.yTensor,a(t.prelu(r,o)))})},e.prototype.backProp=function(t,e,n){var r=this,o=e.get(this.xTensor),a=e.get(this.alphaTensor),i=n.get(this.yTensor);t.scope(function(){var e=t.preluDer(o,a);n.add(r.xTensor,t.elementWiseMul(i,e))})},e}(a.Operation);e.PReLU=f},qhzv:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("fpai"),o=n("BozM"),a=n("j3TE"),i=n("FSI1"),s=function(){function t(t,e){this.learningRate=t,this.variableGradients=new i.TensorArrayMap,null!=e&&(this.specifiedVariableNodes=e),this.one=r.ENV.math.keep(o.Scalar.new(1))}return t.prototype.beforeBatch=function(t,e,n,r,i){var s=this;this.variableNodes=null==this.specifiedVariableNodes?a.getVariableNodesFromEvaluationSet(n.nodes):this.specifiedVariableNodes,e!==this.prevBatchSize&&(null!=this.c&&this.c.dispose(),this.prevBatchSize=e,this.c=t.keep(o.Scalar.new(-this.learningRate/e))),this.variableNodes.forEach(function(e){return s.variableGradients.set(e.output,t.keep(o.NDArray.zeros(e.output.shape)))})},t.prototype.afterExample=function(t,e,n,r){var o=this;t.scope(function(e){o.variableNodes.forEach(function(n){var a=r.get(n.output),i=o.variableGradients.get(n.output);o.variableGradients.set(n.output,e(t.add(a,i))),i.dispose()})})},t.prototype.dispose=function(){null!=this.c&&this.c.dispose(),this.one.dispose(),this.variableNodes.forEach(function(t){t.data.dispose()}),this.specifiedVariableNodes.forEach(function(t){t.data.dispose()})},t}();e.Optimizer=s},qio6:function(t,e,n){var r=n("evD5"),o=n("77Pl"),a=n("lktj");t.exports=n("+E39")?Object.defineProperties:function(t,e){o(t);for(var n,i=a(e),s=i.length,u=0;s>u;)r.f(t,n=i[u++],e[n]);return t}},rmfs:function(t,e,n){"use strict";function r(t){return t[0]+"_"+t[1]}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.allocatedTextures=[],this.usedTextureCount={}}return t.prototype.acquireTexture=function(t){var e=r(t);if(e in this.freeTextures||(this.freeTextures[e]=[]),e in this.usedTextureCount||(this.usedTextureCount[e]=0),this.usedTextureCount[e]++,this.freeTextures[e].length>0)return this.numFreeTextures--,this.numUsedTextures++,this.log(),this.freeTextures[e].shift();this.numUsedTextures++,this.log();var n=this.gpgpu.createMatrixTexture(t[0],t[1]);return this.allocatedTextures.push(n),n},t.prototype.releaseTexture=function(t,e){var n=r(e);n in this.freeTextures||(this.freeTextures[n]=[]),this.freeTextures[n].push(t),this.numFreeTextures++,this.numUsedTextures--,this.usedTextureCount[n]--,this.log()},t.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var t=this;this.allocatedTextures.forEach(function(e){t.gpgpu.deleteMatrixTexture(e)}),this.freeTextures=null,this.allocatedTextures=null,this.usedTextureCount=null,this.numUsedTextures=0,this.numFreeTextures=0},t}();e.TextureManager=o},rxXm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.version="0.3.16"},sB3e:function(t,e,n){var r=n("52gC");t.exports=function(t){return Object(r(t))}},t6kj:function(t,e,n){"use strict";function r(){return!a.ENV.get("WEBGL_FLOAT_TEXTURE_ENABLED")}function o(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(t,n){var r=t.logicalShape,o=t.texShape,a=e[n].array.shape,s=e[n].texData.texShape;if(!i.arraysEqual(r,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+a+" must match");if(!i.arraysEqual(o,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+o+" and "+s+" must match")})}Object.defineProperty(e,"__esModule",{value:!0});var a=n("fpai"),i=n("jMY8"),s=n("lYtQ"),u=["uv","clipSpacePos"],c="NaN";e.compileProgram=function(t,e,n,o){for(var a=e.userCode,i=n.map(function(t,n){var r={logicalShape:t.array.shape,texShape:t.texData.texShape,textureType:t.texData.textureType};return{name:e.variableNames[n],shapeInfo:r}}),p=i.map(function(t){return t.shapeInfo}),h={logicalShape:o.array.shape,texShape:o.texData.texShape,textureType:o.texData.textureType},l=s.makeShader(i,h,a,!0===e.supportsBroadcasting),f=t.createProgram(l),d={},v=0;v<e.variableNames.length;v++){var y=e.variableNames[v];d[y]=t.getUniformLocation(f,y)}var m={};return u.forEach(function(e){m[e]=t.getAttributeLocation(f,e)}),r()&&(d[c]=t.getUniformLocation(f,c)),{program:e,source:l,webGLProgram:f,uniformLocations:d,attributeLocations:m,gpgpu:t,inShapeInfos:p,outShapeInfo:h}},e.runProgram=function(t,e,n,a){o(t.inShapeInfos,e),o([t.outShapeInfo],[n]);var i=n.texData.texture,s=n.texData.texShape,u=t.gpgpu;u.setOutputMatrixTexture(i,s[0],s[1]),u.setProgram(t.webGLProgram),e.forEach(function(e,n){var r=e.texData.texture,o=t.program.variableNames[n],a=t.uniformLocations[o];u.setInputMatrixTexture(r,a,n)}),r()&&u.gl.uniform1f(t.uniformLocations[c],NaN),null!=a&&a(u,t.webGLProgram),u.executeProgram(t.attributeLocations)},e.makeShaderKey=function(t,e,n){var r="";e.concat(n).forEach(function(t){r+=t.array.shape+"_"+t.texData.texShape});var o=t.userCode,a=(!0===t.supportsBroadcasting).toString(),i=t.constructor.name;return i+="_"+a+"_"+r+"_"+o}},t8x9:function(t,e,n){var r=n("77Pl"),o=n("lOnJ"),a=n("dSzd")("species");t.exports=function(t,e){var n,i=r(t).constructor;return void 0===i||void 0==(n=r(i)[a])?e:o(n)}},uKcl:function(t,e,n){"use strict";function r(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length}function o(t,e){for(var n=0,r=0;r<t.length;r++){var o=t[r]-e;n+=o*o}return Math.sqrt(n/t.length)}function a(t){for(var e=r(t),n=t.length,o=0,a=0,i=0;i<n;i++){var s=t[i]-e;o+=Math.pow(s,2),a+=Math.pow(s,4)}return 1/n*a/Math.pow(1/n*o,2)}function i(t){for(var e=r(t),n=t.length,o=0,a=0,i=0;i<n;i++){var s=t[i]-e;o+=Math.pow(s,2),a+=Math.pow(s,3)}return 1/n*a/Math.pow(1/(n-1)*o,1.5)}function s(t,n,r){if(void 0===r&&(r=e.TEST_EPSILON),!u(t,n,r))throw new Error("Numbers differ: actual === "+t+", expected === "+n)}function u(t,e,n){return!(!isNaN(t)||!isNaN(e))||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function c(t,e,n,r){null!=r?r.forEach(function(r){var o=t+" "+JSON.stringify(r);n(o,e,r)}):n(t,e)}function p(t,e,n,r){var o;h(t,e,r,function(){o=n(),l.ENV.setMath(o),o.startScope()},function(){o.endScope(null),o.dispose()},function(t,e){g(t,function(){return e(o)})})}function h(t,e,n,r,o,a){void 0===a&&(a=g),describe(t,function(){beforeEach(function(){null!=n&&(l.ENV.setFeatures(n),l.ENV.registerBackend("webgl",function(){return new d.MathBackendWebGL}),l.ENV.registerBackend("cpu",function(){return new f.MathBackendCPU})),null!=r&&r()}),afterEach(function(){null!=o&&o(),null!=n&&l.ENV.reset()}),e.forEach(function(t){return t(a)})})}Object.defineProperty(e,"__esModule",{value:!0});var l=n("fpai"),f=n("Z92E"),d=n("2d20"),v=n("02A5"),y=n("BozM"),m=n("jMY8");e.TEST_EPSILON=.01,e.mean=r,e.standardDeviation=o,e.kurtosis=a,e.skewness=i,e.jarqueBeraNormalityTest=function(t){var e=t.length,n=i(t),r=a(t),o=e/6*(Math.pow(n,2)+.25*Math.pow(r-3,2));if(o>5.991)throw new Error("Invalid p-value for JB: "+o)},e.expectArrayInMeanStdRange=function(t,n,a,i){void 0===i&&(i=e.TEST_EPSILON);var u=r(t);s(u,n,i),s(o(t,u),a,i)},e.expectArraysClose=function(t,n,r){if(void 0===r&&(r=e.TEST_EPSILON),t instanceof y.NDArray||n instanceof y.NDArray){if(t instanceof y.NDArray&&n instanceof y.NDArray){if(t.dtype!==n.dtype)throw new Error("Arrays are of different type actual: "+t.dtype+" vs expected: "+n.dtype+".");if(!m.arraysEqual(t.shape,n.shape))throw new Error("Arrays are of different shape actual: "+t.shape+" vs expected: "+n.shape+".")}}else{var o=t.constructor.name,a=n.constructor.name;if(o!==a)throw new Error("Arrays are of different type actual: "+o+" vs expected: "+a)}var i,s;if(i=t instanceof y.NDArray?t.dataSync():t,s=n instanceof y.NDArray?n.dataSync():n,i.length!==s.length)throw new Error("Arrays have different lengths actual: "+i.length+" vs expected: "+s.length+".");for(var c=0;c<s.length;++c){var p=i[c],h=s[c];if(!u(p,h,r)){var l="actual["+c+"] === "+p,f="expected["+c+"] === "+h;throw new Error("Arrays differ: "+l+", "+f)}}},e.expectNumbersClose=s,e.expectValuesInRange=function(t,e,n){for(var r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error("Value out of range:"+t[r]+" low: "+e+", high: "+n)},e.randomArrayInRange=function(t,e,n){for(var r=new Float32Array(t),o=n-e,a=0;a<t;++a)r[a]=Math.random()*o+e;return r},e.makeIdentity=function(t){for(var e=new Float32Array(t*t),n=0;n<t;++n)e[n*t+n]=1;return e},e.cpuMultiplyMatrix=function(t,e,n,r,o,a){for(var i=new Float32Array(e*a),s=0;s<e;++s)for(var u=s*n,c=s*a,p=0;p<a;++p){for(var h=0,l=0;l<n;++l)h+=t[u+l]*r[l*a+p];i[c+p]=h}return i},e.cpuDotProduct=function(t,e){if(t.length!==e.length)throw new Error("cpuDotProduct: incompatible vectors.");for(var n=0,r=0;r<t.length;++r)n+=t[r]*e[r];return n},e.describeMathCPU=function(t,e,n){c("CPU: math."+t,e,function(t,e,n){return p(t,e,function(){return new v.NDArrayMath(new f.MathBackendCPU,!0)},n)},n)},e.describeMathGPU=function(t,e,n){c("WebGL: math."+t,e,function(t,e,n){return p(t,e,function(){return new v.NDArrayMath(new d.MathBackendWebGL,!0)},n)},n)},e.describeCustom=function(t,e,n,r,o){c(t,[e],function(t,e,n){return h(t,e,n,r,o)},n)};var g=function(t,e){it(t,function(t){var n=e();n instanceof Promise?n.then(t,function(e){fail(e),t()}):t()})};e.executeMathTests=p,e.executeTests=h,e.assertIsNan=function(t,e){if(!m.isValNaN(t,e))throw new Error("Value "+t+" does not represent NaN for dtype "+e)}},"us/S":function(t,e,n){t.exports={default:n("Xd32"),__esModule:!0}},v2Ar:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=n-1-t.padInfo.left,s=e*n-1;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+s+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+n+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}();e.MaxPool2DBackpropProgram=r},"vFc/":function(t,e,n){var r=n("TcQ7"),o=n("QRG4"),a=n("fkB2");t.exports=function(t){return function(e,n,i){var s,u=r(e),c=o(u.length),p=a(i,c);if(t&&n!=n){for(;c>p;)if((s=u[p++])!=s)return!0}else for(;c>p;p++)if((t||p in u)&&u[p]===n)return t||p||0;return!t&&-1}}},"vIB/":function(t,e,n){"use strict";var r=n("O4g8"),o=n("kM2E"),a=n("880/"),i=n("hJx8"),s=n("D2L2"),u=n("/bQp"),c=n("94VQ"),p=n("e6n0"),h=n("PzxK"),l=n("dSzd")("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,v,y,m,g){c(n,e,v);var x,b,w,E=function(t){if(!f&&t in _)return _[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},A=e+" Iterator",T="values"==y,S=!1,_=t.prototype,M=_[l]||_["@@iterator"]||y&&_[y],N=!f&&M||E(y),k=y?T?E("entries"):N:void 0,C="Array"==e?_.entries||M:M;if(C&&(w=h(C.call(new t)))!==Object.prototype&&w.next&&(p(w,A,!0),r||s(w,l)||i(w,l,d)),T&&M&&"values"!==M.name&&(S=!0,N=function(){return M.call(this)}),r&&!g||!f&&!S&&_[l]||i(_,l,N),u[e]=N,u[A]=d,y)if(x={values:T?N:E("values"),keys:m?N:E("keys"),entries:k},g)for(b in x)b in _||a(_,b,x[b]);else o(o.P+o.F*(f||S),e,x);return x}},wH3f:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("BozM"),a=n("FSI1"),i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.learningRate=e,r.accumulatedSquaredGradients=new a.TensorArrayMap,r.eps=o.Scalar.new(1e-6),r}return r(e,t),e.prototype.beforeBatch=function(e,n,r,a,i){var s=this;t.prototype.beforeBatch.call(this,e,n,r,a,i),0===this.accumulatedSquaredGradients.size()&&this.variableNodes.forEach(function(t){s.accumulatedSquaredGradients.set(t.output,o.NDArray.zeros(t.output.shape))})},e.prototype.afterBatch=function(t,e,n,r,o){var i=this;t.scope(function(e){i.variableNodes.forEach(function(n){var o=r.get(n.output),a=i.variableGradients.get(n.output),s=i.accumulatedSquaredGradients.get(n.output),u=t.multiply(a,a),c=t.add(s,u),p=t.scaledArrayAdd(i.c,t.divide(a,t.add(t.sqrt(c),i.eps)),i.one,o);i.accumulatedSquaredGradients.set(n.output,e(c)),r.set(n.output,e(p)),n.data=p,o.dispose(),s.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new a.TensorArrayMap},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.eps.dispose(),this.accumulatedSquaredGradients.dispose()},e}(n("qhzv").Optimizer);e.AdagradOptimizer=i},wb5b:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("FSI1"),a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.learningRate=e,r}return r(e,t),e.prototype.afterBatch=function(t,e,n,r,a){var i=this;t.scope(function(e){i.variableNodes.forEach(function(n){var o=r.get(n.output),a=i.variableGradients.get(n.output),s=t.scaledArrayAdd(i.c,a,i.one,o);r.set(n.output,e(s)),n.data=s,o.dispose()})}),this.variableGradients.dispose(),this.variableGradients=new o.TensorArrayMap},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.setLearningRate=function(t){this.learningRate=t},e}(n("qhzv").Optimizer);e.SGDOptimizer=a},wxAW:function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n("C4MV"));e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,r.default)(t,o.key,o)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},xGkn:function(t,e,n){"use strict";var r=n("4mcu"),o=n("EGZi"),a=n("/bQp"),i=n("TcQ7");t.exports=n("vIB/")(Array,"Array",function(t,e){this._t=i(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},"xH/j":function(t,e,n){var r=n("hJx8");t.exports=function(t,e,n){for(var o in e)n&&t[o]?t[o]=e[o]:r(t,o,e[o]);return t}},xf6u:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("jMY8"),o=n("BozM"),a=n("FHsp"),i=n("ayDV"),s=function(){function t(t,e){this.backend=t,this.safeMode=e,this.nextTapeNodeId=0,this.gradientScopeCount=0,this.debugMode=!1,this.activeScope={keep:[],track:[]},this.scopeStack=[this.activeScope]}return t.prototype.enableDebugMode=function(){this.debugMode=!0},t.prototype.executeKernel=function(t,e,n){var o,s=this;this.debugMode&&(o=performance.now());var u=a.executeKernel(s.backend,t,e);if(this.debugMode){var c=u.getValues(),p=r.rightPad(performance.now()-o+"ms",9),h=r.rightPad(t,25),l=u.rank,f=u.size,d=r.rightPad(u.shape.toString(),14);console.log("%c"+h+"\t%c"+p+"\t%c"+l+"D "+d+"\t%c"+f,"font-weight:bold","color:red","color:blue","color: orange"),r.checkForNaN(c,u.dtype,name)}if(null!=this.activeTape){e=i.stripUndefinedInputsFromInputConfig(e);var v={id:this.nextTapeNodeId++,type:"kernel",name:"kernel: "+t,kernel:t,inputAndArgs:e,output:u,gradient:n};this.activeTape.push(v)}return u},t.prototype.gradients=function(t,e,n){var r=this,o=this.scope("gradients",function(){var o=t();if(0!==o.rank)throw new Error("Cannot compute gradient of non-scalar y output. Got y with rank "+o.rank);var a=r.gradientWrt(o,e);return n?[o].concat(a):a},!0);return n?{value:o[0],gradients:o.slice(1)}:o},t.prototype.gradientWrt=function(t,e){var n=i.getFilteredNodesXToY(this.activeTape,e,t);if(0===n.length)throw new Error("Cannot compute gradient: y is not a function of xs.");var r={};r[t.id]=o.Scalar.new(1),i.backpropagateGradients(r,n);for(var a=[],s=0;s<e.length;s++)a.push(r[e[s].id]);return a},t.prototype.scope=function(t,e,n){var r=this;this.startScope(n);var o=e(function(t){return r.keep(t)},function(t){return t});return o instanceof Promise?(o.then(function(t){return r.endScope(t,n)}),o):(this.endScope(o,n),o)},t.prototype.startScope=function(t){t&&0===this.gradientScopeCount&&(this.activeTape=[]),t&&this.gradientScopeCount++;var e={keep:[],track:[]};this.scopeStack.push(e),this.activeScope=e},t.prototype.endScope=function(t,e){var n=this,o=this.activeScope.keep,a=i.extractNDArraysFromScopeResult(t);o=o.concat(a);for(var s=0;s<this.activeScope.track.length;s++){var u=this.activeScope.track[s];r.isNDArrayInList(u,o)||(null!=this.activeTape?a.push(u):u.dispose())}this.scopeStack.pop(),this.activeScope=0===this.scopeStack.length?null:this.scopeStack[this.scopeStack.length-1],a.forEach(function(t){r.isNDArrayInList(t,n.activeScope.keep)||n.track(t)}),e&&(this.gradientScopeCount--,0===this.gradientScopeCount&&(this.activeTape=null))},t.prototype.keep=function(t){if(1===this.scopeStack.length&&this.safeMode)throw new Error("You are using math in safe mode. Enclose all math.method() calls inside a scope: math.scope(() => {math.method();...}) to avoid memory leaks.");return this.activeScope.keep.push(t),t},t.prototype.track=function(t){if(1===this.scopeStack.length&&this.safeMode)throw new Error("You are using math in safe mode. Enclose all math.method() calls inside a scope: math.scope(() => {math.method();...}) to avoid memory leaks.");return this.activeScope.track.push(t),t},t.prototype.getBackend=function(){return this.backend},t}();e.BackendEngine=s},xnc9:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},yNpf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("lABf"),o=n("7//S"),a=n("7//S");e.getUnorderedEvaluationSet=function(t,e){var n={},r={},o=[],a=t.slice();e.forEach(function(t){return n[t.id]=t});for(var i=function(){var t=a.pop();null==r[t.id]&&(null==n[t.id]&&Object.keys(t.inputs).map(function(e){return t.inputs[e]}).forEach(function(t){return a.push(t.node)}),o.push(t),r[t.id]=t)};0!==a.length;)i();return o},e.getOrderedEvaluationSet=function(t){var e=[],n={},r={},i=new a.PriorityQueue(function(t,e){return o.defaultCompare(r[t.id],r[e.id])},function(t,e){return n[t.id]=e});for(t.forEach(function(t){return r[t.id]=0}),t.forEach(function(e){return Object.keys(e.inputs).map(function(t){return e.inputs[t]}).forEach(function(e){-1!==t.indexOf(e.node)&&r[e.node.id]++})}),t.forEach(function(t){return i.enqueue(t)});!i.empty();)e.unshift(i.dequeue()),Object.keys(e[0].inputs).map(function(t){return e[0].inputs[t]}).forEach(function(e){-1!==t.indexOf(e.node)&&(r[e.node.id]--,i.update(e.node,n[e.node.id]))});return e},e.isInputNode=function(t){return 0===Object.keys(t.inputs).length},e.shouldBackProp=function(t){return!(t.node instanceof r.ConstantNode)},e.isPassthroughNode=function(t,e){for(var n=Object.keys(t.inputs),r=0;r<n.length;r++){var o=t.inputs[n[r]];if(e.get(o,!0)===e.get(t.output,!0))return!0}return!1}},zQR9:function(t,e,n){"use strict";var r=n("h65t")(!0);n("vIB/")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})}});
//# sourceMappingURL=0.eb9ca6bdd060c56191d7.js.map